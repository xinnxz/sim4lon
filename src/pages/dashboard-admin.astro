
---
/**
 * Dashboard Admin Page
 * 
 * PROTEKSI ROUTE:
 * Halaman ini dilindungi oleh ProtectedDashboard component.
 * User yang tidak login atau tidak punya role ADMIN akan di-redirect.
 */
import BaseLayout from '@/layouts/BaseLayout.astro'
import AppSidebarLayout from '@/components/common/AppSidebarLayout.tsx'
import AdminFooter from '@/components/common/AdminFooter.tsx'
import DashboardContent from '@/components/dashboard-admin/DashboardContent.tsx'
import ProtectedDashboard from '@/components/auth/ProtectedDashboard.tsx'
---

<BaseLayout title="Dashboard Admin - SIM4LON">
  <!-- ProtectedDashboard akan cek auth sebelum render konten -->
  <ProtectedDashboard client:load allowedRoles={['ADMIN', 'OPERATOR']}>
    <AppSidebarLayout client:load headerHeight="64px">
      <main class="flex-1 flex flex-col">
        <DashboardContent client:idle />
        <AdminFooter />
      </main>
    </AppSidebarLayout>
  </ProtectedDashboard>
</BaseLayout>

