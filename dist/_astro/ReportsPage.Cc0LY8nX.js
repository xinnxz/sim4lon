import{j as jsxRuntimeExports}from"./jsx-runtime.mvtouYz0.js";import{r as reactExports}from"./index.DcciWILN.js";import{C as Card,a as CardContent,b as CardHeader,c as CardTitle,d as CardDescription}from"./card.D0gylVsf.js";import{T as Tabs,a as TabsList,b as TabsTrigger,c as TabsContent}from"./tabs.BmAU3oNV.js";import{S as SafeIcon,B as Button}from"./SafeIcon.CAGsavDo.js";import{S as Select,a as SelectTrigger,b as SelectValue,c as SelectContent,d as SelectItem}from"./select.Dd50uIHU.js";import{I as Input}from"./input.C9ryBhC0.js";import{B as Badge}from"./badge.DZiJ6zSB.js";import{T as Tilt3DCard}from"./Tilt3DCard.A2Rmx9L7.js";import{A as AnimatedNumber}from"./AnimatedNumber.DkDF6dXY.js";import{reportsApi}from"./api.Dr7hS9Y8.js";import{t as toast}from"./index.fAd_ikgp.js";import{f as formatCurrencyExport,c as createFooterRow,a as exportToPDF,e as exportToExcel,b as formatDateExport}from"./export-utils.uYz9d_v0.js";import{R as ResponsiveContainer,T as Tooltip,L as Legend,C as Cell,B as Bar}from"./generateCategoricalChart.Jvaki1lA.js";import{L as LineChart,a as Line}from"./LineChart.DlLWrhRL.js";import{C as CartesianGrid,X as XAxis,Y as YAxis}from"./YAxis.DHdzTV6E.js";import{P as PieChart,a as Pie}from"./PieChart.Dm24sdDM.js";import{B as BarChart}from"./BarChart.C5wt_Obv.js";import"./index.BpQ989z7.js";import"./index.PIAPtHoh.js";import"./index.ubNQCTBn.js";import"./index.DQDOfy24.js";import"./index.BStXkqMp.js";import"./index.YpXgcoRz.js";import"./index.Dovp0-D8.js";import"./index.Drh0kMGk.js";import"./index.CdmyERTi.js";import"./index.DGt6JTY0.js";import"./index.DZiLsHox.js";import"./index.BFpcrWlj.js";import"./index.9MihlNbL.js";import"./index.BhA3i5Wo.js";import"./index.BaF2FVWY.js";import"./chevron-up.BBBXIirx.js";import"./check.TUgVKQyo.js";import"./jspdf.plugin.autotable.tHrVzh7j.js";import"./logo-pertamina.CveLq9KN.js";const formatCurrency$1=value=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(value),formatDate$1=dateString=>{const date=new Date(dateString),dateStr=date.toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),timeStr=date.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"});return`${dateStr}, ${timeStr}`};function PangkalanTabContent({dateRange,isLoading:initialLoading,onSummaryLoad}){const getInitialSubTab=()=>typeof window<"u"&&window.location.hash.replace("#","")==="pangkalan-nonsubsidi"?"nonsubsidi":"subsidi",[pangkalanData,setPangkalanData]=reactExports.useState(null),[consumersData,setConsumersData]=reactExports.useState(null),[selectedPangkalanId,setSelectedPangkalanId]=reactExports.useState(""),[isLoading,setIsLoading]=reactExports.useState(initialLoading),[isLoadingConsumers,setIsLoadingConsumers]=reactExports.useState(!1),[activeSubTab,setActiveSubTab]=reactExports.useState(getInitialSubTab),[searchQuery,setSearchQuery]=reactExports.useState(""),[regionFilter,setRegionFilter]=reactExports.useState("ALL"),rowsPerPageOptions=[10,25,50],[pangkalanRowsPerPage,setPangkalanRowsPerPage]=reactExports.useState(10),[pangkalanCurrentPage,setPangkalanCurrentPage]=reactExports.useState(1),[sortBy,setSortBy]=reactExports.useState("tabung"),[sortOrder,setSortOrder]=reactExports.useState("desc"),handleSort=field=>{sortBy===field?setSortOrder(prev=>prev==="asc"?"desc":"asc"):(setSortBy(field),setSortOrder("desc")),setPangkalanCurrentPage(1)},getSortIcon=field=>sortBy!==field?"ArrowUpDown":sortOrder==="asc"?"ArrowUp":"ArrowDown",handleSubTabChange=value=>{if(setActiveSubTab(value),setPangkalanCurrentPage(1),typeof window<"u"){const newHash=value==="nonsubsidi"?"#pangkalan-nonsubsidi":"#pangkalan";window.history.replaceState(null,"",newHash)}};reactExports.useEffect(()=>{(async()=>{setIsLoading(!0);try{const data=await reportsApi.getPangkalanReport(dateRange.start,dateRange.end);setPangkalanData(data),setSelectedPangkalanId(""),setConsumersData(null),onSummaryLoad&&data?.summary?.total_pangkalan&&onSummaryLoad(data.summary.total_pangkalan)}catch(error){toast.error(error.message||"Gagal memuat data pangkalan")}finally{setIsLoading(!1)}})()},[dateRange.start,dateRange.end,onSummaryLoad]);const fetchConsumers=async pangkalanId=>{if(!pangkalanId){setConsumersData(null);return}setIsLoadingConsumers(!0);try{const data=await reportsApi.getSubsidiConsumers(pangkalanId,dateRange.start,dateRange.end);setConsumersData(data)}catch(error){toast.error(error.message||"Gagal memuat data konsumen")}finally{setIsLoadingConsumers(!1)}},handlePangkalanSelect=pangkalanId=>{setSelectedPangkalanId(pangkalanId),fetchConsumers(pangkalanId)},extractKabupaten=region=>{const kabMatch=region.match(/Kab(?:upaten)?\.?\s*([^\,]+)/i);if(kabMatch)return`Kab. ${kabMatch[1].trim()}`;const kotaMatch=region.match(/Kota\.?\s*([^\,]+)/i);return kotaMatch?`Kota ${kotaMatch[1].trim()}`:region},kabupatenList=reactExports.useMemo(()=>{if(!pangkalanData?.data)return[];const kabupatenSet=new Set;return pangkalanData.data.forEach(p=>{p.region&&p.region!=="-"&&kabupatenSet.add(extractKabupaten(p.region))}),Array.from(kabupatenSet).sort()},[pangkalanData]),filteredData=reactExports.useMemo(()=>{if(!pangkalanData?.data)return[];let filtered=[...pangkalanData.data];if(searchQuery){const query=searchQuery.toLowerCase();filtered=filtered.filter(p=>p.name.toLowerCase().includes(query)||p.code.toLowerCase().includes(query)||p.region.toLowerCase().includes(query))}regionFilter!=="ALL"&&(filtered=filtered.filter(p=>extractKabupaten(p.region)===regionFilter));const multiplier=sortOrder==="asc"?1:-1;return filtered.sort((a,b)=>{const aTransactions=activeSubTab==="subsidi"?a.total_consumer_orders:a.total_nonsubsidi_orders,bTransactions=activeSubTab==="subsidi"?b.total_consumer_orders:b.total_nonsubsidi_orders,aTabung=activeSubTab==="subsidi"?a.total_tabung_to_consumers:a.total_nonsubsidi_tabung,bTabung=activeSubTab==="subsidi"?b.total_tabung_to_consumers:b.total_nonsubsidi_tabung,aRevenue=activeSubTab==="subsidi"?a.total_revenue:a.total_nonsubsidi_revenue,bRevenue=activeSubTab==="subsidi"?b.total_revenue:b.total_nonsubsidi_revenue;switch(sortBy){case"name":return multiplier*a.name.localeCompare(b.name);case"region":return multiplier*(a.region||"").localeCompare(b.region||"");case"transactions":return multiplier*(aTransactions-bTransactions);case"tabung":return multiplier*(aTabung-bTabung);case"revenue":return multiplier*(aRevenue-bRevenue);default:return 0}}),filtered},[pangkalanData,searchQuery,regionFilter,activeSubTab,sortBy,sortOrder]),paginatedData=reactExports.useMemo(()=>{const start=(pangkalanCurrentPage-1)*pangkalanRowsPerPage;return filteredData.slice(start,start+pangkalanRowsPerPage)},[filteredData,pangkalanCurrentPage,pangkalanRowsPerPage]),totalPages=Math.ceil(filteredData.length/pangkalanRowsPerPage),getPeriodLabel=()=>{const start=new Date(dateRange.start).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),end=new Date(dateRange.end).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"});return`${start} - ${end}`},handleExportPDF=async()=>{try{const title=`Laporan Pangkalan - ${activeSubTab==="subsidi"?"Subsidi (3kg)":"Non-Subsidi (5.5kg+)"}`,period=getPeriodLabel(),filename=`laporan-pangkalan-${activeSubTab}-${new Date().toISOString().split("T")[0]}`,columns=[{header:"Kode",key:"code",width:12},{header:"Pangkalan",key:"name",width:25},{header:"Wilayah",key:"region",width:25},{header:"Transaksi",key:"transactions",width:12,align:"center"},{header:"Tabung",key:"tabung",width:12,align:"center"},{header:"Pendapatan",key:"revenue",width:18,align:"right"}],data=filteredData.map(item=>({code:item.code,name:item.name,region:item.region||"-",transactions:activeSubTab==="subsidi"?item.total_consumer_orders:item.total_nonsubsidi_orders,tabung:activeSubTab==="subsidi"?item.total_tabung_to_consumers:item.total_nonsubsidi_tabung,revenue:formatCurrencyExport(activeSubTab==="subsidi"?item.total_revenue:item.total_nonsubsidi_revenue)})),summary=activeSubTab==="subsidi"?[{label:"Total Pangkalan",value:pangkalanData?.summary.total_pangkalan||0},{label:"Total Transaksi Subsidi",value:pangkalanData?.summary.total_orders_subsidi||0},{label:"Total Tabung Subsidi",value:pangkalanData?.summary.total_tabung_subsidi||0},{label:"Total Pendapatan Subsidi",value:formatCurrencyExport(pangkalanData?.summary.total_revenue_subsidi||0)}]:[{label:"Total Pangkalan",value:pangkalanData?.summary.total_pangkalan||0},{label:"Total Transaksi Non-Subsidi",value:pangkalanData?.summary.total_nonsubsidi_orders||0},{label:"Total Tabung Non-Subsidi",value:pangkalanData?.summary.total_nonsubsidi_tabung||0},{label:"Total Pendapatan Non-Subsidi",value:formatCurrencyExport(pangkalanData?.summary.total_nonsubsidi_revenue||0)}],footerRows=activeSubTab==="subsidi"?[createFooterRow("TOTAL",{name:`${pangkalanData?.summary.total_pangkalan||0} Pangkalan`,region:"",transactions:pangkalanData?.summary.total_orders_subsidi||0,tabung:pangkalanData?.summary.total_tabung_subsidi||0,revenue:formatCurrencyExport(pangkalanData?.summary.total_revenue_subsidi||0)},"code")]:[createFooterRow("TOTAL",{name:`${pangkalanData?.summary.total_pangkalan||0} Pangkalan`,region:"",transactions:pangkalanData?.summary.total_nonsubsidi_orders||0,tabung:pangkalanData?.summary.total_nonsubsidi_tabung||0,revenue:formatCurrencyExport(pangkalanData?.summary.total_nonsubsidi_revenue||0)},"code")];console.log("[PangkalanExport] Starting PDF export..."),console.log("[PangkalanExport] Data count:",data.length),await exportToPDF(data,columns,summary,{title,period,filename},footerRows),console.log("[PangkalanExport] exportToPDF completed"),toast.success("PDF berhasil diexport!")}catch(error){console.error("[PangkalanExport] Export PDF error:",error),toast.error("Gagal export PDF")}},handleExportExcel=()=>{try{const title=`Laporan Pangkalan - ${activeSubTab==="subsidi"?"Subsidi (3kg)":"Non-Subsidi (5.5kg+)"}`,period=getPeriodLabel(),filename=`laporan-pangkalan-${activeSubTab}-${new Date().toISOString().split("T")[0]}`,columns=[{header:"Kode",key:"code",width:12},{header:"Pangkalan",key:"name",width:25},{header:"Wilayah",key:"region",width:25},{header:"Transaksi",key:"transactions",width:12},{header:"Tabung",key:"tabung",width:12},{header:"Pendapatan",key:"revenue",width:18}],data=filteredData.map(item=>({code:item.code,name:item.name,region:item.region||"-",transactions:activeSubTab==="subsidi"?item.total_consumer_orders:item.total_nonsubsidi_orders,tabung:activeSubTab==="subsidi"?item.total_tabung_to_consumers:item.total_nonsubsidi_tabung,revenue:activeSubTab==="subsidi"?item.total_revenue:item.total_nonsubsidi_revenue})),summary=activeSubTab==="subsidi"?[{label:"Total Pangkalan",value:pangkalanData?.summary.total_pangkalan||0},{label:"Total Transaksi Subsidi",value:pangkalanData?.summary.total_orders_subsidi||0},{label:"Total Tabung Subsidi",value:pangkalanData?.summary.total_tabung_subsidi||0},{label:"Total Pendapatan Subsidi",value:pangkalanData?.summary.total_revenue_subsidi||0}]:[{label:"Total Pangkalan",value:pangkalanData?.summary.total_pangkalan||0},{label:"Total Transaksi Non-Subsidi",value:pangkalanData?.summary.total_nonsubsidi_orders||0},{label:"Total Tabung Non-Subsidi",value:pangkalanData?.summary.total_nonsubsidi_tabung||0},{label:"Total Pendapatan Non-Subsidi",value:pangkalanData?.summary.total_nonsubsidi_revenue||0}],footerRows=activeSubTab==="subsidi"?[createFooterRow("TOTAL",{name:`${pangkalanData?.summary.total_pangkalan||0} Pangkalan`,region:"",transactions:pangkalanData?.summary.total_orders_subsidi||0,tabung:pangkalanData?.summary.total_tabung_subsidi||0,revenue:pangkalanData?.summary.total_revenue_subsidi||0},"code")]:[createFooterRow("TOTAL",{name:`${pangkalanData?.summary.total_pangkalan||0} Pangkalan`,region:"",transactions:pangkalanData?.summary.total_nonsubsidi_orders||0,tabung:pangkalanData?.summary.total_nonsubsidi_tabung||0,revenue:pangkalanData?.summary.total_nonsubsidi_revenue||0},"code")];exportToExcel(data,columns,summary,{title,period,filename},footerRows),toast.success("Excel berhasil diexport!")}catch(error){console.error("Export Excel error:",error),toast.error("Gagal export Excel")}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-primary to-emerald-500"}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Overview Pangkalan"})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden animate-slideInBlur stagger-1 card-hover-glow",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Total Pangkalan"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-primary mt-2",children:isLoading?"...":jsxRuntimeExports.jsx(AnimatedNumber,{value:pangkalanData?.summary.total_pangkalan||0,delay:100})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pangkalan aktif"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-emerald-100 to-green-200 dark:from-emerald-900/30 dark:to-green-800/30",style:{boxShadow:"0 4px 12px -2px hsl(152 100% 30% / 0.3)"},children:jsxRuntimeExports.jsx(SafeIcon,{name:"Store",className:"h-5 w-5 text-primary"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-emerald-300 via-primary to-emerald-300"})]})}),jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden animate-slideInBlur stagger-2 card-hover-glow",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Total Transaksi"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-teal-600 dark:text-teal-400 mt-2",children:isLoading?"...":jsxRuntimeExports.jsx(AnimatedNumber,{value:pangkalanData?.summary.total_all_orders||0,delay:200})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Semua tipe LPG"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-teal-100 to-teal-200 dark:from-teal-900/30 dark:to-teal-800/30",style:{boxShadow:"0 4px 12px -2px rgba(20,184,166,0.3)"},children:jsxRuntimeExports.jsx(SafeIcon,{name:"ShoppingCart",className:"h-5 w-5 text-teal-600 dark:text-teal-400"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-teal-300 via-teal-500 to-teal-300"})]})}),jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden animate-slideInBlur stagger-3 card-hover-glow",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Total Tabung"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400 mt-2",children:isLoading?"...":jsxRuntimeExports.jsx(AnimatedNumber,{value:pangkalanData?.summary.total_all_tabung||0,delay:300})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Keseluruhan jenis tabung"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-emerald-100 to-emerald-200 dark:from-emerald-900/30 dark:to-emerald-800/30",style:{boxShadow:"0 4px 12px -2px rgba(16,185,129,0.3)"},children:jsxRuntimeExports.jsx(SafeIcon,{name:"Boxes",className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-emerald-300 via-emerald-500 to-emerald-300"})]})}),jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden animate-slideInBlur stagger-4 card-hover-glow",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Total Pendapatan"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400 mt-2",children:isLoading?"...":jsxRuntimeExports.jsx(AnimatedNumber,{value:pangkalanData?.summary.total_all_revenue||0,delay:400,isCurrency:!0})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Revenue keseluruhan"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-amber-100 to-yellow-200 dark:from-amber-900/30 dark:to-yellow-800/30",style:{boxShadow:"0 4px 12px -2px hsl(48 100% 50% / 0.3)"},children:jsxRuntimeExports.jsx(SafeIcon,{name:"Wallet",className:"h-5 w-5 text-amber-600 dark:text-amber-400"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-amber-300 via-yellow-500 to-amber-300"})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:activeSubTab==="subsidi"?"default":"outline",className:activeSubTab==="subsidi"?"bg-gradient-to-r from-green-600 to-emerald-600 text-white border-0 shadow-lg":"hover:bg-green-50 dark:hover:bg-green-900/20",onClick:()=>handleSubTabChange("subsidi"),children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Shield",className:"w-4 h-4 mr-2"}),"LPG Subsidi (3kg)",jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:"ml-2 bg-white/20 text-inherit",children:pangkalanData?.summary.total_tabung_subsidi||0})]}),jsxRuntimeExports.jsxs(Button,{variant:activeSubTab==="nonsubsidi"?"default":"outline",className:activeSubTab==="nonsubsidi"?"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-0 shadow-lg":"hover:bg-amber-50 dark:hover:bg-amber-900/20",onClick:()=>handleSubTabChange("nonsubsidi"),children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Flame",className:"w-4 h-4 mr-2"}),"LPG Non-Subsidi",jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:"ml-2 bg-white/20 text-inherit",children:pangkalanData?.summary.total_nonsubsidi_tabung||0})]})]}),activeSubTab==="subsidi"?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Distribusi Subsidi (3kg)"}),jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 text-xs dark:bg-green-900/30 dark:text-green-400 dark:border-green-700",children:"Audit Focus"})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden card-hover-glow animate-scaleIn stagger-1",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Transaksi Subsidi"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:isLoading?"...":jsxRuntimeExports.jsx(AnimatedNumber,{value:pangkalanData?.summary.total_orders_subsidi||0,delay:100})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Transaksi 3kg"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-green-100 to-green-200 dark:from-green-900/30 dark:to-green-800/30",children:jsxRuntimeExports.jsx(SafeIcon,{name:"ShoppingBag",className:"h-5 w-5 text-green-600 dark:text-green-400"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-green-300 via-green-500 to-green-300"})]})}),jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden card-hover-glow animate-scaleIn stagger-2",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Tabung Subsidi"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-teal-600 mt-2",children:isLoading?"...":jsxRuntimeExports.jsx(AnimatedNumber,{value:pangkalanData?.summary.total_tabung_subsidi||0,delay:200})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Tabung 3kg terdistribusi"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-teal-100 to-teal-200 dark:from-teal-900/30 dark:to-teal-800/30",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Package",className:"h-5 w-5 text-teal-600 dark:text-teal-400"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-teal-300 via-teal-500 to-teal-300"})]})}),jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden card-hover-glow animate-scaleIn stagger-3",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Pendapatan Subsidi"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-lime-600 mt-2",children:isLoading?"...":jsxRuntimeExports.jsx(AnimatedNumber,{value:pangkalanData?.summary.total_revenue_subsidi||0,delay:300,isCurrency:!0})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Revenue 3kg"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-lime-100 to-lime-200 dark:from-lime-900/30 dark:to-lime-800/30",children:jsxRuntimeExports.jsx(SafeIcon,{name:"CircleDollarSign",className:"h-5 w-5 text-lime-600 dark:text-lime-400"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-lime-300 via-lime-500 to-lime-300"})]})}),jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden card-hover-glow animate-scaleIn stagger-4",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Konsumen Aktif"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-purple-600 mt-2",children:isLoading?"...":jsxRuntimeExports.jsx(AnimatedNumber,{value:pangkalanData?.summary.active_consumers||0,delay:400})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pembeli subsidi"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-purple-100 to-purple-200 dark:from-purple-900/30 dark:to-purple-800/30",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Users",className:"h-5 w-5 text-purple-600 dark:text-purple-400"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-purple-300 via-purple-500 to-purple-300"})]})})]})]}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"LPG Non-Subsidi (5.5kg+)"}),jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200 text-xs dark:bg-amber-900/30 dark:text-amber-400 dark:border-amber-700",children:"Business"})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden card-hover-glow animate-scaleIn stagger-1",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Transaksi Non-Subsidi"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-amber-600 mt-2",children:isLoading?"...":jsxRuntimeExports.jsx(AnimatedNumber,{value:pangkalanData?.summary.total_nonsubsidi_orders||0,delay:100})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Tabung Non-Subsidi"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-amber-100 to-amber-200 dark:from-amber-900/30 dark:to-amber-800/30",children:jsxRuntimeExports.jsx(SafeIcon,{name:"ShoppingBag",className:"h-5 w-5 text-amber-600 dark:text-amber-400"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-amber-300 via-amber-500 to-amber-300"})]})}),jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden card-hover-glow animate-scaleIn stagger-2",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Tabung Non-Subsidi"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-orange-600 mt-2",children:isLoading?"...":jsxRuntimeExports.jsx(AnimatedNumber,{value:pangkalanData?.summary.total_nonsubsidi_tabung||0,delay:200})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Tabung terjual"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-orange-100 to-orange-200 dark:from-orange-900/30 dark:to-orange-800/30",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Flame",className:"h-5 w-5 text-orange-600 dark:text-orange-400"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-orange-300 via-orange-500 to-orange-300"})]})}),jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden card-hover-glow animate-scaleIn stagger-3",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Pendapatan Non-Subsidi"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-2",children:isLoading?"...":jsxRuntimeExports.jsx(AnimatedNumber,{value:pangkalanData?.summary.total_nonsubsidi_revenue||0,delay:300,isCurrency:!0})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Revenue non-3kg"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-yellow-100 to-yellow-200 dark:from-yellow-900/30 dark:to-yellow-800/30",children:jsxRuntimeExports.jsx(SafeIcon,{name:"CircleDollarSign",className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-yellow-300 via-yellow-500 to-yellow-300"})]})}),jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden card-hover-glow animate-scaleIn stagger-4",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Top Pangkalan"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-bold text-primary mt-2 truncate max-w-[120px]",children:isLoading?"...":[...pangkalanData?.data||[]].sort((a,b)=>b.total_nonsubsidi_tabung-a.total_nonsubsidi_tabung)[0]?.name||"-"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Penjualan terbanyak"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-emerald-100 to-green-200 dark:from-emerald-900/30 dark:to-green-800/30",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Trophy",className:"h-5 w-5 text-primary"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-emerald-300 via-primary to-emerald-300"})]})})]})]}),jsxRuntimeExports.jsx(Card,{className:"glass-card",children:jsxRuntimeExports.jsx(CardContent,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Search",className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),jsxRuntimeExports.jsx(Input,{placeholder:"Cari pangkalan...",value:searchQuery,onChange:e=>{setSearchQuery(e.target.value),setPangkalanCurrentPage(1)},className:"pl-9"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Wilayah:"}),jsxRuntimeExports.jsxs(Select,{value:regionFilter,onValueChange:v=>{setRegionFilter(v),setPangkalanCurrentPage(1)},children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[140px]",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"ALL",children:"Semua"}),kabupatenList.map(r=>jsxRuntimeExports.jsx(SelectItem,{value:r,children:r},r))]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Tampilkan:"}),jsxRuntimeExports.jsxs(Select,{value:pangkalanRowsPerPage.toString(),onValueChange:v=>{setPangkalanRowsPerPage(Number(v)),setPangkalanCurrentPage(1)},children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[80px]",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsx(SelectContent,{children:rowsPerPageOptions.map(opt=>jsxRuntimeExports.jsx(SelectItem,{value:opt.toString(),children:opt},opt))})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",disabled:isLoading||!pangkalanData?.data?.length,onClick:handleExportPDF,className:"border-red-300 text-red-600 hover:bg-gradient-to-r hover:from-red-50 hover:to-red-100 hover:text-red-700 hover:border-red-400 transition-all shadow-sm hover:shadow-md",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"FileText",className:"h-4 w-4 mr-2"}),"Export PDF"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",disabled:isLoading||!pangkalanData?.data?.length,onClick:handleExportExcel,className:"border-green-300 text-green-600 hover:bg-gradient-to-r hover:from-green-50 hover:to-green-100 hover:text-green-700 hover:border-green-400 transition-all shadow-sm hover:shadow-md",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"FileSpreadsheet",className:"h-4 w-4 mr-2"}),"Export Excel"]})]})]})})}),jsxRuntimeExports.jsxs(Card,{className:"chart-card-premium rounded-2xl overflow-hidden",children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-3 border-b border-border/50",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${activeSubTab==="subsidi"?"bg-green-500":"bg-amber-500"}`}),jsxRuntimeExports.jsx(CardTitle,{className:"text-lg font-semibold",children:activeSubTab==="subsidi"?"Ranking Pangkalan (Subsidi)":"Ranking Pangkalan (Non-Subsidi)"})]}),jsxRuntimeExports.jsx(CardDescription,{className:"mt-1",children:activeSubTab==="subsidi"?"Performa distribusi LPG 3kg bersubsidi per pangkalan":"Performa penjualan LPG non-subsidi per pangkalan"})]}),jsxRuntimeExports.jsxs(Badge,{variant:"outline",className:activeSubTab==="subsidi"?"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/30 dark:text-green-400":"bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-900/30 dark:text-amber-400",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Trophy",className:"h-3 w-3 mr-1"}),"Top: ",pangkalanData?.summary.top_pangkalan||"-"]})]})}),jsxRuntimeExports.jsxs(CardContent,{className:"p-0",children:[isLoading?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-48",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):filteredData.length>0?jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"border-b border-border/50 bg-muted/30",children:[jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"#"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-muted/70 select-none",onClick:()=>handleSort("name"),children:jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:["Pangkalan",jsxRuntimeExports.jsx(SafeIcon,{name:getSortIcon("name"),className:"h-3.5 w-3.5"})]})}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-muted/70 select-none",onClick:()=>handleSort("region"),children:jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:["Wilayah",jsxRuntimeExports.jsx(SafeIcon,{name:getSortIcon("region"),className:"h-3.5 w-3.5"})]})}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-muted/70 select-none",onClick:()=>handleSort("transactions"),children:jsxRuntimeExports.jsxs("span",{className:"flex items-center justify-center gap-1",children:["Transaksi",jsxRuntimeExports.jsx(SafeIcon,{name:getSortIcon("transactions"),className:"h-3.5 w-3.5"})]})}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-muted/70 select-none",onClick:()=>handleSort("tabung"),children:jsxRuntimeExports.jsxs("span",{className:"flex items-center justify-center gap-1",children:["Tabung",jsxRuntimeExports.jsx(SafeIcon,{name:getSortIcon("tabung"),className:"h-3.5 w-3.5"})]})}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-muted/70 select-none",onClick:()=>handleSort("revenue"),children:jsxRuntimeExports.jsxs("span",{className:"flex items-center justify-end gap-1",children:["Pendapatan",jsxRuntimeExports.jsx(SafeIcon,{name:getSortIcon("revenue"),className:"h-3.5 w-3.5"})]})}),activeSubTab==="subsidi"&&jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Konsumen"}),activeSubTab==="subsidi"&&jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Aksi"})]})}),jsxRuntimeExports.jsx("tbody",{children:paginatedData.map((item,index)=>{const globalIndex=(pangkalanCurrentPage-1)*pangkalanRowsPerPage+index,orders=activeSubTab==="subsidi"?item.total_consumer_orders:item.total_nonsubsidi_orders,tabung=activeSubTab==="subsidi"?item.total_tabung_to_consumers:item.total_nonsubsidi_tabung,revenue=activeSubTab==="subsidi"?item.total_revenue:item.total_nonsubsidi_revenue;return jsxRuntimeExports.jsxs("tr",{className:"border-b border-border/30 hover:bg-muted/20 transition-colors",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${globalIndex===0?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":globalIndex===1?"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300":globalIndex===2?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"bg-muted text-muted-foreground"}`,children:globalIndex+1})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-sm",children:item.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:item.code})]})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:item.region||"-"}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-center",children:jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:activeSubTab==="subsidi"?"bg-green-50 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-amber-50 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400",children:orders})}),jsxRuntimeExports.jsx("td",{className:`px-4 py-3 text-center font-semibold ${activeSubTab==="subsidi"?"text-teal-600 dark:text-teal-400":"text-orange-600 dark:text-orange-400"}`,children:tabung}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-right font-medium",children:formatCurrency$1(revenue)}),activeSubTab==="subsidi"&&jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-center",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:item.active_consumers}),jsxRuntimeExports.jsx("span",{className:"text-muted-foreground",children:"/"}),jsxRuntimeExports.jsx("span",{className:"text-muted-foreground",children:item.total_registered_consumers})]})}),activeSubTab==="subsidi"&&jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-center",children:jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:()=>handlePangkalanSelect(item.id),className:`h-8 px-3 ${selectedPangkalanId===item.id?"bg-green-50 text-green-700 dark:bg-green-900/30 dark:text-green-400":""}`,children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Eye",className:"h-4 w-4 mr-1"}),"Audit"]})})]},item.id)})})]})}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-muted-foreground",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Store",className:"h-12 w-12 mb-3 opacity-30"}),jsxRuntimeExports.jsx("p",{children:"Tidak ada data pangkalan"}),searchQuery&&jsxRuntimeExports.jsx("p",{className:"text-xs mt-1",children:"Coba ubah filter pencarian"})]}),filteredData.length>pangkalanRowsPerPage&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-border/50",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-muted-foreground",children:["Menampilkan ",(pangkalanCurrentPage-1)*pangkalanRowsPerPage+1," - ",Math.min(pangkalanCurrentPage*pangkalanRowsPerPage,filteredData.length)," dari ",filteredData.length]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>setPangkalanCurrentPage(p=>Math.max(1,p-1)),disabled:pangkalanCurrentPage<=1,className:"h-8 px-2",children:jsxRuntimeExports.jsx(SafeIcon,{name:"ChevronLeft",className:"h-4 w-4"})}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-muted-foreground min-w-[80px] text-center",children:["Hal ",pangkalanCurrentPage," / ",totalPages]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>setPangkalanCurrentPage(p=>Math.min(totalPages,p+1)),disabled:pangkalanCurrentPage>=totalPages,className:"h-8 px-2",children:jsxRuntimeExports.jsx(SafeIcon,{name:"ChevronRight",className:"h-4 w-4"})})]})]})]})]}),activeSubTab==="subsidi"&&jsxRuntimeExports.jsxs(Card,{className:"chart-card-premium rounded-2xl overflow-hidden",children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-3 border-b border-border/50",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 animate-pulse"}),jsxRuntimeExports.jsx(CardTitle,{className:"text-lg font-semibold",children:"Audit Konsumen Subsidi"})]}),jsxRuntimeExports.jsx(CardDescription,{className:"mt-1",children:"Data pembeli gas subsidi 3kg untuk verifikasi"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-muted-foreground",children:"Pilih Pangkalan:"}),jsxRuntimeExports.jsxs(Select,{value:selectedPangkalanId,onValueChange:handlePangkalanSelect,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[200px]",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Pilih pangkalan..."})}),jsxRuntimeExports.jsx(SelectContent,{children:pangkalanData?.data.map(p=>jsxRuntimeExports.jsx(SelectItem,{value:p.id,children:p.name},p.id))})]})]})]})}),jsxRuntimeExports.jsx(CardContent,{className:"p-0",children:selectedPangkalanId?isLoadingConsumers?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-48",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):consumersData&&consumersData.data.length>0?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 p-4 bg-muted/20 border-b border-border/50",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-blue-600",children:consumersData.summary.total_consumers}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Konsumen"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-green-600",children:consumersData.summary.registered_consumers}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Terdaftar"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-orange-600",children:consumersData.summary.total_transactions}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Transaksi"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-purple-600",children:consumersData.summary.total_tabung}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Tabung"})]})]}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"border-b border-border/50 bg-muted/30",children:[jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Nama"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"NIK"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"No. HP"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Tipe"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Pembelian"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Tabung"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Terakhir"})]})}),jsxRuntimeExports.jsx("tbody",{children:consumersData.data.map(consumer=>jsxRuntimeExports.jsxs("tr",{className:"border-b border-border/30 hover:bg-muted/20 transition-colors",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${consumer.consumer_type==="WARUNG"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}`,children:consumer.name.charAt(0).toUpperCase()}),jsxRuntimeExports.jsx("span",{className:"font-medium text-sm",children:consumer.name})]})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-sm font-mono text-muted-foreground",children:consumer.nik||"-"}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:consumer.phone||"-"}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsx(Badge,{variant:"outline",className:consumer.consumer_type==="WARUNG"?"bg-orange-50 text-orange-700 border-orange-200 dark:bg-orange-900/30 dark:text-orange-400":consumer.consumer_type==="RUMAH_TANGGA"?"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-50 text-gray-700 border-gray-200 dark:bg-gray-800 dark:text-gray-300",children:consumer.consumer_type==="WARUNG"?"Warung":consumer.consumer_type==="RUMAH_TANGGA"?"RT":"Walk-in"})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-center",children:jsxRuntimeExports.jsxs(Badge,{variant:"secondary",className:"bg-green-50 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:[consumer.total_purchases,"x"]})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-center font-semibold text-teal-600 dark:text-teal-400",children:consumer.total_tabung}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:formatDate$1(consumer.last_purchase)})]},consumer.id))})]})})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-muted-foreground",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Users",className:"h-12 w-12 mb-3 opacity-30"}),jsxRuntimeExports.jsx("p",{children:"Tidak ada data konsumen subsidi"}),jsxRuntimeExports.jsx("p",{className:"text-xs mt-1",children:"di pangkalan ini dalam periode yang dipilih"})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-muted-foreground",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Search",className:"h-12 w-12 mb-3 opacity-30"}),jsxRuntimeExports.jsx("p",{children:"Pilih pangkalan untuk melihat data konsumen"})]})})]})]})}const formatCurrency=value=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(value),formatDate=dateString=>{const date=new Date(dateString),dateStr=date.toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),timeStr=date.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"});return`${dateStr}, ${timeStr}`},getDateRange=preset=>{const now=new Date;let start,end=new Date(now.getFullYear(),now.getMonth(),now.getDate(),23,59,59);switch(preset){case"today":start=new Date(now.getFullYear(),now.getMonth(),now.getDate(),0,0,0);break;case"7days":start=new Date(now.getTime()-10080*60*1e3);break;case"30days":start=new Date(now.getTime()-720*60*60*1e3);break;case"month":start=new Date(now.getFullYear(),now.getMonth(),1),end=new Date(now.getFullYear(),now.getMonth()+1,0,23,59,59);break;case"year":start=new Date(now.getFullYear(),0,1),end=new Date(now.getFullYear(),11,31,23,59,59);break;default:start=new Date(now.getFullYear(),now.getMonth(),1)}return{start:start.toISOString(),end:end.toISOString()}};function ReportsPage(){const getInitialTab=()=>{if(typeof window<"u"){const hash=window.location.hash.replace("#","");if(["sales","pangkalan","stock"].includes(hash))return hash}return"sales"},[activeTab,setActiveTab]=reactExports.useState(getInitialTab),[datePreset,setDatePreset]=reactExports.useState("month"),[customStart,setCustomStart]=reactExports.useState(""),[customEnd,setCustomEnd]=reactExports.useState(""),[isLoading,setIsLoading]=reactExports.useState(!0),handleTabChange=value=>{setActiveTab(value),typeof window<"u"&&window.history.replaceState(null,"",`#${value}`)},rowsPerPageOptions=[10,25,50],[salesRowsPerPage,setSalesRowsPerPage]=reactExports.useState(10),[salesCurrentPage,setSalesCurrentPage]=reactExports.useState(1),[stockRowsPerPage,setStockRowsPerPage]=reactExports.useState(10),[stockCurrentPage,setStockCurrentPage]=reactExports.useState(1),[salesSortBy,setSalesSortBy]=reactExports.useState("date"),[salesSortOrder,setSalesSortOrder]=reactExports.useState("desc"),[stockSortBy,setStockSortBy]=reactExports.useState("date"),[stockSortOrder,setStockSortOrder]=reactExports.useState("desc"),handleSalesSort=field=>{salesSortBy===field?setSalesSortOrder(prev=>prev==="asc"?"desc":"asc"):(setSalesSortBy(field),setSalesSortOrder("desc")),setSalesCurrentPage(1)},handleStockSort=field=>{stockSortBy===field?setStockSortOrder(prev=>prev==="asc"?"desc":"asc"):(setStockSortBy(field),setStockSortOrder("desc")),setStockCurrentPage(1)},getSortIcon=(currentField,sortBy,sortOrder)=>currentField!==sortBy?"ArrowUpDown":sortOrder==="asc"?"ArrowUp":"ArrowDown",[salesData,setSalesData]=reactExports.useState(null),[stockData,setStockData]=reactExports.useState(null),[totalPangkalan,setTotalPangkalan]=reactExports.useState(0),sortedSalesData=reactExports.useMemo(()=>salesData?.data?[...salesData.data].sort((a,b)=>{const multiplier=salesSortOrder==="asc"?1:-1;switch(salesSortBy){case"date":return multiplier*(new Date(a.date).getTime()-new Date(b.date).getTime());case"code":return multiplier*a.code.localeCompare(b.code);case"pangkalan":return multiplier*a.pangkalan.localeCompare(b.pangkalan);case"total":return multiplier*(a.total-b.total);case"status":return multiplier*a.status.localeCompare(b.status);default:return 0}}):[],[salesData,salesSortBy,salesSortOrder]),sortedStockData=reactExports.useMemo(()=>stockData?.data?[...stockData.data].sort((a,b)=>{const multiplier=stockSortOrder==="asc"?1:-1;switch(stockSortBy){case"date":return multiplier*(new Date(a.date).getTime()-new Date(b.date).getTime());case"product":return multiplier*a.product.localeCompare(b.product);case"type":return multiplier*a.type.localeCompare(b.type);case"qty":return multiplier*(a.qty-b.qty);default:return 0}}):[],[stockData,stockSortBy,stockSortOrder]),[dailySalesTarget,setDailySalesTarget]=reactExports.useState(35e6),[isEditingTarget,setIsEditingTarget]=reactExports.useState(!1),[tempTarget,setTempTarget]=reactExports.useState("");reactExports.useEffect(()=>{const savedTarget=localStorage.getItem("dailySalesTarget");savedTarget&&setDailySalesTarget(Number(savedTarget))},[]);const handleSaveTarget=()=>{const newTarget=Number(tempTarget.replace(/\D/g,""));newTarget>0?(setDailySalesTarget(newTarget),localStorage.setItem("dailySalesTarget",String(newTarget)),setIsEditingTarget(!1),toast.success("Target penjualan berhasil disimpan!")):toast.error("Masukkan nilai target yang valid")},fetchReports=async()=>{setIsLoading(!0);try{const range=datePreset==="custom"&&customStart&&customEnd?{start:new Date(customStart).toISOString(),end:new Date(customEnd).toISOString()}:getDateRange(datePreset),[sales,stock,pangkalan]=await Promise.all([reportsApi.getSalesReport(range.start,range.end),reportsApi.getStockMovementReport(range.start,range.end),reportsApi.getPangkalanReport(range.start,range.end)]);setSalesData(sales),setStockData(stock),pangkalan?.summary?.total_pangkalan&&setTotalPangkalan(pangkalan.summary.total_pangkalan)}catch(error){toast.error(error.message||"Gagal memuat laporan")}finally{setIsLoading(!1)}};reactExports.useEffect(()=>{fetchReports()},[datePreset]);const handlePresetChange=value=>{setDatePreset(value)},handleCustomDateApply=()=>{customStart&&customEnd&&fetchReports()},statusLabels={DRAFT:"DRAFT",MENUNGGU_PEMBAYARAN:"MENUNGGU PEMBAYARAN",DIPROSES:"DIPROSES",DIKIRIM:"DIKIRIM",SELESAI:"SELESAI",DIBATALKAN:"BATAL"},getStatusColor=status=>{switch(status){case"SELESAI":return"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300";case"DIKIRIM":return"bg-blue-100 text-blue-800 dark:bg-blue-900/40 dark:text-blue-300";case"DIPROSES":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300";case"MENUNGGU_PEMBAYARAN":return"bg-orange-100 text-orange-800 dark:bg-orange-900/40 dark:text-orange-300";case"DIBATALKAN":return"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}},PIE_COLORS=["#22c55e","#f59e0b","#3b82f6","#ef4444","#8b5cf6","#06b6d4"],salesChartData=reactExports.useMemo(()=>{if(!salesData?.data)return[];const groupedByDate={};return salesData.data.forEach(item=>{const dateKey=new Date(item.date).toLocaleDateString("id-ID",{day:"numeric",month:"short"});groupedByDate[dateKey]||(groupedByDate[dateKey]={date:dateKey,total:0,count:0,target:dailySalesTarget}),groupedByDate[dateKey].total+=item.total,groupedByDate[dateKey].count+=1}),Object.values(groupedByDate).reverse()},[salesData,dailySalesTarget]),growthPercentage=reactExports.useMemo(()=>{if(!salesData?.data||salesData.data.length===0)return 0;const totalRevenue=salesData.summary.total_revenue||0,daysInPeriod=salesChartData.length||1;return(totalRevenue/daysInPeriod-dailySalesTarget)/dailySalesTarget*100},[salesData,salesChartData,dailySalesTarget]),salesByStatusData=reactExports.useMemo(()=>salesData?.summary.status_breakdown?Object.entries(salesData.summary.status_breakdown).map(([status,count])=>({name:statusLabels[status]||status,value:count})):[],[salesData]),stockChartData=reactExports.useMemo(()=>{if(!stockData?.data)return[];const groupedByDate={};return stockData.data.forEach(item=>{const dateKey=new Date(item.date).toLocaleDateString("id-ID",{day:"numeric",month:"short"});groupedByDate[dateKey]||(groupedByDate[dateKey]={date:dateKey,masuk:0,keluar:0}),item.type==="MASUK"?groupedByDate[dateKey].masuk+=item.qty:groupedByDate[dateKey].keluar+=item.qty}),Object.values(groupedByDate).reverse()},[stockData]),stockByProductData=reactExports.useMemo(()=>{if(!stockData?.data)return[];const groupedByProduct={};return stockData.data.forEach(item=>{const product=item.product;groupedByProduct[product]||(groupedByProduct[product]={product,masuk:0,keluar:0}),item.type==="MASUK"?groupedByProduct[product].masuk+=item.qty:groupedByProduct[product].keluar+=item.qty}),Object.values(groupedByProduct)},[stockData]),getPeriodLabel=()=>salesData?.period?`${formatDateExport(salesData.period.start)} - ${formatDateExport(salesData.period.end)}`:"Bulan Ini",handleExportPDF=async()=>{try{const title=`Laporan ${{sales:"Penjualan",payments:"Pembayaran",stock:"Stok"}[activeTab]}`,period=getPeriodLabel(),filename=`laporan-${activeTab}-${new Date().toISOString().split("T")[0]}`;if(activeTab==="sales"&&salesData){const columns=[{header:"Tanggal",key:"date",width:15},{header:"Kode",key:"code",width:12},{header:"Pangkalan",key:"pangkalan",width:25},{header:"Pendapatan",key:"total",width:18,align:"right"},{header:"Status",key:"status",width:15}],data=salesData.data.map(item=>({...item,date:formatDateExport(item.date),total:formatCurrencyExport(item.total),status:statusLabels[item.status]||item.status})),summary=[{label:"Total Pesanan",value:salesData.summary.total_orders},{label:"Total Pendapatan",value:formatCurrencyExport(salesData.summary.total_revenue)},{label:"Rata-rata Pesanan",value:formatCurrencyExport(salesData.summary.average_order)},{label:"Pesanan Selesai",value:salesData.summary.status_breakdown?.SELESAI||0}],footerRows=[createFooterRow("TOTAL",{code:"",pangkalan:"",total:formatCurrencyExport(salesData.summary.total_revenue),status:""},"date")];await exportToPDF(data,columns,summary,{title,period,filename},footerRows)}else if(activeTab==="stock"&&stockData){const columns=[{header:"Tanggal",key:"date",width:15},{header:"Produk",key:"product",width:20},{header:"Tipe",key:"type",width:10},{header:"Qty",key:"qty",width:10,align:"right"},{header:"Keterangan",key:"note",width:25},{header:"Dicatat Oleh",key:"recorded_by",width:15}],data=stockData.data.map(item=>({...item,date:formatDateExport(item.date),note:item.note||"-"})),summary=[{label:"Total Masuk",value:`+${stockData.summary.total_in}`},{label:"Total Keluar",value:`-${stockData.summary.total_out}`},{label:"Perubahan Bersih",value:stockData.summary.net_change},{label:"Saldo Akhir",value:stockData.summary.current_balance}],footerRows=[createFooterRow("TOTAL",{product:`Masuk: +${stockData.summary.total_in}`,type:`Keluar: -${stockData.summary.total_out}`,qty:stockData.summary.net_change,note:`Saldo Akhir: ${stockData.summary.current_balance}`,recorded_by:""},"date")];await exportToPDF(data,columns,summary,{title,period,filename},footerRows)}toast.success("PDF berhasil diexport!")}catch{toast.error("Gagal export PDF")}},handleExportExcel=()=>{try{const title=`Laporan ${{sales:"Penjualan",payments:"Pembayaran",stock:"Stok"}[activeTab]}`,period=getPeriodLabel(),filename=`laporan-${activeTab}-${new Date().toISOString().split("T")[0]}`;if(activeTab==="sales"&&salesData){const columns=[{header:"Tanggal",key:"date",width:12},{header:"Kode",key:"code",width:15},{header:"Pangkalan",key:"pangkalan",width:25},{header:"Subtotal",key:"subtotal",width:15},{header:"Pajak",key:"tax",width:12},{header:"Pendapatan",key:"total",width:15},{header:"Status",key:"status",width:15}],data=salesData.data.map(item=>({...item,date:formatDateExport(item.date),status:statusLabels[item.status]||item.status})),summary=[{label:"Total Pesanan",value:salesData.summary.total_orders},{label:"Total Pendapatan",value:salesData.summary.total_revenue},{label:"Rata-rata Pesanan",value:salesData.summary.average_order}],footerRows=[createFooterRow("TOTAL",{code:"",pangkalan:"",subtotal:salesData.summary.total_revenue,tax:"",total:salesData.summary.total_revenue,status:""},"date")];exportToExcel(data,columns,summary,{title,period,filename},footerRows)}else if(activeTab==="stock"&&stockData){const columns=[{header:"Tanggal",key:"date",width:12},{header:"Produk",key:"product",width:20},{header:"Tipe",key:"type",width:10},{header:"Qty",key:"qty",width:10},{header:"Keterangan",key:"note",width:25},{header:"Dicatat Oleh",key:"recorded_by",width:15}],data=stockData.data.map(item=>({...item,date:formatDateExport(item.date)})),summary=[{label:"Total Masuk",value:stockData.summary.total_in},{label:"Total Keluar",value:stockData.summary.total_out},{label:"Perubahan Bersih",value:stockData.summary.net_change},{label:"Saldo Akhir",value:stockData.summary.current_balance}],footerRows=[createFooterRow("TOTAL",{product:`Masuk: +${stockData.summary.total_in}`,type:`Keluar: -${stockData.summary.total_out}`,qty:stockData.summary.net_change,note:`Saldo Akhir: ${stockData.summary.current_balance}`,recorded_by:""},"date")];exportToExcel(data,columns,summary,{title,period,filename},footerRows)}toast.success("Excel berhasil diexport!")}catch{toast.error("Gagal export Excel")}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"glass-card rounded-2xl p-5",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-muted/50",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Calendar",className:"h-4 w-4 text-muted-foreground"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-foreground",children:"Periode"})]}),jsxRuntimeExports.jsxs(Select,{value:datePreset,onValueChange:handlePresetChange,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[180px] bg-background border-border/50 hover:border-primary/50 transition-colors",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Pilih periode"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"today",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Clock",className:"h-3.5 w-3.5 text-muted-foreground"}),"Hari Ini"]})}),jsxRuntimeExports.jsx(SelectItem,{value:"7days",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Calendar",className:"h-3.5 w-3.5 text-muted-foreground"}),"7 Hari Terakhir"]})}),jsxRuntimeExports.jsx(SelectItem,{value:"30days",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Calendar",className:"h-3.5 w-3.5 text-muted-foreground"}),"30 Hari Terakhir"]})}),jsxRuntimeExports.jsx(SelectItem,{value:"month",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"CalendarDays",className:"h-3.5 w-3.5 text-muted-foreground"}),"Bulan Ini"]})}),jsxRuntimeExports.jsx(SelectItem,{value:"year",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"CalendarRange",className:"h-3.5 w-3.5 text-muted-foreground"}),"Tahun Ini"]})}),jsxRuntimeExports.jsx(SelectItem,{value:"custom",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Settings2",className:"h-3.5 w-3.5 text-muted-foreground"}),"Custom"]})})]})]}),datePreset==="custom"&&jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center bg-muted/30 p-2 rounded-lg border border-border/50",children:[jsxRuntimeExports.jsx(Input,{type:"date",value:customStart,onChange:e=>setCustomStart(e.target.value),className:"w-[140px] h-9 bg-background"}),jsxRuntimeExports.jsx(SafeIcon,{name:"ArrowRight",className:"h-4 w-4 text-muted-foreground"}),jsxRuntimeExports.jsx(Input,{type:"date",value:customEnd,onChange:e=>setCustomEnd(e.target.value),className:"w-[140px] h-9 bg-background"}),jsxRuntimeExports.jsxs(Button,{size:"sm",onClick:handleCustomDateApply,className:"h-9",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Check",className:"h-4 w-4 mr-1"}),"Terapkan"]})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:fetchReports,disabled:isLoading,className:"h-9 w-9 hover:bg-primary/10 hover:text-primary",children:jsxRuntimeExports.jsx(SafeIcon,{name:"RefreshCw",className:`h-4 w-4 ${isLoading?"animate-spin":""}`})})]}),activeTab!=="pangkalan"&&jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",disabled:isLoading,onClick:handleExportPDF,className:"border-red-300 text-red-600 hover:bg-gradient-to-r hover:from-red-50 hover:to-red-100 hover:text-red-700 hover:border-red-400 transition-all shadow-sm hover:shadow-md",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"FileText",className:"h-4 w-4 mr-2"}),"Export PDF"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",disabled:isLoading,onClick:handleExportExcel,className:"border-green-300 text-green-600 hover:bg-gradient-to-r hover:from-green-50 hover:to-green-100 hover:text-green-700 hover:border-green-400 transition-all shadow-sm hover:shadow-md",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"FileSpreadsheet",className:"h-4 w-4 mr-2"}),"Export Excel"]})]})]})}),jsxRuntimeExports.jsxs(Tabs,{value:activeTab,onValueChange:handleTabChange,className:"space-y-4",children:[jsxRuntimeExports.jsxs(TabsList,{className:"inline-flex h-auto gap-1.5 rounded-2xl glass-card p-2 shadow-lg",children:[jsxRuntimeExports.jsxs(TabsTrigger,{value:"sales",className:"relative flex items-center gap-2 rounded-xl px-5 py-3 text-sm font-semibold transition-all duration-300 text-muted-foreground data-[state=active]:bg-gradient-to-r data-[state=active]:from-primary data-[state=active]:to-primary/80 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-primary/10 hover:text-primary dark:hover:bg-primary/20",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"ShoppingCart",className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Penjualan"}),salesData&&salesData.summary.total_orders>0&&jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:`ml-1 h-5 min-w-5 rounded-full px-1.5 text-xs font-medium ${activeTab==="sales"?"bg-white/20 text-white":"bg-primary/10 text-primary dark:bg-primary/20"}`,children:salesData.summary.total_orders})]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"pangkalan",className:"relative flex items-center gap-2 rounded-xl px-5 py-3 text-sm font-semibold transition-all duration-300 text-muted-foreground data-[state=active]:bg-gradient-to-r data-[state=active]:from-accent data-[state=active]:to-accent/80 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-accent/10 hover:text-accent dark:hover:bg-accent/20",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Store",className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Pangkalan"}),totalPangkalan>0&&jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:`ml-1 h-5 min-w-5 rounded-full px-1.5 text-xs font-medium ${activeTab==="pangkalan"?"bg-white/20 text-white":"bg-accent/10 text-accent dark:bg-accent/20"}`,children:totalPangkalan})]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"stock",className:"relative flex items-center gap-2 rounded-xl px-5 py-3 text-sm font-semibold transition-all duration-300 text-muted-foreground data-[state=active]:bg-gradient-to-r data-[state=active]:from-amber-500 data-[state=active]:to-orange-500 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-amber-500/10 hover:text-amber-600 dark:hover:bg-amber-500/20 dark:hover:text-amber-400",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Package",className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Stok"}),stockData&&stockData.summary.current_balance!==void 0&&jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:`ml-1 h-5 min-w-5 rounded-full px-1.5 text-xs font-medium ${activeTab==="stock"?"bg-white/20 text-white":"bg-amber-500/10 text-amber-600 dark:bg-amber-500/20 dark:text-amber-400"}`,children:stockData.summary.current_balance})]})]}),jsxRuntimeExports.jsxs(TabsContent,{value:"sales",className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden animate-slideInBlur stagger-1 card-hover-glow",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Total Pesanan"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-primary mt-2",children:isLoading?"...":jsxRuntimeExports.jsx(AnimatedNumber,{value:salesData?.summary.total_orders||0,delay:100})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pesanan dalam periode"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary/20 to-emerald-200/50 dark:from-primary/30 dark:to-emerald-800/30 shadow-lg",children:jsxRuntimeExports.jsx(SafeIcon,{name:"ShoppingCart",className:"h-5 w-5 text-primary"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-primary/50 via-primary to-primary/50"})]})}),jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden animate-slideInBlur stagger-2 card-hover-glow",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Total Pendapatan"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400 mt-2",children:isLoading?"...":jsxRuntimeExports.jsx(AnimatedNumber,{value:salesData?.summary.total_revenue||0,delay:200,isCurrency:!0})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Revenue keseluruhan"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-emerald-100 to-green-200 dark:from-emerald-900/30 dark:to-green-800/30 shadow-lg",children:jsxRuntimeExports.jsx(SafeIcon,{name:"TrendingUp",className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-emerald-300 via-emerald-500 to-emerald-300"})]})}),jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden animate-slideInBlur stagger-3 card-hover-glow",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Rata-rata Pesanan"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-teal-600 dark:text-teal-400 mt-2",children:isLoading?"...":jsxRuntimeExports.jsx(AnimatedNumber,{value:salesData?.summary.average_order||0,delay:300,isCurrency:!0})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Per transaksi"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-teal-100 to-teal-200 dark:from-teal-900/30 dark:to-teal-800/30 shadow-lg",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Calculator",className:"h-5 w-5 text-teal-600 dark:text-teal-400"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-teal-300 via-teal-500 to-teal-300"})]})}),jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden animate-slideInBlur stagger-4 card-hover-glow",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Pertumbuhan"}),jsxRuntimeExports.jsx("p",{className:`text-3xl font-bold mt-2 ${growthPercentage>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:isLoading?"...":`${growthPercentage>=0?"+":""}${growthPercentage.toFixed(1)}%`}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Vs target harian"})]}),jsxRuntimeExports.jsx("div",{className:`p-3 rounded-xl shadow-lg bg-gradient-to-br ${growthPercentage>=0?"from-green-100 to-green-200 dark:from-green-900/30 dark:to-green-800/30":"from-red-100 to-red-200 dark:from-red-900/30 dark:to-red-800/30"}`,children:jsxRuntimeExports.jsx(SafeIcon,{name:growthPercentage>=0?"TrendingUp":"TrendingDown",className:`h-5 w-5 ${growthPercentage>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`})})]}),jsxRuntimeExports.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r ${growthPercentage>=0?"from-green-300 via-green-500 to-green-300":"from-red-300 via-red-500 to-red-300"}`})]})})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"chart-card-premium rounded-2xl overflow-hidden animate-fadeInUp",style:{animationDelay:"0.4s"},children:[jsxRuntimeExports.jsx("div",{className:"p-5 border-b border-border/50",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"Tren Penjualan"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Total pendapatan per hari dalam periode ini"})]}),isEditingTarget?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Input,{type:"text",value:tempTarget,onChange:e=>setTempTarget(e.target.value.replace(/\D/g,"")),onKeyDown:e=>{e.key==="Enter"?handleSaveTarget():e.key==="Escape"&&setIsEditingTarget(!1)},className:"w-32 h-8 text-sm",placeholder:"Rp",autoFocus:!0}),jsxRuntimeExports.jsx(Button,{size:"sm",className:"h-8 px-2",onClick:handleSaveTarget,children:jsxRuntimeExports.jsx(SafeIcon,{name:"Check",className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"h-8 px-2",onClick:()=>setIsEditingTarget(!1),children:jsxRuntimeExports.jsx(SafeIcon,{name:"X",className:"h-4 w-4"})})]}):jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",className:"text-xs gap-1 border-primary/30 hover:border-primary/50 hover:bg-primary/5",onClick:()=>{setTempTarget(String(dailySalesTarget)),setIsEditingTarget(!0)},children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Settings2",className:"h-3 w-3"}),"Target: ",formatCurrency(dailySalesTarget)]})]})}),jsxRuntimeExports.jsx("div",{className:"p-5",children:isLoading?jsxRuntimeExports.jsx("div",{className:"h-[300px] flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"h-8 w-8 animate-spin text-muted-foreground"})}):salesChartData.length===0?jsxRuntimeExports.jsxs("div",{className:"h-[300px] flex flex-col items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"LineChart",className:"h-12 w-12 text-muted-foreground/40"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Tidak ada data trend"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground/70",children:"Coba ubah filter periode"})]}):jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:300,children:jsxRuntimeExports.jsxs(LineChart,{data:salesChartData,children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("linearGradient",{id:"salesGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"5%",stopColor:"#22c55e",stopOpacity:.3}),jsxRuntimeExports.jsx("stop",{offset:"95%",stopColor:"#22c55e",stopOpacity:0})]}),jsxRuntimeExports.jsxs("filter",{id:"salesGlow",height:"300%",children:[jsxRuntimeExports.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),jsxRuntimeExports.jsxs("feMerge",{children:[jsxRuntimeExports.jsx("feMergeNode",{in:"coloredBlur"}),jsxRuntimeExports.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb",strokeOpacity:.5}),jsxRuntimeExports.jsx(XAxis,{dataKey:"date",tick:{fontSize:12,fill:"#6b7280"},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"}}),jsxRuntimeExports.jsx(YAxis,{tickFormatter:value=>`${(value/1e6).toFixed(1)}Jt`,tick:{fontSize:12,fill:"#6b7280"},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"}}),jsxRuntimeExports.jsx(Tooltip,{formatter:(value,name)=>[formatCurrency(value),name],labelFormatter:label=>`Tanggal: ${label}`,contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"12px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)",padding:"12px 16px"},labelStyle:{fontWeight:600,marginBottom:"4px"}}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{paddingTop:"20px"},iconType:"circle"}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"total",name:"Penjualan Aktual",stroke:"#22c55e",strokeWidth:3,dot:{fill:"#22c55e",strokeWidth:2,r:4,stroke:"#fff"},activeDot:{r:6,fill:"#22c55e",stroke:"#fff",strokeWidth:3,filter:"url(#salesGlow)"}}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"target",name:"Target Penjualan",stroke:"#f59e0b",strokeWidth:2,strokeDasharray:"8 4",dot:{fill:"#f59e0b",strokeWidth:2,r:3,stroke:"#fff"},activeDot:{r:5,fill:"#f59e0b",stroke:"#fff",strokeWidth:2}})]})})})]}),jsxRuntimeExports.jsxs("div",{className:"chart-card-premium rounded-2xl overflow-hidden animate-fadeInUp",style:{animationDelay:"0.5s"},children:[jsxRuntimeExports.jsxs("div",{className:"p-5 border-b border-border/50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 animate-pulse"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"Status Pesanan"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Distribusi pesanan berdasarkan status"})]}),jsxRuntimeExports.jsx("div",{className:"p-5",children:isLoading?jsxRuntimeExports.jsx("div",{className:"h-[300px] flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"h-8 w-8 animate-spin text-muted-foreground"})}):salesByStatusData.length===0?jsxRuntimeExports.jsxs("div",{className:"h-[300px] flex flex-col items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"PieChart",className:"h-12 w-12 text-muted-foreground/40"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Tidak ada data status"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground/70",children:"Coba ubah filter periode"})]}):jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:300,children:jsxRuntimeExports.jsxs(PieChart,{children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("filter",{id:"pieShadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:jsxRuntimeExports.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"3",floodOpacity:"0.2"})})}),jsxRuntimeExports.jsx(Pie,{data:salesByStatusData,cx:"50%",cy:"50%",innerRadius:65,outerRadius:105,paddingAngle:3,dataKey:"value",label:({name,percent})=>`${name} (${(percent*100).toFixed(0)}%)`,labelLine:{stroke:"#94a3b8",strokeWidth:1},style:{filter:"url(#pieShadow)"},children:salesByStatusData.map((_,index)=>jsxRuntimeExports.jsx(Cell,{fill:PIE_COLORS[index%PIE_COLORS.length],stroke:"#fff",strokeWidth:2},`cell-${index}`))}),jsxRuntimeExports.jsx(Tooltip,{formatter:value=>[value,"Pesanan"],contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"12px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)",padding:"12px 16px"}})]})})})]})]}),jsxRuntimeExports.jsxs(Card,{className:"border-border/50",children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"List",className:"h-5 w-5 text-muted-foreground"}),jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:"Detail Penjualan"})]}),salesData&&salesData.data.length>0&&jsxRuntimeExports.jsxs(Badge,{variant:"secondary",className:"bg-muted px-2 py-1",children:[salesData.data.length," transaksi"]})]})}),jsxRuntimeExports.jsxs(CardContent,{className:"p-0",children:[jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-muted/50 border-t border-border",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground cursor-pointer hover:bg-muted/70 select-none",onClick:()=>handleSalesSort("date"),children:jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:["Tanggal",jsxRuntimeExports.jsx(SafeIcon,{name:getSortIcon("date",salesSortBy,salesSortOrder),className:"h-3.5 w-3.5"})]})}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground cursor-pointer hover:bg-muted/70 select-none",onClick:()=>handleSalesSort("code"),children:jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:["Kode",jsxRuntimeExports.jsx(SafeIcon,{name:getSortIcon("code",salesSortBy,salesSortOrder),className:"h-3.5 w-3.5"})]})}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground cursor-pointer hover:bg-muted/70 select-none",onClick:()=>handleSalesSort("pangkalan"),children:jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:["Pangkalan",jsxRuntimeExports.jsx(SafeIcon,{name:getSortIcon("pangkalan",salesSortBy,salesSortOrder),className:"h-3.5 w-3.5"})]})}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-muted-foreground cursor-pointer hover:bg-muted/70 select-none",onClick:()=>handleSalesSort("total"),children:jsxRuntimeExports.jsxs("span",{className:"flex items-center justify-end gap-1",children:["Pendapatan",jsxRuntimeExports.jsx(SafeIcon,{name:getSortIcon("total",salesSortBy,salesSortOrder),className:"h-3.5 w-3.5"})]})}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-muted-foreground cursor-pointer hover:bg-muted/70 select-none",onClick:()=>handleSalesSort("status"),children:jsxRuntimeExports.jsxs("span",{className:"flex items-center justify-center gap-1",children:["Status",jsxRuntimeExports.jsx(SafeIcon,{name:getSortIcon("status",salesSortBy,salesSortOrder),className:"h-3.5 w-3.5"})]})})]})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-border",children:isLoading?jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:5,className:"px-4 py-8 text-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"h-6 w-6 animate-spin mx-auto text-muted-foreground"})})}):sortedSalesData.length===0?jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:5,className:"px-4 py-12 text-center",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"ShoppingCart",className:"h-10 w-10 text-muted-foreground/50"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Tidak ada data penjualan"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground/70",children:"Coba ubah filter periode"})]})})}):sortedSalesData.slice((salesCurrentPage-1)*salesRowsPerPage,salesCurrentPage*salesRowsPerPage).map(item=>jsxRuntimeExports.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-sm",children:formatDate(item.date)}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-sm font-medium font-mono text-green-600",children:item.code}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-sm",children:item.pangkalan}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium",children:formatCurrency(item.total)}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-center",children:jsxRuntimeExports.jsx(Badge,{className:`${getStatusColor(item.status)} hover:bg-inherit`,children:statusLabels[item.status]||item.status})})]},item.id))})]})}),salesData&&salesData.data.length>0&&jsxRuntimeExports.jsxs("div",{className:"p-3 border-t border-border flex flex-col sm:flex-row items-center justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[jsxRuntimeExports.jsx("span",{children:"Tampilkan"}),jsxRuntimeExports.jsxs(Select,{value:String(salesRowsPerPage),onValueChange:v=>{setSalesRowsPerPage(Number(v)),setSalesCurrentPage(1)},children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[70px] h-8",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsx(SelectContent,{children:rowsPerPageOptions.map(opt=>jsxRuntimeExports.jsx(SelectItem,{value:String(opt),children:opt},opt))})]}),jsxRuntimeExports.jsxs("span",{children:["dari ",salesData.data.length," data"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>setSalesCurrentPage(p=>Math.max(1,p-1)),disabled:salesCurrentPage===1,className:"h-8 px-2",children:jsxRuntimeExports.jsx(SafeIcon,{name:"ChevronLeft",className:"h-4 w-4"})}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-muted-foreground min-w-[80px] text-center",children:["Hal ",salesCurrentPage," / ",Math.ceil(salesData.data.length/salesRowsPerPage)]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>setSalesCurrentPage(p=>Math.min(Math.ceil(salesData.data.length/salesRowsPerPage),p+1)),disabled:salesCurrentPage>=Math.ceil(salesData.data.length/salesRowsPerPage),className:"h-8 px-2",children:jsxRuntimeExports.jsx(SafeIcon,{name:"ChevronRight",className:"h-4 w-4"})})]})]})]})]})]}),jsxRuntimeExports.jsx(TabsContent,{value:"pangkalan",className:"space-y-4",children:jsxRuntimeExports.jsx(PangkalanTabContent,{dateRange:datePreset==="custom"&&customStart&&customEnd?{start:new Date(customStart).toISOString(),end:new Date(customEnd).toISOString()}:getDateRange(datePreset),isLoading,onSummaryLoad:setTotalPangkalan})}),jsxRuntimeExports.jsxs(TabsContent,{value:"stock",className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-5",children:[jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden animate-slideInBlur stagger-1 card-hover-glow",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Saldo Akhir"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-primary mt-2",children:isLoading?"...":jsxRuntimeExports.jsx(AnimatedNumber,{value:stockData?.summary.current_balance||0,delay:100})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Stok saat ini"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary/20 to-emerald-200/50 dark:from-primary/30 dark:to-emerald-800/30 shadow-lg",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Package",className:"h-5 w-5 text-primary"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-primary/50 via-primary to-primary/50"})]})}),jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden animate-slideInBlur stagger-2 card-hover-glow",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Total Masuk"}),jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400 mt-2",children:["+",isLoading?"...":jsxRuntimeExports.jsx(AnimatedNumber,{value:stockData?.summary.total_in||0,delay:200})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Stok masuk"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-emerald-100 to-green-200 dark:from-emerald-900/30 dark:to-green-800/30 shadow-lg",children:jsxRuntimeExports.jsx(SafeIcon,{name:"ArrowDownCircle",className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-emerald-300 via-emerald-500 to-emerald-300"})]})}),jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden animate-slideInBlur stagger-3 card-hover-glow",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Total Keluar"}),jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold text-red-600 dark:text-red-400 mt-2",children:["-",isLoading?"...":jsxRuntimeExports.jsx(AnimatedNumber,{value:stockData?.summary.total_out||0,delay:300})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Stok keluar"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-red-100 to-red-200 dark:from-red-900/30 dark:to-red-800/30 shadow-lg",children:jsxRuntimeExports.jsx(SafeIcon,{name:"ArrowUpCircle",className:"h-5 w-5 text-red-600 dark:text-red-400"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-red-300 via-red-500 to-red-300"})]})}),jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden animate-slideInBlur stagger-4 card-hover-glow",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Perubahan Bersih"}),jsxRuntimeExports.jsx("p",{className:`text-3xl font-bold mt-2 ${(stockData?.summary.net_change||0)>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:isLoading?"...":jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[(stockData?.summary.net_change||0)>=0?"+":"",jsxRuntimeExports.jsx(AnimatedNumber,{value:stockData?.summary.net_change||0,delay:400})]})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Selisih masuk/keluar"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-teal-100 to-teal-200 dark:from-teal-900/30 dark:to-teal-800/30 shadow-lg",children:jsxRuntimeExports.jsx(SafeIcon,{name:"TrendingUp",className:"h-5 w-5 text-teal-600 dark:text-teal-400"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-teal-300 via-teal-500 to-teal-300"})]})}),jsxRuntimeExports.jsx(Tilt3DCard,{className:"glass-card rounded-2xl overflow-hidden animate-slideInBlur stagger-5 card-hover-glow",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Jumlah Transaksi"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400 mt-2",children:isLoading?"...":jsxRuntimeExports.jsx(AnimatedNumber,{value:stockData?.summary.movement_count||0,delay:500})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pergerakan stok"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-amber-100 to-orange-200 dark:from-amber-900/30 dark:to-orange-800/30 shadow-lg",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Activity",className:"h-5 w-5 text-amber-600 dark:text-amber-400"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-amber-300 via-amber-500 to-amber-300"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"chart-card-premium rounded-2xl overflow-hidden animate-fadeInUp",style:{animationDelay:"0.5s"},children:[jsxRuntimeExports.jsxs("div",{className:"p-5 border-b border-border/50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"Grafik Pergerakan Stok"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Stok masuk dan keluar per hari dalam periode ini"})]}),jsxRuntimeExports.jsx("div",{className:"p-5",children:isLoading?jsxRuntimeExports.jsx("div",{className:"h-[300px] flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"h-8 w-8 animate-spin text-muted-foreground"})}):stockChartData.length===0?jsxRuntimeExports.jsxs("div",{className:"h-[300px] flex flex-col items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"LineChart",className:"h-12 w-12 text-muted-foreground/40"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Tidak ada data pergerakan"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground/70",children:"Coba ubah filter periode"})]}):jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:300,children:jsxRuntimeExports.jsxs(LineChart,{data:stockChartData,children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("filter",{id:"stockGlowGreen",height:"300%",children:[jsxRuntimeExports.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),jsxRuntimeExports.jsxs("feMerge",{children:[jsxRuntimeExports.jsx("feMergeNode",{in:"coloredBlur"}),jsxRuntimeExports.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),jsxRuntimeExports.jsxs("filter",{id:"stockGlowOrange",height:"300%",children:[jsxRuntimeExports.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),jsxRuntimeExports.jsxs("feMerge",{children:[jsxRuntimeExports.jsx("feMergeNode",{in:"coloredBlur"}),jsxRuntimeExports.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb",strokeOpacity:.5}),jsxRuntimeExports.jsx(XAxis,{dataKey:"date",tick:{fontSize:12,fill:"#6b7280"},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"}}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:12,fill:"#6b7280"},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"12px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)",padding:"12px 16px"}}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{paddingTop:"20px"},iconType:"circle"}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"masuk",name:"Masuk",stroke:"#22c55e",strokeWidth:3,dot:{fill:"#22c55e",strokeWidth:2,r:4,stroke:"#fff"},activeDot:{r:6,fill:"#22c55e",stroke:"#fff",strokeWidth:3,filter:"url(#stockGlowGreen)"}}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"keluar",name:"Keluar",stroke:"#f59e0b",strokeWidth:3,dot:{fill:"#f59e0b",strokeWidth:2,r:4,stroke:"#fff"},activeDot:{r:6,fill:"#f59e0b",stroke:"#fff",strokeWidth:3,filter:"url(#stockGlowOrange)"}})]})})})]}),jsxRuntimeExports.jsxs("div",{className:"chart-card-premium rounded-2xl overflow-hidden animate-fadeInUp",style:{animationDelay:"0.6s"},children:[jsxRuntimeExports.jsxs("div",{className:"p-5 border-b border-border/50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-500 animate-pulse"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"Pemakaian Berdasarkan Jenis"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Distribusi stok masuk/keluar per produk"})]}),jsxRuntimeExports.jsx("div",{className:"p-5",children:isLoading?jsxRuntimeExports.jsx("div",{className:"h-[300px] flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"h-8 w-8 animate-spin text-muted-foreground"})}):stockByProductData.length===0?jsxRuntimeExports.jsxs("div",{className:"h-[300px] flex flex-col items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"BarChart",className:"h-12 w-12 text-muted-foreground/40"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Tidak ada data produk"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground/70",children:"Coba ubah filter periode"})]}):jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:300,children:jsxRuntimeExports.jsxs(BarChart,{data:stockByProductData,layout:"vertical",children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("linearGradient",{id:"stockBarGreen",x1:"0",y1:"0",x2:"1",y2:"0",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#22c55e",stopOpacity:.8}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#16a34a",stopOpacity:1})]}),jsxRuntimeExports.jsxs("linearGradient",{id:"stockBarOrange",x1:"0",y1:"0",x2:"1",y2:"0",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#f59e0b",stopOpacity:.8}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#d97706",stopOpacity:1})]})]}),jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb",strokeOpacity:.5}),jsxRuntimeExports.jsx(XAxis,{type:"number",tick:{fontSize:12,fill:"#6b7280"},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"}}),jsxRuntimeExports.jsx(YAxis,{dataKey:"product",type:"category",tick:{fontSize:11,fill:"#6b7280"},width:100,axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"12px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)",padding:"12px 16px"}}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{paddingTop:"20px"},iconType:"circle"}),jsxRuntimeExports.jsx(Bar,{dataKey:"masuk",name:"Masuk",fill:"url(#stockBarGreen)",radius:[0,4,4,0]}),jsxRuntimeExports.jsx(Bar,{dataKey:"keluar",name:"Keluar",fill:"url(#stockBarOrange)",radius:[0,4,4,0]})]})})})]})]}),jsxRuntimeExports.jsxs(Card,{className:"border-border/50",children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"PackageOpen",className:"h-5 w-5 text-muted-foreground"}),jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:"Riwayat Pergerakan Stok"})]}),stockData&&stockData.data.length>0&&jsxRuntimeExports.jsxs(Badge,{variant:"secondary",className:"bg-muted px-2 py-1",children:[stockData.data.length," pergerakan"]})]})}),jsxRuntimeExports.jsxs(CardContent,{className:"p-0",children:[jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-muted/50 border-t border-border",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground cursor-pointer hover:bg-muted/70 select-none",onClick:()=>handleStockSort("date"),children:jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:["Tanggal",jsxRuntimeExports.jsx(SafeIcon,{name:getSortIcon("date",stockSortBy,stockSortOrder),className:"h-3.5 w-3.5"})]})}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground cursor-pointer hover:bg-muted/70 select-none",onClick:()=>handleStockSort("product"),children:jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:["Produk",jsxRuntimeExports.jsx(SafeIcon,{name:getSortIcon("product",stockSortBy,stockSortOrder),className:"h-3.5 w-3.5"})]})}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-muted-foreground cursor-pointer hover:bg-muted/70 select-none",onClick:()=>handleStockSort("type"),children:jsxRuntimeExports.jsxs("span",{className:"flex items-center justify-center gap-1",children:["Tipe",jsxRuntimeExports.jsx(SafeIcon,{name:getSortIcon("type",stockSortBy,stockSortOrder),className:"h-3.5 w-3.5"})]})}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-muted-foreground cursor-pointer hover:bg-muted/70 select-none",onClick:()=>handleStockSort("qty"),children:jsxRuntimeExports.jsxs("span",{className:"flex items-center justify-end gap-1",children:["Qty",jsxRuntimeExports.jsx(SafeIcon,{name:getSortIcon("qty",stockSortBy,stockSortOrder),className:"h-3.5 w-3.5"})]})}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Keterangan"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Dicatat Oleh"})]})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-border",children:isLoading?jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:6,className:"px-4 py-8 text-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"h-6 w-6 animate-spin mx-auto text-muted-foreground"})})}):sortedStockData.length===0?jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:6,className:"px-4 py-12 text-center",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Package",className:"h-10 w-10 text-muted-foreground/50"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Tidak ada data pergerakan stok"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground/70",children:"Coba ubah filter periode"})]})})}):sortedStockData.slice((stockCurrentPage-1)*stockRowsPerPage,stockCurrentPage*stockRowsPerPage).map(item=>jsxRuntimeExports.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-sm",children:formatDate(item.date)}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-sm font-medium text-orange-600",children:item.product}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-center",children:jsxRuntimeExports.jsx(Badge,{className:`${item.type==="MASUK"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"} hover:bg-inherit`,children:item.type})}),jsxRuntimeExports.jsxs("td",{className:`px-4 py-3 text-sm text-right font-medium font-mono ${item.type==="MASUK"?"text-green-600":"text-red-600"}`,children:[item.type==="MASUK"?"+":"-",item.qty]}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:item.note||"-"}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:item.recorded_by})]},item.id))})]})}),stockData&&stockData.data.length>0&&jsxRuntimeExports.jsxs("div",{className:"p-3 border-t border-border flex flex-col sm:flex-row items-center justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[jsxRuntimeExports.jsx("span",{children:"Tampilkan"}),jsxRuntimeExports.jsxs(Select,{value:String(stockRowsPerPage),onValueChange:v=>{setStockRowsPerPage(Number(v)),setStockCurrentPage(1)},children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[70px] h-8",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsx(SelectContent,{children:rowsPerPageOptions.map(opt=>jsxRuntimeExports.jsx(SelectItem,{value:String(opt),children:opt},opt))})]}),jsxRuntimeExports.jsxs("span",{children:["dari ",stockData.data.length," data"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>setStockCurrentPage(p=>Math.max(1,p-1)),disabled:stockCurrentPage===1,className:"h-8 px-2",children:jsxRuntimeExports.jsx(SafeIcon,{name:"ChevronLeft",className:"h-4 w-4"})}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-muted-foreground min-w-[80px] text-center",children:["Hal ",stockCurrentPage," / ",Math.ceil(stockData.data.length/stockRowsPerPage)]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>setStockCurrentPage(p=>Math.min(Math.ceil(stockData.data.length/stockRowsPerPage),p+1)),disabled:stockCurrentPage>=Math.ceil(stockData.data.length/stockRowsPerPage),className:"h-8 px-2",children:jsxRuntimeExports.jsx(SafeIcon,{name:"ChevronRight",className:"h-4 w-4"})})]})]})]})]})]})]})]})}export{ReportsPage as default};
