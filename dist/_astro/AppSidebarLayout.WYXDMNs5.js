import{j as jsxRuntimeExports}from"./jsx-runtime.mvtouYz0.js";import{S as Sidebar,a as SidebarContent,b as SidebarGroup,c as SidebarGroupLabel,d as SidebarGroupContent,e as SidebarMenu,f as SidebarMenuItem,g as SidebarMenuButton,h as SidebarProvider,i as SidebarInset}from"./sidebar.OOywN5Va.js";import{r as reactExports}from"./index.DcciWILN.js";import{S as SafeIcon}from"./SafeIcon.CAGsavDo.js";import{companyProfileApi}from"./api.Dr7hS9Y8.js";import AdminHeader from"./AdminHeader.BIBaYXSJ.js";import"./input.C9ryBhC0.js";import"./separator.bhOikD5L.js";import"./index.PIAPtHoh.js";import"./index.ubNQCTBn.js";import"./index.zVS-qTD4.js";import"./index.BpQ989z7.js";import"./index.YpXgcoRz.js";import"./index.Dovp0-D8.js";import"./index.DZiLsHox.js";import"./index.CdmyERTi.js";import"./x.DUlMVzh7.js";import"./skeleton.CCqcM_wt.js";import"./index.BFpcrWlj.js";import"./index.9MihlNbL.js";import"./index.BaF2FVWY.js";import"./panel-left.C6TFiotF.js";import"./dropdown-menu.CyUKnKxT.js";import"./index.BStXkqMp.js";import"./index.Drh0kMGk.js";import"./index.DQDOfy24.js";import"./chevron-right.oaN48PMp.js";import"./check.TUgVKQyo.js";import"./avatar.LDOJxY28.js";import"./badge.DZiJ6zSB.js";import"./dialog.CoJQQKDV.js";import"./scroll-area.c5h9qjqr.js";import"./index.DGt6JTY0.js";import"./index.fAd_ikgp.js";import"./ConfirmationModal.Ck8mepRg.js";import"./AuthGuard.DKm2IuCP.js";const PROFILE_CACHE_KEY="sim4lon_user_profile",menuGroups=[{label:"Menu Utama",items:[{name:"Dashboard",href:"./dashboard-admin.html",icon:"LayoutDashboard"},{name:"Pesanan",href:"./daftar-pesanan.html",icon:"ShoppingCart"},{name:"Stok LPG",href:"./ringkasan-stok.html",icon:"Package"},{name:"Laporan",href:"/laporan",icon:"BarChart3",adminOnly:!0}]},{label:"Operasional",adminOnly:!0,items:[{name:"Perencanaan",href:"/perencanaan",icon:"CalendarDays"},{name:"Penyaluran",href:"/penyaluran",icon:"Send"},{name:"Penerimaan",href:"/penerimaan",icon:"PackageCheck"},{name:"In / Out Agen",href:"/in-out-agen",icon:"RefreshCw"}]},{label:"Manajemen",adminOnly:!0,items:[{name:"Pangkalan",href:"./daftar-pangkalan.html",icon:"Store"},{name:"Pengguna",href:"./daftar-pengguna.html",icon:"Users"},{name:"Supir",href:"./daftar-driver.html",icon:"Truck"}]},{label:"Sistem",adminOnly:!0,items:[{name:"Log Riwayat",href:"/riwayat-aktivitas",icon:"History"},{name:"Pengaturan",href:"./pengaturan.html",icon:"Settings"}]}];function getUserRole(){if(typeof window>"u")return"OPERATOR";try{const cached=sessionStorage.getItem(PROFILE_CACHE_KEY);if(cached)return JSON.parse(cached).role||"OPERATOR"}catch{}return"OPERATOR"}function getVisibleMenuGroups(role){return role==="ADMIN"?menuGroups:menuGroups.filter(group=>!group.adminOnly).map(group=>({...group,items:group.items.filter(item=>!item.adminOnly)})).filter(group=>group.items.length>0)}function AdminSidebar(){const[activePage,setActivePage]=reactExports.useState(""),[userRole,setUserRole]=reactExports.useState("ADMIN"),[isHydrated,setIsHydrated]=reactExports.useState(!1),[companyName,setCompanyName]=reactExports.useState(""),normalizeForComparison=path=>path.replace(/^\.\//,"").replace(/^\//,"").replace(/\/$/,"").replace(/\.html$/,""),subPageMapping={"daftar-pesanan":["buat-pesanan","detail-pesanan","catat-pembayaran","nota-pembayaran","status-pembayaran"],"ringkasan-stok":["pemakaian-stok"],"daftar-pangkalan":["detail-edit-pangkalan"],"daftar-pengguna":["tambah-pengguna"],"dashboard-admin":[]},getActiveMenu=currentPath=>{for(const[parent,subPages]of Object.entries(subPageMapping))if(subPages.some(sub=>currentPath.includes(sub)))return parent;return currentPath};reactExports.useEffect(()=>{if(typeof window<"u"){const currentPath=window.location.pathname,normalizedCurrentPath=normalizeForComparison(currentPath),activeMenuPath=getActiveMenu(normalizedCurrentPath);setActivePage(activeMenuPath);const role=getUserRole();setUserRole(role),setIsHydrated(!0),companyProfileApi.get().then(profile=>setCompanyName(profile.company_name||"")).catch(()=>setCompanyName(""))}},[]);const visibleGroups=getVisibleMenuGroups(userRole);return jsxRuntimeExports.jsx(Sidebar,{className:"top-[--header-height] h-[calc(100vh-var(--header-height))]",variant:"inset",children:jsxRuntimeExports.jsxs(SidebarContent,{className:"px-2 py-2 sidebar-scrollbar-modern",style:{background:"linear-gradient(180deg, hsl(var(--sidebar-background)) 0%, hsl(var(--sidebar-background)/0.97) 50%, hsl(var(--sidebar-accent)/0.3) 100%)"},children:[jsxRuntimeExports.jsxs("div",{className:"",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 justify-center",children:jsxRuntimeExports.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-gray-500/20 to-transparent"})}),jsxRuntimeExports.jsx("div",{className:"py-2 flex justify-center",children:companyName?jsxRuntimeExports.jsx("p",{className:"text-[11px] font-bold text-center tracking-wide text-gray-500/70",children:companyName}):jsxRuntimeExports.jsx("div",{className:"h-3 w-32 bg-muted rounded animate-pulse"})}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 justify-center",children:jsxRuntimeExports.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-border to-transparent"})})]}),visibleGroups.map((group,groupIndex)=>jsxRuntimeExports.jsxs(SidebarGroup,{className:"py-0",children:[jsxRuntimeExports.jsxs(SidebarGroupLabel,{className:"text-[9px] font-bold uppercase tracking-[0.12em] text-sidebar-foreground/50 px-3 mb-1 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-border to-transparent"}),jsxRuntimeExports.jsx("span",{children:group.label}),jsxRuntimeExports.jsx("div",{className:"h-px flex-1 bg-gradient-to-l from-border to-transparent"})]}),jsxRuntimeExports.jsx(SidebarGroupContent,{children:jsxRuntimeExports.jsx(SidebarMenu,{className:"gap-0.4 px-1",children:group.items.map((item,itemIndex)=>{const isActive=normalizeForComparison(item.href)===activePage;return jsxRuntimeExports.jsx(SidebarMenuItem,{children:jsxRuntimeExports.jsx(SidebarMenuButton,{asChild:!0,isActive,className:`
                          relative overflow-hidden rounded-xl transition-all duration-300 ease-out
                          ${isActive?"bg-gradient-to-r from-primary via-primary/95 to-primary/90 text-white shadow-lg shadow-primary/30":"hover:bg-sidebar-accent/50 hover:translate-x-1 active:bg-primary/20"}
                        `,children:jsxRuntimeExports.jsxs("a",{href:item.href,className:"flex items-center gap-2 w-full px-3 py-2 group",children:[jsxRuntimeExports.jsx("div",{className:`
                            p-1 rounded-md transition-all duration-300
                            ${isActive?"bg-white/20":"bg-sidebar-accent/50 group-hover:bg-primary/10 group-hover:scale-110"}
                          `,children:jsxRuntimeExports.jsx(SafeIcon,{name:item.icon,className:`h-3.5 w-3.5 transition-transform duration-300 ${isActive?"text-white":"text-sidebar-foreground/70 group-hover:text-primary"}`})}),jsxRuntimeExports.jsx("span",{className:`text-[13px] font-medium transition-colors duration-300 ${isActive?"text-white":"text-sidebar-foreground/80 group-hover:text-sidebar-foreground"}`,children:item.name}),isActive&&jsxRuntimeExports.jsx("div",{className:"absolute right-3 w-1.5 h-1.5 rounded-full bg-white animate-pulse"})]})})},item.name)})})})]},group.label)),jsxRuntimeExports.jsxs("div",{className:"mt-auto pt-2 px-3",children:[jsxRuntimeExports.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-border to-transparent"}),jsxRuntimeExports.jsx("p",{className:"text-[14px] text-center text-muted-foreground/40 mt-2 font-medium",children:"SIM4LON v1.3"}),jsxRuntimeExports.jsx("p",{className:"text-[9px] text-center text-muted-foreground/40 font-normal",children:"by Luthfi"})]})]})})}function AppSidebarLayout({children,headerHeight="64px"}){return jsxRuntimeExports.jsx(SidebarProvider,{style:{"--header-height":headerHeight},children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col min-h-screen w-full",children:[jsxRuntimeExports.jsx(AdminHeader,{}),jsxRuntimeExports.jsxs("div",{className:"flex flex-1 w-full",children:[jsxRuntimeExports.jsx(AdminSidebar,{}),jsxRuntimeExports.jsx(SidebarInset,{className:"flex flex-col flex-1",children})]})]})})}export{AppSidebarLayout as default};
