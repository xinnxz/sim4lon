import{j as jsxRuntimeExports}from"./jsx-runtime.mvtouYz0.js";import{r as reactExports}from"./index.DcciWILN.js";import{S as Sidebar,a as SidebarContent,b as SidebarGroup,c as SidebarGroupLabel,d as SidebarGroupContent,e as SidebarMenu,f as SidebarMenuItem,j as SidebarFooter,u as useSidebar,h as SidebarProvider,i as SidebarInset}from"./sidebar.OOywN5Va.js";import{S as SafeIcon,B as Button}from"./SafeIcon.CAGsavDo.js";import{D as DropdownMenu,a as DropdownMenuTrigger,b as DropdownMenuContent,d as DropdownMenuLabel,e as DropdownMenuSeparator,c as DropdownMenuItem}from"./dropdown-menu.CyUKnKxT.js";import{A as Avatar,a as AvatarImage,b as AvatarFallback}from"./avatar.LDOJxY28.js";import{authApi}from"./api.Dr7hS9Y8.js";import{c as clearCachedProfile}from"./AuthGuard.DKm2IuCP.js";import"./input.C9ryBhC0.js";import"./separator.bhOikD5L.js";import"./index.PIAPtHoh.js";import"./index.ubNQCTBn.js";import"./index.zVS-qTD4.js";import"./index.BpQ989z7.js";import"./index.YpXgcoRz.js";import"./index.Dovp0-D8.js";import"./index.DZiLsHox.js";import"./index.CdmyERTi.js";import"./x.DUlMVzh7.js";import"./skeleton.CCqcM_wt.js";import"./index.BFpcrWlj.js";import"./index.9MihlNbL.js";import"./index.BaF2FVWY.js";import"./panel-left.C6TFiotF.js";import"./index.BStXkqMp.js";import"./index.Drh0kMGk.js";import"./index.DQDOfy24.js";import"./chevron-right.oaN48PMp.js";import"./check.TUgVKQyo.js";const menuItems=[{name:"Dashboard",href:"/pangkalan/dashboard",icon:"LayoutDashboard"},{name:"Penjualan",href:"/pangkalan/penjualan",icon:"ShoppingBag"},{name:"Stok LPG",href:"/pangkalan/stok",icon:"Package"},{name:"Konsumen",href:"/pangkalan/konsumen",icon:"Users"},{name:"Pengeluaran",href:"/pangkalan/pengeluaran",icon:"Wallet"},{name:"Laporan",href:"/pangkalan/laporan",icon:"FileText"}];function PangkalanSidebar(){const[activePage,setActivePage]=reactExports.useState("");reactExports.useEffect(()=>{typeof window<"u"&&setActivePage(window.location.pathname)},[]);const isActive=href=>activePage===href?!0:href==="/pangkalan/penjualan"?activePage==="/pangkalan/penjualan":!1;return jsxRuntimeExports.jsxs(Sidebar,{className:"border-r bg-white dark:bg-slate-950",children:[jsxRuntimeExports.jsx(SidebarContent,{className:"pt-4 sidebar-scrollbar-modern",children:jsxRuntimeExports.jsxs(SidebarGroup,{children:[jsxRuntimeExports.jsx(SidebarGroupLabel,{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-4 mb-2",children:"Menu"}),jsxRuntimeExports.jsx(SidebarGroupContent,{children:jsxRuntimeExports.jsx(SidebarMenu,{className:"space-y-1 px-2",children:menuItems.map(item=>{const active=isActive(item.href);return jsxRuntimeExports.jsx(SidebarMenuItem,{children:jsxRuntimeExports.jsxs("a",{href:item.href,className:`flex items-center gap-3 px-3 h-11 rounded-lg transition-colors ${active?"bg-blue-600 text-white":"text-slate-700 hover:bg-blue-50 hover:text-blue-700 dark:text-slate-300 dark:hover:bg-blue-950"}`,children:[jsxRuntimeExports.jsx(SafeIcon,{name:item.icon,className:"h-5 w-5"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:item.name})]})},item.name)})})})]})}),jsxRuntimeExports.jsx(SidebarFooter,{className:"border-t p-4",children:jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-400 text-center",children:"SIM4LON Pangkalan"})})]})}function MobileMenuButton(){try{const{toggleSidebar,openMobile}=useSidebar();return jsxRuntimeExports.jsx("button",{onClick:toggleSidebar,className:`md:hidden relative w-10 h-10 flex items-center justify-center rounded-xl \r
                           bg-gradient-to-br from-blue-500/10 to-blue-500/5 \r
                           hover:from-blue-500/20 hover:to-blue-500/10 \r
                           active:scale-95 transition-all duration-300 \r
                           border border-blue-500/20 shadow-sm`,"aria-label":"Toggle menu",children:jsxRuntimeExports.jsxs("div",{className:"w-5 h-4 flex flex-col justify-between",children:[jsxRuntimeExports.jsx("span",{className:`block h-0.5 bg-blue-600 rounded-full transform transition-all duration-300 origin-left
                                   ${openMobile?"rotate-45 translate-x-0.5 w-[22px]":"w-5"}`}),jsxRuntimeExports.jsx("span",{className:`block h-0.5 bg-blue-600 rounded-full transition-all duration-300
                                   ${openMobile?"opacity-0 translate-x-3":"w-4 opacity-100"}`}),jsxRuntimeExports.jsx("span",{className:`block h-0.5 bg-blue-600 rounded-full transform transition-all duration-300 origin-left
                                   ${openMobile?"-rotate-45 translate-x-0.5 w-[22px]":"w-5"}`})]})})}catch{return null}}function PangkalanHeaderSimple(){const[profile,setProfile]=reactExports.useState(null);reactExports.useEffect(()=>{(async()=>{try{const data=await authApi.getProfile();setProfile(data)}catch(error){console.error("Failed to fetch profile:",error)}})()},[]);const handleLogout=()=>{clearCachedProfile(),authApi.logout()},getInitials=name=>name.split(" ").map(word=>word[0]).join("").toUpperCase().slice(0,2);return jsxRuntimeExports.jsx("header",{className:"sticky top-0 z-50 w-full h-14 sm:h-16 border-b bg-white dark:bg-slate-950 shadow-sm backdrop-blur-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex h-full items-center px-3 sm:px-4 gap-2 sm:gap-4",children:[jsxRuntimeExports.jsx(MobileMenuButton,{}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[jsxRuntimeExports.jsx("img",{src:"/logo-pertamina-2.png",alt:"Pertamina",className:"h-8 sm:h-10 object-contain transition-all duration-300"}),jsxRuntimeExports.jsxs("div",{className:"hidden xs:block",children:[jsxRuntimeExports.jsx("h1",{className:"text-base sm:text-lg font-bold text-slate-900 dark:text-white",children:"SIM4LON"}),jsxRuntimeExports.jsx("p",{className:"text-[10px] sm:text-xs text-slate-500 dark:text-slate-400 truncate max-w-[100px] sm:max-w-[200px]",children:profile?.pangkalans?.name||"Dashboard Pangkalan"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1"}),jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:jsxRuntimeExports.jsxs(Avatar,{className:"h-10 w-10 border-2 border-blue-100",children:[jsxRuntimeExports.jsx(AvatarImage,{src:profile?.avatar_url||void 0,alt:profile?.name}),jsxRuntimeExports.jsx(AvatarFallback,{className:"bg-blue-100 text-blue-700 font-semibold",children:profile?getInitials(profile.name):"P"})]})})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{className:"w-56",align:"end",forceMount:!0,children:[jsxRuntimeExports.jsx(DropdownMenuLabel,{className:"font-normal",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium",children:profile?.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:profile?.email})]})}),jsxRuntimeExports.jsx(DropdownMenuSeparator,{}),jsxRuntimeExports.jsx(DropdownMenuItem,{asChild:!0,children:jsxRuntimeExports.jsxs("a",{href:"/pangkalan/profil",className:"cursor-pointer",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"User",className:"mr-2 h-4 w-4"}),"Profil"]})}),jsxRuntimeExports.jsx(DropdownMenuSeparator,{}),jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:handleLogout,className:"text-red-600 cursor-pointer",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"LogOut",className:"mr-2 h-4 w-4"}),"Keluar"]})]})]})]})})}function PangkalanSidebarLayout({children}){return reactExports.useEffect(()=>{const originalAccent=document.documentElement.getAttribute("data-accent");return document.documentElement.setAttribute("data-accent","blue"),()=>{originalAccent?document.documentElement.setAttribute("data-accent",originalAccent):document.documentElement.removeAttribute("data-accent")}},[]),jsxRuntimeExports.jsx(SidebarProvider,{style:{"--header-height":"64px"},children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col min-h-screen w-full bg-gradient-to-br from-slate-100 via-slate-50 to-blue-50",children:[jsxRuntimeExports.jsx(PangkalanHeaderSimple,{}),jsxRuntimeExports.jsxs("div",{className:"flex flex-1 w-full",children:[jsxRuntimeExports.jsx(PangkalanSidebar,{}),jsxRuntimeExports.jsx(SidebarInset,{className:"flex flex-col flex-1",children:jsxRuntimeExports.jsx("main",{className:"flex-1 p-2 lg:p-8",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto",children})})})]})]})})}export{PangkalanSidebarLayout as default};
