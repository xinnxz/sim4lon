import{j as jsxRuntimeExports}from"./jsx-runtime.mvtouYz0.js";import{r as reactExports}from"./index.DcciWILN.js";import{S as SafeIcon,B as Button}from"./SafeIcon.CAGsavDo.js";import{I as Input}from"./input.C9ryBhC0.js";import{C as Card,b as CardHeader,c as CardTitle,d as CardDescription,a as CardContent}from"./card.D0gylVsf.js";import{T as Tilt3DCard}from"./Tilt3DCard.A2Rmx9L7.js";import{T as Table,a as TableHeader,b as TableRow,c as TableHead,d as TableBody,e as TableCell}from"./table.DRds5X1g.js";import{D as DropdownMenu,a as DropdownMenuTrigger,b as DropdownMenuContent,c as DropdownMenuItem}from"./dropdown-menu.CyUKnKxT.js";import{B as Badge}from"./badge.DZiJ6zSB.js";import{D as Dialog,a as DialogContent,b as DialogHeader,c as DialogTitle,d as DialogDescription}from"./dialog.CoJQQKDV.js";import{o as object,s as string,u as useForm,a,g as getKecamatanByKabupaten,F as Form,b as FormField,c as FormItem,d as FormLabel,e as FormControl,f as FormDescription,h as FormMessage,K as KABUPATEN_DATA}from"./regions.CvY4fZka.js";import{T as Textarea}from"./textarea.CmILhP_C.js";import{S as Select,a as SelectTrigger,b as SelectValue,c as SelectContent,d as SelectItem}from"./select.Dd50uIHU.js";import{t as toast}from"./index.fAd_ikgp.js";import{pangkalanApi}from"./api.Dr7hS9Y8.js";import{C as ConfirmationModal}from"./ConfirmationModal.Ck8mepRg.js";import{A as AnimatedNumber}from"./AnimatedNumber.DkDF6dXY.js";import{P as PageHeader}from"./PageHeader.ChFr_oMu.js";import"./index.BpQ989z7.js";import"./index.PIAPtHoh.js";import"./index.ubNQCTBn.js";import"./index.YpXgcoRz.js";import"./index.Dovp0-D8.js";import"./index.BStXkqMp.js";import"./index.Drh0kMGk.js";import"./index.DZiLsHox.js";import"./index.BFpcrWlj.js";import"./index.9MihlNbL.js";import"./index.CdmyERTi.js";import"./index.DQDOfy24.js";import"./chevron-right.oaN48PMp.js";import"./check.TUgVKQyo.js";import"./index.zVS-qTD4.js";import"./x.DUlMVzh7.js";import"./label.BFF1cpbq.js";import"./index.DGt6JTY0.js";import"./index.BhA3i5Wo.js";import"./index.BaF2FVWY.js";import"./chevron-up.BBBXIirx.js";const pangkalanSchema=object({name:string().min(3,"Nama pangkalan minimal 3 karakter").max(100,"Nama pangkalan maksimal 100 karakter"),address:string().min(10,"Alamat minimal 10 karakter").max(255,"Alamat maksimal 255 karakter"),kabupaten:string().min(1,"Kabupaten harus dipilih"),kecamatan:string().min(1,"Kecamatan harus dipilih"),pic_name:string().min(2,"Nama PIC minimal 2 karakter").max(100,"Nama PIC maksimal 100 karakter"),phone:string().regex(/^(\+62|0)[0-9]{9,12}$/,"Nomor telepon tidak valid (contoh: 08xx atau +62xx)"),capacity:string().optional(),alokasi_bulanan:string().optional(),note:string().max(500,"Catatan maksimal 500 karakter").optional(),login_email:string().min(1,"Email wajib diisi").email("Format email tidak valid"),login_password:string().min(6,"Password minimal 6 karakter"),confirm_password:string().min(6,"Konfirmasi password harus diisi")}).refine(data=>data.login_password===data.confirm_password,{message:"Konfirmasi password tidak cocok",path:["confirm_password"]});function TambahPangkalanForm({onSuccess,isModal=!1}){const[isSubmitting,setIsSubmitting]=reactExports.useState(!1),[selectedKabupaten,setSelectedKabupaten]=reactExports.useState(""),form=useForm({resolver:a(pangkalanSchema),defaultValues:{name:"",address:"",kabupaten:"",kecamatan:"",pic_name:"",phone:"",capacity:"",alokasi_bulanan:"",note:"",login_email:"",login_password:"",confirm_password:""}}),kecamatanList=getKecamatanByKabupaten(selectedKabupaten);async function onSubmit(values){setIsSubmitting(!0);try{const capacityNum=values.capacity?parseInt(values.capacity,10):0,kabupatenName=KABUPATEN_DATA.find(k=>k.id===values.kabupaten)?.name||values.kabupaten,region=`${values.kecamatan}, ${kabupatenName}`;await pangkalanApi.create({name:values.name,address:values.address,region,pic_name:values.pic_name,phone:values.phone,email:values.login_email,capacity:capacityNum,alokasi_bulanan:values.alokasi_bulanan?parseInt(values.alokasi_bulanan,10):0,note:values.note||"",login_email:values.login_email,login_password:values.login_password}),toast.success("Pangkalan berhasil ditambahkan!"),isModal&&onSuccess?onSuccess():setTimeout(()=>{window.location.href="/daftar-pangkalan"},1e3)}catch(error){toast.error("Gagal menambahkan pangkalan. Silakan coba lagi."),console.error("Error:",error)}finally{setIsSubmitting(!1)}}return jsxRuntimeExports.jsxs("div",{className:isModal?"":"max-w-2xl mx-auto",children:[!isModal&&jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Store",className:"h-6 w-6 text-primary"}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Tambah Pangkalan"})]}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Daftarkan pangkalan LPG baru ke dalam sistem"})]}),jsxRuntimeExports.jsxs(Card,{className:isModal?"border-0 shadow-none":"shadow-card",children:[jsxRuntimeExports.jsxs(CardHeader,{className:isModal?"px-0 pt-0":"",children:[jsxRuntimeExports.jsx(CardTitle,{children:"Informasi Pangkalan"}),jsxRuntimeExports.jsx(CardDescription,{children:"Isi semua field yang diperlukan untuk mendaftarkan pangkalan baru"})]}),jsxRuntimeExports.jsx(CardContent,{className:isModal?"px-0":"",children:jsxRuntimeExports.jsx(Form,{...form,children:jsxRuntimeExports.jsxs("form",{onSubmit:form.handleSubmit(onSubmit),className:"space-y-6",children:[jsxRuntimeExports.jsx(FormField,{control:form.control,name:"name",render:({field})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{className:"text-base font-semibold",children:"Nama Pangkalan *"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Contoh: Pangkalan Maju Jaya",...field,disabled:isSubmitting})}),jsxRuntimeExports.jsx(FormDescription,{children:"Nama resmi pangkalan LPG"}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:form.control,name:"address",render:({field})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{className:"text-base font-semibold",children:"Alamat Lengkap *"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Textarea,{placeholder:"Contoh: Jl. Merdeka No. 123, Kelurahan Sukamaju",...field,disabled:isSubmitting,rows:3})}),jsxRuntimeExports.jsx(FormDescription,{children:"Alamat lengkap pangkalan"}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsx(FormField,{control:form.control,name:"kabupaten",render:({field})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{className:"text-base font-semibold",children:"Kabupaten *"}),jsxRuntimeExports.jsxs(Select,{onValueChange:value=>{field.onChange(value),setSelectedKabupaten(value),form.setValue("kecamatan","")},defaultValue:field.value,disabled:isSubmitting,children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Pilih Kabupaten"})})}),jsxRuntimeExports.jsx(SelectContent,{children:KABUPATEN_DATA.map(kab=>jsxRuntimeExports.jsx(SelectItem,{value:kab.id,children:kab.name},kab.id))})]}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:form.control,name:"kecamatan",render:({field})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{className:"text-base font-semibold",children:"Kecamatan *"}),jsxRuntimeExports.jsxs(Select,{onValueChange:field.onChange,defaultValue:field.value,disabled:isSubmitting||!selectedKabupaten,children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:selectedKabupaten?"Pilih Kecamatan":"Pilih Kabupaten dulu"})})}),jsxRuntimeExports.jsx(SelectContent,{children:kecamatanList.map(kec=>jsxRuntimeExports.jsx(SelectItem,{value:kec,children:kec},kec))})]}),jsxRuntimeExports.jsx(FormMessage,{})]})})]}),jsxRuntimeExports.jsx(FormField,{control:form.control,name:"pic_name",render:({field})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{className:"text-base font-semibold",children:"Nama PIC *"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Contoh: Budi Santoso",...field,disabled:isSubmitting})}),jsxRuntimeExports.jsx(FormDescription,{children:"Nama penanggung jawab pangkalan"}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:form.control,name:"phone",render:({field})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{className:"text-base font-semibold",children:"Nomor Telepon *"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Contoh: 081234567890",...field,disabled:isSubmitting,type:"tel"})}),jsxRuntimeExports.jsx(FormDescription,{children:"Nomor telepon yang dapat dihubungi"}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:form.control,name:"capacity",render:({field})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{className:"text-base font-semibold",children:"Kapasitas (Opsional)"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Contoh: 500",...field,disabled:isSubmitting,type:"number",onWheel:e=>e.target.blur()})}),jsxRuntimeExports.jsx(FormDescription,{children:"Kapasitas penyimpanan LPG dalam unit"}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:form.control,name:"alokasi_bulanan",render:({field})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{className:"text-base font-semibold",children:"Alokasi Bulanan (Opsional)"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Contoh: 500",...field,disabled:isSubmitting,type:"number",min:0,onWheel:e=>e.target.blur()})}),jsxRuntimeExports.jsx(FormDescription,{children:"Jumlah alokasi tabung LPG per bulan"}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:form.control,name:"note",render:({field})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{className:"text-base font-semibold",children:"Catatan (Opsional)"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Textarea,{placeholder:"Contoh: Lokasi strategis, akses jalan mudah",...field,disabled:isSubmitting,rows:2})}),jsxRuntimeExports.jsx(FormDescription,{children:"Informasi tambahan tentang pangkalan"}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsxs("div",{className:"pt-6 mt-6 border-t",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Key",className:"h-5 w-5 text-primary"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"Akun Login Pangkalan"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Buat akun untuk login ke dashboard pangkalan. Email ini juga digunakan untuk invoice."}),jsxRuntimeExports.jsx(FormField,{control:form.control,name:"login_email",render:({field})=>jsxRuntimeExports.jsxs(FormItem,{className:"mb-4",children:[jsxRuntimeExports.jsx(FormLabel,{className:"text-base font-semibold",children:"Email Login *"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Contoh: pangkalan@email.com",...field,disabled:isSubmitting,type:"email"})}),jsxRuntimeExports.jsx(FormDescription,{children:"Email untuk login ke dashboard pangkalan"}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsx(FormField,{control:form.control,name:"login_password",render:({field})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{className:"text-base font-semibold",children:"Password *"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Minimal 6 karakter",...field,disabled:isSubmitting,type:"password"})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:form.control,name:"confirm_password",render:({field})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{className:"text-base font-semibold",children:"Konfirmasi Password *"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Ulangi password",...field,disabled:isSubmitting,type:"password"})}),jsxRuntimeExports.jsx(FormMessage,{})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 pt-6 border-t",children:[!isModal&&jsxRuntimeExports.jsxs(Button,{type:"button",variant:"outline",onClick:()=>window.location.href="/daftar-pangkalan",disabled:isSubmitting,className:"flex-1",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"X",className:"mr-2 h-4 w-4"}),"Batal"]}),jsxRuntimeExports.jsx(Button,{type:"submit",disabled:isSubmitting,className:isModal?"w-full":"flex-1 bg-primary hover:bg-primary/90",children:isSubmitting?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"mr-2 h-4 w-4 animate-spin"}),"Menyimpan..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Save",className:"mr-2 h-4 w-4"}),"Simpan Pangkalan"]})})]})]})})})]})]})}function PangkalanListPage(){const[pangkalanList,setPangkalanList]=reactExports.useState([]),[isLoading,setIsLoading]=reactExports.useState(!0),[totalItems,setTotalItems]=reactExports.useState(0),[currentPage,setCurrentPage]=reactExports.useState(1),[totalPages,setTotalPages]=reactExports.useState(1),[aktivCount,setAktivCount]=reactExports.useState(0),[nonaktifCount,setNonaktifCount]=reactExports.useState(0),[searchTerm,setSearchTerm]=reactExports.useState(""),[statusFilter,setStatusFilter]=reactExports.useState("semua"),[showAddModal,setShowAddModal]=reactExports.useState(!1),[selectedPangkalan,setSelectedPangkalan]=reactExports.useState(null),[showConfirmModal,setShowConfirmModal]=reactExports.useState(!1),[sortField,setSortField]=reactExports.useState(null),[sortDirection,setSortDirection]=reactExports.useState("asc"),handleSort=field=>{sortField===field?setSortDirection(prev=>prev==="asc"?"desc":"asc"):(setSortField(field),setSortDirection("asc"))},sortedPangkalanList=reactExports.useMemo(()=>sortField?[...pangkalanList].sort((a2,b)=>{let aVal=a2[sortField],bVal=b[sortField];return aVal==null&&(aVal=""),bVal==null&&(bVal=""),typeof aVal=="string"&&(aVal=aVal.toLowerCase(),bVal=bVal.toLowerCase()),aVal<bVal?sortDirection==="asc"?-1:1:aVal>bVal?sortDirection==="asc"?1:-1:0}):pangkalanList,[pangkalanList,sortField,sortDirection]),SortableHeader=({field,children,className="",align="left"})=>jsxRuntimeExports.jsx(TableHead,{className:`font-semibold text-muted-foreground cursor-pointer hover:bg-muted/50 transition-colors select-none ${className}`,onClick:()=>handleSort(field),children:jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-1.5 ${align==="center"?"justify-center":"justify-start"}`,children:[children,sortField===field?sortDirection==="asc"?jsxRuntimeExports.jsx(SafeIcon,{name:"ChevronUp",className:"w-4 h-4 text-primary"}):jsxRuntimeExports.jsx(SafeIcon,{name:"ChevronDown",className:"w-4 h-4 text-primary"}):jsxRuntimeExports.jsx(SafeIcon,{name:"ChevronsUpDown",className:"w-4 h-4 text-muted-foreground/50"})]})}),fetchPangkalan=async()=>{try{setIsLoading(!0);const isActive=statusFilter==="semua"?void 0:statusFilter==="aktif",response=await pangkalanApi.getAll(currentPage,10,searchTerm||void 0,isActive);setPangkalanList(response.data),setTotalItems(response.meta.totalAll||response.meta.total),setTotalPages(response.meta.totalPages),setAktivCount(response.meta.totalActive||0),setNonaktifCount(response.meta.totalInactive||0)}catch(error){console.error("Failed to fetch pangkalan:",error),toast.error("Gagal memuat data pangkalan")}finally{setIsLoading(!1)}};reactExports.useEffect(()=>{fetchPangkalan()},[currentPage,statusFilter]),reactExports.useEffect(()=>{const timer=setTimeout(()=>{setCurrentPage(1),fetchPangkalan()},500);return()=>clearTimeout(timer)},[searchTerm]);const handleStatusToggleClick=pangkalan=>{setSelectedPangkalan(pangkalan),setShowConfirmModal(!0)},handleConfirmStatusToggle=async()=>{if(selectedPangkalan)try{const newStatus=!selectedPangkalan.is_active;await pangkalanApi.update(selectedPangkalan.id,{is_active:newStatus}),toast.success(`Pangkalan berhasil ${newStatus?"diaktifkan":"dinonaktifkan"}`),fetchPangkalan()}catch(error){console.error("Failed to update status:",error),toast.error("Gagal mengubah status pangkalan")}finally{setShowConfirmModal(!1),setSelectedPangkalan(null)}},handleAddSuccess=()=>{setShowAddModal(!1),fetchPangkalan(),toast.success("Pangkalan berhasil ditambahkan")};return jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-6 p-4 sm:p-6 lg:p-8 dashboard-gradient-bg min-h-screen",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[jsxRuntimeExports.jsx(PageHeader,{title:"Daftar Pangkalan",subtitle:"Kelola semua pangkalan distribusi LPG"}),jsxRuntimeExports.jsxs(Button,{onClick:()=>setShowAddModal(!0),className:"w-full sm:w-auto bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 text-white shadow-lg hover:shadow-xl transition-all",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Plus",className:"mr-2 h-4 w-4"}),"Tambah Pangkalan"]})]}),jsxRuntimeExports.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-border to-transparent"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:isLoading?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:[0,1,2].map(i=>jsxRuntimeExports.jsx("div",{className:"animate-pulse",style:{animationDelay:`${i*100}ms`},children:jsxRuntimeExports.jsx(Card,{className:"border-0 glass-card h-full",children:jsxRuntimeExports.jsx(CardContent,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2.5 rounded-xl bg-muted w-10 h-10 animate-shimmer"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 flex-1",children:[jsxRuntimeExports.jsx("div",{className:"h-3 w-16 bg-muted rounded animate-shimmer"}),jsxRuntimeExports.jsx("div",{className:"h-7 w-12 bg-muted rounded animate-shimmer"})]})]})})})},i))}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Tilt3DCard,{children:jsxRuntimeExports.jsx(Card,{className:"border-0 glass-card animate-fadeInUp h-full",children:jsxRuntimeExports.jsx(CardContent,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2.5 rounded-xl bg-primary/10 dark:bg-primary/15",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Building2",className:"w-5 h-5 text-primary"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Pangkalan"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold",children:jsxRuntimeExports.jsx(AnimatedNumber,{value:totalItems,delay:100})})]})]})})})}),jsxRuntimeExports.jsx(Tilt3DCard,{children:jsxRuntimeExports.jsx(Card,{className:"border-0 glass-card animate-fadeInUp h-full",style:{animationDelay:"0.1s"},children:jsxRuntimeExports.jsx(CardContent,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2.5 rounded-xl bg-emerald-500/10 dark:bg-emerald-500/15",children:jsxRuntimeExports.jsx(SafeIcon,{name:"CheckCircle",className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Aktif"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:jsxRuntimeExports.jsx(AnimatedNumber,{value:aktivCount,delay:200})})]})]})})})}),jsxRuntimeExports.jsx(Tilt3DCard,{children:jsxRuntimeExports.jsx(Card,{className:"border-0 glass-card animate-fadeInUp h-full",style:{animationDelay:"0.2s"},children:jsxRuntimeExports.jsx(CardContent,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2.5 rounded-xl bg-rose-500/10 dark:bg-rose-500/15",children:jsxRuntimeExports.jsx(SafeIcon,{name:"XCircle",className:"w-5 h-5 text-rose-600 dark:text-rose-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Nonaktif"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-rose-600 dark:text-rose-400",children:jsxRuntimeExports.jsx(AnimatedNumber,{value:nonaktifCount,delay:300})})]})]})})})})]})}),jsxRuntimeExports.jsx(Card,{className:"glass-card",children:jsxRuntimeExports.jsx(CardContent,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-stretch sm:items-center",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Search",className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),jsxRuntimeExports.jsx(Input,{placeholder:"Cari berdasarkan nama, alamat, atau wilayah...",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:"pl-10 bg-transparent border-border focus:border-primary focus:ring-primary/20"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 p-1 rounded-lg bg-muted/30",children:[jsxRuntimeExports.jsxs(Button,{size:"sm",onClick:()=>setStatusFilter("semua"),className:statusFilter==="semua"?"bg-gradient-to-r from-primary to-primary/80 text-white shadow-md":"bg-transparent hover:bg-muted/50 text-muted-foreground",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"LayoutGrid",className:"w-4 h-4 mr-1.5"}),"Semua"]}),jsxRuntimeExports.jsxs(Button,{size:"sm",onClick:()=>setStatusFilter("aktif"),className:statusFilter==="aktif"?"bg-gradient-to-r from-emerald-600/90 to-emerald-500/90 text-white shadow-md":"bg-transparent hover:bg-muted/50 text-muted-foreground",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"CheckCircle",className:"w-4 h-4 mr-1.5"}),"Aktif"]}),jsxRuntimeExports.jsxs(Button,{size:"sm",onClick:()=>setStatusFilter("nonaktif"),className:statusFilter==="nonaktif"?"bg-gradient-to-r from-rose-600/90 to-rose-500/90 text-white shadow-md":"bg-transparent hover:bg-muted/50 text-muted-foreground",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"XCircle",className:"w-4 h-4 mr-1.5"}),"Nonaktif"]})]})]})})}),jsxRuntimeExports.jsx(Card,{className:"glass-card overflow-hidden",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border/50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Table",className:"w-5 h-5 text-muted-foreground"}),jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Data Pangkalan"}),jsxRuntimeExports.jsxs(Badge,{variant:"secondary",className:"bg-primary/10 text-primary",children:[pangkalanList.length," data"]})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total: ",totalItems," pangkalan"]})]}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:isLoading?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-12",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-3",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"h-8 w-8 animate-spin text-blue-500"}),jsxRuntimeExports.jsx("span",{className:"text-muted-foreground",children:"Memuat data pangkalan..."})]})}):jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHeader,{children:jsxRuntimeExports.jsxs(TableRow,{className:"bg-transparent border-border focus:border-primary",children:[jsxRuntimeExports.jsx(SortableHeader,{field:"code",className:"w-24  ",children:"Kode"}),jsxRuntimeExports.jsx(SortableHeader,{field:"name",children:"Nama"}),jsxRuntimeExports.jsx(SortableHeader,{field:"email",children:"Email"}),jsxRuntimeExports.jsx(SortableHeader,{field:"address",children:"Alamat"}),jsxRuntimeExports.jsx(SortableHeader,{field:"region",children:"Wilayah"}),jsxRuntimeExports.jsx(SortableHeader,{field:"phone",align:"center",children:"Telepon"}),jsxRuntimeExports.jsx(SortableHeader,{field:"pic_name",children:"PIC"}),jsxRuntimeExports.jsx(SortableHeader,{field:"alokasi_bulanan",align:"center",children:"Alokasi"}),jsxRuntimeExports.jsx(SortableHeader,{field:"is_active",align:"center",children:"Status"}),jsxRuntimeExports.jsx(TableHead,{className:"text-center font-semibold text-slate-700",children:"Aksi"})]})}),jsxRuntimeExports.jsx(TableBody,{children:sortedPangkalanList.length>0?sortedPangkalanList.map(pangkalan=>jsxRuntimeExports.jsxs(TableRow,{className:"hover:bg-muted/50 transition-colors",children:[jsxRuntimeExports.jsx(TableCell,{className:"font-mono text-sm text-primary",children:pangkalan.code||"-"}),jsxRuntimeExports.jsx(TableCell,{className:"font-medium text-foreground",children:pangkalan.name}),jsxRuntimeExports.jsx(TableCell,{className:"text-sm",children:pangkalan.email?jsxRuntimeExports.jsx("span",{className:"text-primary",children:pangkalan.email}):jsxRuntimeExports.jsx("span",{className:"text-muted-foreground italic",children:"-"})}),jsxRuntimeExports.jsx(TableCell,{className:"text-sm text-foreground/80 max-w-xs truncate",children:pangkalan.address}),jsxRuntimeExports.jsx(TableCell,{className:"text-sm text-foreground",children:pangkalan.region}),jsxRuntimeExports.jsx(TableCell,{className:"text-sm text-center text-foreground",children:pangkalan.phone}),jsxRuntimeExports.jsx(TableCell,{className:"text-sm font-medium text-foreground",children:pangkalan.pic_name}),jsxRuntimeExports.jsx(TableCell,{className:"text-center text-sm font-semibold text-primary",children:pangkalan.alokasi_bulanan?pangkalan.alokasi_bulanan.toLocaleString():"-"}),jsxRuntimeExports.jsx(TableCell,{className:"text-center",children:jsxRuntimeExports.jsx(Badge,{className:pangkalan.is_active?"bg-gradient-to-r from-emerald-600/90 to-emerald-500/90 text-white shadow-sm":"bg-gradient-to-r from-muted-foreground/60 to-muted-foreground/50 text-white shadow-sm",children:pangkalan.is_active?"✓ Aktif":"Nonaktif"})}),jsxRuntimeExports.jsx(TableCell,{className:"text-right",children:jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",children:jsxRuntimeExports.jsx(SafeIcon,{name:"MoreVertical",className:"h-4 w-4"})})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{align:"end",children:[jsxRuntimeExports.jsx(DropdownMenuItem,{asChild:!0,children:jsxRuntimeExports.jsxs("a",{href:`/detail-edit-pangkalan?id=${pangkalan.id}`,className:"cursor-pointer",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Eye",className:"mr-2 h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Lihat Detail"})]})}),pangkalan.is_active?jsxRuntimeExports.jsxs(DropdownMenuItem,{className:"text-destructive cursor-pointer",onClick:()=>handleStatusToggleClick(pangkalan),children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Ban",className:"mr-2 h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Nonaktifkan"})]}):jsxRuntimeExports.jsxs(DropdownMenuItem,{className:"text-green-600 cursor-pointer",onClick:()=>handleStatusToggleClick(pangkalan),children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Check",className:"mr-2 h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Aktifkan"})]})]})]})})]},pangkalan.id)):jsxRuntimeExports.jsx(TableRow,{children:jsxRuntimeExports.jsx(TableCell,{colSpan:10,className:"text-center py-8",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Search",className:"h-8 w-8 text-muted-foreground"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Tidak ada pangkalan ditemukan"})]})})})})]})}),totalPages>1&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-border/50",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-muted-foreground",children:["Halaman ",currentPage," dari ",totalPages," • Total ",totalItems," pangkalan"]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",disabled:currentPage===1,onClick:()=>setCurrentPage(p=>p-1),className:"hover:bg-blue-50",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"ChevronLeft",className:"h-4 w-4 mr-1"}),"Prev"]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,totalPages)},(_,i)=>{let pageNum;return totalPages<=5||currentPage<=3?pageNum=i+1:currentPage>=totalPages-2?pageNum=totalPages-4+i:pageNum=currentPage-2+i,jsxRuntimeExports.jsx(Button,{variant:currentPage===pageNum?"default":"ghost",size:"sm",onClick:()=>setCurrentPage(pageNum),className:currentPage===pageNum?"bg-blue-500 hover:bg-blue-600":"",children:pageNum},pageNum)})}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",disabled:currentPage===totalPages,onClick:()=>setCurrentPage(p=>p+1),className:"hover:bg-blue-50",children:["Next",jsxRuntimeExports.jsx(SafeIcon,{name:"ChevronRight",className:"h-4 w-4 ml-1"})]})]})]})]})}),jsxRuntimeExports.jsx(Dialog,{open:showAddModal,onOpenChange:setShowAddModal,children:jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Tambah Pangkalan Baru"}),jsxRuntimeExports.jsx(DialogDescription,{children:"Daftarkan pangkalan LPG baru ke dalam sistem"})]}),jsxRuntimeExports.jsx("div",{className:"py-4",children:jsxRuntimeExports.jsx(TambahPangkalanForm,{isModal:!0,onSuccess:handleAddSuccess})})]})}),selectedPangkalan&&jsxRuntimeExports.jsx(ConfirmationModal,{open:showConfirmModal,onOpenChange:setShowConfirmModal,title:selectedPangkalan.is_active?"Nonaktifkan Pangkalan":"Aktifkan Pangkalan",description:selectedPangkalan.is_active?`Apakah Anda yakin ingin menonaktifkan pangkalan "${selectedPangkalan.name}"? Pangkalan ini tidak akan dapat menerima pesanan sampai diaktifkan kembali.`:`Apakah Anda yakin ingin mengaktifkan pangkalan "${selectedPangkalan.name}"? Pangkalan ini akan dapat menerima pesanan kembali.`,confirmText:selectedPangkalan.is_active?"Nonaktifkan":"Aktifkan",cancelText:"Batal",icon:selectedPangkalan.is_active?"AlertTriangle":"CheckCircle",isDangerous:selectedPangkalan.is_active,onConfirm:handleConfirmStatusToggle})]})}export{PangkalanListPage as default};
