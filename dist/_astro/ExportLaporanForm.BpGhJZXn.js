import{j as jsxRuntimeExports}from"./jsx-runtime.mvtouYz0.js";import{r as reactExports}from"./index.DcciWILN.js";import{u as useComposedRefs,c as cn,B as Button,S as SafeIcon}from"./SafeIcon.CAGsavDo.js";import{C as Card,b as CardHeader,c as CardTitle,d as CardDescription,a as CardContent}from"./card.D0gylVsf.js";import{L as Label}from"./label.BFF1cpbq.js";import{R as RadioGroup,a as RadioGroupItem}from"./radio-group.B6MJELIm.js";import{c as createContextScope,P as Primitive,a as composeEventHandlers}from"./index.BpQ989z7.js";import{a as useControllableState}from"./index.YpXgcoRz.js";import{u as usePrevious}from"./index.BhA3i5Wo.js";import{u as useSize}from"./index.9MihlNbL.js";import{P as Presence}from"./index.CdmyERTi.js";import{C as Check}from"./check.TUgVKQyo.js";import{I as Input}from"./input.C9ryBhC0.js";import{S as Separator}from"./separator.bhOikD5L.js";import{t as toast}from"./index.fAd_ikgp.js";import"./index.PIAPtHoh.js";import"./index.ubNQCTBn.js";import"./index.DQDOfy24.js";import"./index.BStXkqMp.js";import"./index.Dovp0-D8.js";import"./index.Drh0kMGk.js";var CHECKBOX_NAME="Checkbox",[createCheckboxContext]=createContextScope(CHECKBOX_NAME),[CheckboxProviderImpl,useCheckboxContext]=createCheckboxContext(CHECKBOX_NAME);function CheckboxProvider(props){const{__scopeCheckbox,checked:checkedProp,children,defaultChecked,disabled,form,name,onCheckedChange,required,value="on",internal_do_not_use_render}=props,[checked,setChecked]=useControllableState({prop:checkedProp,defaultProp:defaultChecked??!1,onChange:onCheckedChange,caller:CHECKBOX_NAME}),[control,setControl]=reactExports.useState(null),[bubbleInput,setBubbleInput]=reactExports.useState(null),hasConsumerStoppedPropagationRef=reactExports.useRef(!1),isFormControl=control?!!form||!!control.closest("form"):!0,context={checked,disabled,setChecked,control,setControl,name,form,value,hasConsumerStoppedPropagationRef,required,defaultChecked:isIndeterminate(defaultChecked)?!1:defaultChecked,isFormControl,bubbleInput,setBubbleInput};return jsxRuntimeExports.jsx(CheckboxProviderImpl,{scope:__scopeCheckbox,...context,children:isFunction(internal_do_not_use_render)?internal_do_not_use_render(context):children})}var TRIGGER_NAME="CheckboxTrigger",CheckboxTrigger=reactExports.forwardRef(({__scopeCheckbox,onKeyDown,onClick,...checkboxProps},forwardedRef)=>{const{control,value,disabled,checked,required,setControl,setChecked,hasConsumerStoppedPropagationRef,isFormControl,bubbleInput}=useCheckboxContext(TRIGGER_NAME,__scopeCheckbox),composedRefs=useComposedRefs(forwardedRef,setControl),initialCheckedStateRef=reactExports.useRef(checked);return reactExports.useEffect(()=>{const form=control?.form;if(form){const reset=()=>setChecked(initialCheckedStateRef.current);return form.addEventListener("reset",reset),()=>form.removeEventListener("reset",reset)}},[control,setChecked]),jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"checkbox","aria-checked":isIndeterminate(checked)?"mixed":checked,"aria-required":required,"data-state":getState(checked),"data-disabled":disabled?"":void 0,disabled,value,...checkboxProps,ref:composedRefs,onKeyDown:composeEventHandlers(onKeyDown,event=>{event.key==="Enter"&&event.preventDefault()}),onClick:composeEventHandlers(onClick,event=>{setChecked(prevChecked=>isIndeterminate(prevChecked)?!0:!prevChecked),bubbleInput&&isFormControl&&(hasConsumerStoppedPropagationRef.current=event.isPropagationStopped(),hasConsumerStoppedPropagationRef.current||event.stopPropagation())})})});CheckboxTrigger.displayName=TRIGGER_NAME;var Checkbox$1=reactExports.forwardRef((props,forwardedRef)=>{const{__scopeCheckbox,name,checked,defaultChecked,required,disabled,value,onCheckedChange,form,...checkboxProps}=props;return jsxRuntimeExports.jsx(CheckboxProvider,{__scopeCheckbox,checked,defaultChecked,disabled,required,onCheckedChange,name,form,value,internal_do_not_use_render:({isFormControl})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CheckboxTrigger,{...checkboxProps,ref:forwardedRef,__scopeCheckbox}),isFormControl&&jsxRuntimeExports.jsx(CheckboxBubbleInput,{__scopeCheckbox})]})})});Checkbox$1.displayName=CHECKBOX_NAME;var INDICATOR_NAME="CheckboxIndicator",CheckboxIndicator=reactExports.forwardRef((props,forwardedRef)=>{const{__scopeCheckbox,forceMount,...indicatorProps}=props,context=useCheckboxContext(INDICATOR_NAME,__scopeCheckbox);return jsxRuntimeExports.jsx(Presence,{present:forceMount||isIndeterminate(context.checked)||context.checked===!0,children:jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState(context.checked),"data-disabled":context.disabled?"":void 0,...indicatorProps,ref:forwardedRef,style:{pointerEvents:"none",...props.style}})})});CheckboxIndicator.displayName=INDICATOR_NAME;var BUBBLE_INPUT_NAME="CheckboxBubbleInput",CheckboxBubbleInput=reactExports.forwardRef(({__scopeCheckbox,...props},forwardedRef)=>{const{control,hasConsumerStoppedPropagationRef,checked,defaultChecked,required,disabled,name,value,form,bubbleInput,setBubbleInput}=useCheckboxContext(BUBBLE_INPUT_NAME,__scopeCheckbox),composedRefs=useComposedRefs(forwardedRef,setBubbleInput),prevChecked=usePrevious(checked),controlSize=useSize(control);reactExports.useEffect(()=>{const input=bubbleInput;if(!input)return;const inputProto=window.HTMLInputElement.prototype,setChecked=Object.getOwnPropertyDescriptor(inputProto,"checked").set,bubbles=!hasConsumerStoppedPropagationRef.current;if(prevChecked!==checked&&setChecked){const event=new Event("click",{bubbles});input.indeterminate=isIndeterminate(checked),setChecked.call(input,isIndeterminate(checked)?!1:checked),input.dispatchEvent(event)}},[bubbleInput,prevChecked,checked,hasConsumerStoppedPropagationRef]);const defaultCheckedRef=reactExports.useRef(isIndeterminate(checked)?!1:checked);return jsxRuntimeExports.jsx(Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:defaultChecked??defaultCheckedRef.current,required,disabled,name,value,form,...props,tabIndex:-1,ref:composedRefs,style:{...props.style,...controlSize,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});CheckboxBubbleInput.displayName=BUBBLE_INPUT_NAME;function isFunction(value){return typeof value=="function"}function isIndeterminate(checked){return checked==="indeterminate"}function getState(checked){return isIndeterminate(checked)?"indeterminate":checked?"checked":"unchecked"}const Checkbox=reactExports.forwardRef(({className,...props},ref)=>jsxRuntimeExports.jsx(Checkbox$1,{ref,className:cn("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",className),...props,children:jsxRuntimeExports.jsx(CheckboxIndicator,{className:cn("grid place-content-center text-current"),children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}));Checkbox.displayName=Checkbox$1.displayName;const reportTypes=[{id:"penjualan",label:"Laporan Penjualan",description:"Tren penjualan dan ringkasan transaksi"},{id:"pembayaran",label:"Status Pembayaran",description:"Detail pembayaran pesanan"},{id:"stok",label:"Pemakaian Stok",description:"Laporan inventaris dan pemakaian"}];function ExportLaporanForm(){const[format,setFormat]=reactExports.useState("pdf"),[selectedReports,setSelectedReports]=reactExports.useState(["penjualan","pembayaran"]),[startDate,setStartDate]=reactExports.useState(""),[endDate,setEndDate]=reactExports.useState(""),[isExporting,setIsExporting]=reactExports.useState(!1),today=new Date,firstDay=new Date(today.getFullYear(),today.getMonth(),1),lastDay=new Date(today.getFullYear(),today.getMonth()+1,0),defaultStartDate=firstDay.toISOString().split("T")[0],defaultEndDate=lastDay.toISOString().split("T")[0],handleReportToggle=reportId=>{setSelectedReports(prev=>prev.includes(reportId)?prev.filter(id=>id!==reportId):[...prev,reportId])},handleSelectAll=()=>{selectedReports.length===reportTypes.length?setSelectedReports([]):setSelectedReports(reportTypes.map(r=>r.id))},handleExport=async()=>{if(selectedReports.length===0){toast.error("Pilih minimal satu laporan untuk diekspor");return}if(!startDate||!endDate){toast.error("Pilih periode tanggal terlebih dahulu");return}if(new Date(startDate)>new Date(endDate)){toast.error("Tanggal mulai tidak boleh lebih besar dari tanggal akhir");return}setIsExporting(!0),setTimeout(()=>{const reportNames=selectedReports.map(id=>reportTypes.find(r=>r.id===id)?.label).join(", ");toast.success(`Laporan berhasil diekspor dalam format ${format.toUpperCase()}
${reportNames}`),setIsExporting(!1)},1500)},handleReset=()=>{setFormat("pdf"),setSelectedReports(["penjualan","pembayaran"]),setStartDate(""),setEndDate("")},setQuickPeriod=period=>{const today2=new Date;let start=new Date,end=new Date;if(period==="thisMonth")start=new Date(today2.getFullYear(),today2.getMonth(),1),end=new Date(today2.getFullYear(),today2.getMonth()+1,0);else if(period==="thisQuarter"){const quarterMonth=Math.floor(today2.getMonth()/3)*3;start=new Date(today2.getFullYear(),quarterMonth,1),end=new Date(today2.getFullYear(),quarterMonth+3,0)}else period==="thisYear"&&(start=new Date(today2.getFullYear(),0,1),end=new Date(today2.getFullYear(),11,31));setStartDate(start.toISOString().split("T")[0]),setEndDate(end.toISOString().split("T")[0])};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"flex justify-start mb-6",style:{margin:"10px 0px 10px 50px"},children:jsxRuntimeExports.jsx(Button,{variant:"ghost",asChild:!0,className:"text-muted-foreground hover:text-foreground",children:jsxRuntimeExports.jsxs("a",{href:"./dashboard-laporan.html",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"ArrowLeft",className:"mr-2 h-4 w-4"}),"Kembali"]})})}),jsxRuntimeExports.jsxs("div",{className:"grid gap-6",style:{margin:"0px 50px 0px 50px"},children:[jsxRuntimeExports.jsxs(Card,{className:"card-hover",children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"FileText",className:"h-5 w-5 text-primary"}),"Format Ekspor"]}),jsxRuntimeExports.jsx(CardDescription,{children:"Pilih format file yang Anda inginkan"})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx(RadioGroup,{value:format,onValueChange:value=>setFormat(value),children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg border border-border hover:bg-secondary/50 cursor-pointer transition-colors",children:[jsxRuntimeExports.jsx(RadioGroupItem,{value:"pdf",id:"pdf"}),jsxRuntimeExports.jsxs(Label,{htmlFor:"pdf",className:"flex-1 cursor-pointer",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:"PDF"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-muted-foreground",children:"Format PDF untuk cetak dan arsip"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg border border-border hover:bg-secondary/50 cursor-pointer transition-colors",children:[jsxRuntimeExports.jsx(RadioGroupItem,{value:"excel",id:"excel"}),jsxRuntimeExports.jsxs(Label,{htmlFor:"excel",className:"flex-1 cursor-pointer",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Excel"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-muted-foreground",children:"Format Excel untuk analisis data"})]})]})]})})})]}),jsxRuntimeExports.jsxs(Card,{className:"card-hover",children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"BarChart3",className:"h-5 w-5 text-primary"}),"Pilih Laporan"]}),jsxRuntimeExports.jsx(CardDescription,{children:"Pilih jenis laporan yang ingin diekspor"})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg bg-secondary/30 border border-primary/20",children:[jsxRuntimeExports.jsx(Checkbox,{id:"select-all",checked:selectedReports.length===reportTypes.length,onCheckedChange:handleSelectAll}),jsxRuntimeExports.jsx(Label,{htmlFor:"select-all",className:"flex-1 cursor-pointer font-medium",children:"Pilih Semua Laporan"})]}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:reportTypes.map(report=>jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-2 p-3 rounded-lg border border-border hover:bg-secondary/50 transition-colors",children:[jsxRuntimeExports.jsx(Checkbox,{id:report.id,checked:selectedReports.includes(report.id),onCheckedChange:()=>handleReportToggle(report.id),className:"mt-1"}),jsxRuntimeExports.jsxs(Label,{htmlFor:report.id,className:"flex-1 cursor-pointer",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:report.label}),jsxRuntimeExports.jsx("div",{className:"text-sm text-muted-foreground",children:report.description})]})]},report.id))})]})})]}),jsxRuntimeExports.jsxs(Card,{className:"card-hover",children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Calendar",className:"h-5 w-5 text-primary"}),"Periode Laporan"]}),jsxRuntimeExports.jsx(CardDescription,{children:"Tentukan rentang tanggal untuk laporan"})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{children:"Pilihan Cepat"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:startDate===defaultStartDate&&endDate===defaultEndDate?"default":"outline",size:"sm",onClick:()=>setQuickPeriod("thisMonth"),className:"text-xs",children:"1 Bulan"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",size:"sm",onClick:()=>setQuickPeriod("thisQuarter"),className:"text-xs",children:"Triwulan"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",size:"sm",onClick:()=>setQuickPeriod("thisYear"),className:"text-xs",children:"Tahun"})]})]}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"start-date",children:"Tanggal Mulai"}),jsxRuntimeExports.jsx(Input,{id:"start-date",type:"date",value:startDate||defaultStartDate,onChange:e=>setStartDate(e.target.value),className:"w-full"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"end-date",children:"Tanggal Akhir"}),jsxRuntimeExports.jsx(Input,{id:"end-date",type:"date",value:endDate||defaultEndDate,onChange:e=>setEndDate(e.target.value),className:"w-full"})]})]})]})})]}),selectedReports.length>0&&jsxRuntimeExports.jsx(Card,{className:"bg-primary/5 border-primary/20",children:jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Info",className:"h-5 w-5 text-primary mt-0.5 shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-foreground",children:"Ringkasan Ekspor"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Anda akan mengekspor ",selectedReports.length," laporan dalam format ",format.toUpperCase()," untuk periode ",startDate||defaultStartDate," hingga ",endDate||defaultEndDate]})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 justify-end",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:handleReset,disabled:isExporting,children:[jsxRuntimeExports.jsx(SafeIcon,{name:"RotateCcw",className:"mr-2 h-4 w-4"}),"Reset"]}),jsxRuntimeExports.jsx(Button,{onClick:handleExport,disabled:isExporting||selectedReports.length===0,className:"bg-primary hover:bg-primary/90",children:isExporting?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"mr-2 h-4 w-4 animate-spin"}),"Mengekspor..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Download",className:"mr-2 h-4 w-4"}),"Ekspor Laporan"]})})]})]})]})}export{ExportLaporanForm as default};
