import{j as jsxRuntimeExports}from"./jsx-runtime.mvtouYz0.js";import{r as reactExports}from"./index.DcciWILN.js";import{T as Tabs,a as TabsList,b as TabsTrigger,c as TabsContent}from"./tabs.BmAU3oNV.js";import{C as Card,b as CardHeader,c as CardTitle,d as CardDescription,a as CardContent}from"./card.D0gylVsf.js";import{S as SafeIcon,B as Button}from"./SafeIcon.CAGsavDo.js";import{P as PageHeader}from"./PageHeader.ChFr_oMu.js";import{I as Input}from"./input.C9ryBhC0.js";import{L as Label}from"./label.BFF1cpbq.js";import{T as Textarea}from"./textarea.CmILhP_C.js";import{t as toast}from"./index.fAd_ikgp.js";import{companyProfileApi}from"./api.Dr7hS9Y8.js";import{S as Select,a as SelectTrigger,b as SelectValue,c as SelectContent,d as SelectItem}from"./select.Dd50uIHU.js";import{S as Switch}from"./switch.C0Q8Ircf.js";import{c as clearAppSettingsCache}from"./useAppSettings.DmDEw9Dm.js";import"./index.BpQ989z7.js";import"./index.PIAPtHoh.js";import"./index.ubNQCTBn.js";import"./index.DQDOfy24.js";import"./index.BStXkqMp.js";import"./index.YpXgcoRz.js";import"./index.Dovp0-D8.js";import"./index.Drh0kMGk.js";import"./index.CdmyERTi.js";import"./index.DGt6JTY0.js";import"./index.DZiLsHox.js";import"./index.BFpcrWlj.js";import"./index.9MihlNbL.js";import"./index.BhA3i5Wo.js";import"./index.BaF2FVWY.js";import"./chevron-up.BBBXIirx.js";import"./check.TUgVKQyo.js";const initialProfile={companyName:"",address:"",phone:"",email:"",picName:"",sppbeNumber:"",region:"",logo:null};function CompanyProfileSettings(){const[profile,setProfile]=reactExports.useState(initialProfile),[agenId,setAgenId]=reactExports.useState(null),[isLoading,setIsLoading]=reactExports.useState(!0),[isSaving,setIsSaving]=reactExports.useState(!1),[logoPreview,setLogoPreview]=reactExports.useState(null);reactExports.useEffect(()=>{loadProfile()},[]);const loadProfile=async()=>{setIsLoading(!0);try{const data=await companyProfileApi.get();setProfile({companyName:data.company_name||"",address:data.address||"",phone:data.phone||"",email:data.email||"",picName:data.pic_name||"",sppbeNumber:data.sppbe_number||"",region:data.region||"",logo:data.logo_url||null}),setAgenId(data.id||null),data.logo_url&&setLogoPreview(data.logo_url)}catch(error){console.error("Failed to load company profile:",error),toast.error("Gagal memuat profil perusahaan")}finally{setIsLoading(!1)}},handleChange=(field,value)=>{setProfile(prev=>({...prev,[field]:value}))},handleLogoChange=e=>{const file=e.target.files?.[0];if(file){if(file.size>2*1024*1024){toast.error("Ukuran file maksimal 2MB");return}const reader=new FileReader;reader.onloadend=()=>{setLogoPreview(reader.result),setProfile(prev=>({...prev,logo:reader.result}))},reader.readAsDataURL(file)}},handleSave=async()=>{if(!profile.companyName.trim()){toast.error("Nama perusahaan wajib diisi");return}if(!profile.address.trim()){toast.error("Alamat wajib diisi");return}setIsSaving(!0);try{await companyProfileApi.update({company_name:profile.companyName,address:profile.address,phone:profile.phone||void 0,email:profile.email||void 0,pic_name:profile.picName||void 0,sppbe_number:profile.sppbeNumber||void 0,region:profile.region||void 0,logo_url:profile.logo||void 0}),toast.success("Profil perusahaan berhasil disimpan")}catch(error){toast.error(error.message||"Gagal menyimpan profil")}finally{setIsSaving(!1)}};return isLoading?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-12",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"h-8 w-8 animate-spin text-primary"}),jsxRuntimeExports.jsx("span",{className:"ml-3 text-muted-foreground",children:"Memuat profil..."})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"border shadow-sm",children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-primary/20 to-primary/10",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Building2",className:"h-5 w-5 text-primary"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:"Informasi Perusahaan"}),jsxRuntimeExports.jsx(CardDescription,{children:"Data distributor yang muncul di invoice dan laporan PDF"})]})]})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-5",children:[agenId&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-blue-500 text-white",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Key",className:"h-5 w-5"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"ID Agen (Kode Koneksi)"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-blue-800 tracking-wider",children:agenId})]})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",className:"border-blue-300 text-blue-600 hover:bg-blue-100",onClick:()=>{navigator.clipboard.writeText(agenId),toast.success("ID Agen disalin!")},children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Copy",className:"h-4 w-4 mr-1"}),"Salin"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-6 p-4 rounded-xl bg-muted/30 border border-dashed",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:logoPreview?jsxRuntimeExports.jsx("img",{src:logoPreview,alt:"Logo Preview",className:"w-24 h-24 rounded-xl object-cover border-2 border-primary/20"}):jsxRuntimeExports.jsx("div",{className:"w-24 h-24 rounded-xl bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/30",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Image",className:"h-8 w-8 text-muted-foreground/50"})})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-2",children:[jsxRuntimeExports.jsx(Label,{className:"text-sm font-medium",children:"Logo Perusahaan"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Upload logo untuk ditampilkan di header dan invoice. Format: JPG, PNG. Maks 2MB."}),jsxRuntimeExports.jsx(Input,{type:"file",accept:"image/jpeg,image/png",onChange:handleLogoChange,className:"max-w-xs h-9 text-sm cursor-pointer"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"companyName",className:"text-sm font-medium",children:["Nama Distributor/Agen ",jsxRuntimeExports.jsx("span",{className:"text-destructive",children:"*"})]}),jsxRuntimeExports.jsx(Input,{id:"companyName",value:profile.companyName,onChange:e=>handleChange("companyName",e.target.value),placeholder:"PT. Sigap Elpiji Nusantara",className:"h-10"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"sppbeNumber",className:"text-sm font-medium",children:"Nomor SPPBE/SIID"}),jsxRuntimeExports.jsx(Input,{id:"sppbeNumber",value:profile.sppbeNumber,onChange:e=>handleChange("sppbeNumber",e.target.value),placeholder:"997904",className:"h-10"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Nomor Surat Penunjukan / SIID To"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"address",className:"text-sm font-medium",children:["Alamat Lengkap ",jsxRuntimeExports.jsx("span",{className:"text-destructive",children:"*"})]}),jsxRuntimeExports.jsx(Textarea,{id:"address",value:profile.address,onChange:e=>handleChange("address",e.target.value),placeholder:"Jl. HR Rasuna Said Kav. X-8, No. 5E, Jakarta Selatan",className:"min-h-[80px] resize-none"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"region",className:"text-sm font-medium",children:"Wilayah/Region"}),jsxRuntimeExports.jsx(Input,{id:"region",value:profile.region,onChange:e=>handleChange("region",e.target.value),placeholder:"JAWA BARAT, KABUPATEN CIANJUR",className:"h-10"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Wilayah operasional untuk laporan Pertamina"})]})]})]}),jsxRuntimeExports.jsxs(Card,{className:"border shadow-sm",children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-blue-500/20 to-blue-500/10",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Phone",className:"h-5 w-5 text-blue-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:"Kontak"}),jsxRuntimeExports.jsx(CardDescription,{children:"Informasi kontak untuk keperluan komunikasi"})]})]})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"phone",className:"text-sm font-medium",children:"Nomor Telepon"}),jsxRuntimeExports.jsx(Input,{id:"phone",type:"tel",value:profile.phone,onChange:e=>handleChange("phone",e.target.value),placeholder:"021-98765432",className:"h-10"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),jsxRuntimeExports.jsx(Input,{id:"email",type:"email",value:profile.email,onChange:e=>handleChange("email",e.target.value),placeholder:"info@distributor.com",className:"h-10"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"picName",className:"text-sm font-medium",children:"Nama PIC (Person In Charge)"}),jsxRuntimeExports.jsx(Input,{id:"picName",value:profile.picName,onChange:e=>handleChange("picName",e.target.value),placeholder:"Nama penanggung jawab",className:"h-10"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:loadProfile,className:"gap-2",disabled:isLoading,children:[jsxRuntimeExports.jsx(SafeIcon,{name:"RotateCcw",className:"h-4 w-4"}),"Reset"]}),jsxRuntimeExports.jsx(Button,{onClick:handleSave,disabled:isSaving,className:"gap-2 bg-primary hover:bg-primary/90 min-w-[140px]",children:isSaving?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"h-4 w-4 animate-spin"}),"Menyimpan..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Save",className:"h-4 w-4"}),"Simpan Profil"]})})]})]})}const initialSettings$1={theme:"system",language:"id",dateFormat:"DD/MM/YYYY",accentColor:"green"},themeOptions=[{value:"light",label:"Terang",icon:"Sun",description:"Mode terang untuk penggunaan siang hari"},{value:"dark",label:"Gelap",icon:"Moon",description:"Mode gelap untuk penggunaan malam hari"},{value:"system",label:"Sistem",icon:"Monitor",description:"Ikuti pengaturan sistem operasi"}],accentColors=[{value:"green",label:"Hijau",color:"bg-emerald-600",description:"Default Pertamina"},{value:"blue",label:"Biru",color:"bg-blue-600",description:"Professional Blue"},{value:"red",label:"Merah",color:"bg-red-600",description:"Bold & Modern"}];function AppearanceSettings(){const[settings,setSettings]=reactExports.useState(initialSettings$1),[isSaving,setIsSaving]=reactExports.useState(!1);reactExports.useEffect(()=>{const savedTheme=localStorage.getItem("theme"),savedAccent=localStorage.getItem("accentColor");savedTheme&&setSettings(prev=>({...prev,theme:savedTheme})),savedAccent&&(setSettings(prev=>({...prev,accentColor:savedAccent})),document.documentElement.setAttribute("data-accent",savedAccent))},[]);const handleThemeChange=theme=>{setSettings(prev=>({...prev,theme}));const root=document.documentElement;if(theme==="system"){const systemTheme=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";root.classList.remove("light","dark"),root.classList.add(systemTheme)}else root.classList.remove("light","dark"),root.classList.add(theme)},handleChange=(field,value)=>{setSettings(prev=>({...prev,[field]:value})),field==="accentColor"&&document.documentElement.setAttribute("data-accent",value)},handleSave=async()=>{setIsSaving(!0);try{await new Promise(resolve=>setTimeout(resolve,500)),localStorage.setItem("theme",settings.theme),localStorage.setItem("accentColor",settings.accentColor),localStorage.setItem("appearance_settings",JSON.stringify(settings)),toast.success("Pengaturan tampilan berhasil disimpan")}catch{toast.error("Gagal menyimpan pengaturan")}finally{setIsSaving(!1)}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"border shadow-sm",children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-amber-500/20 to-amber-500/10",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Palette",className:"h-5 w-5 text-amber-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:"Tema Aplikasi"}),jsxRuntimeExports.jsx(CardDescription,{children:"Pilih tampilan yang nyaman untuk mata Anda"})]})]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"grid gap-3 sm:grid-cols-3",children:themeOptions.map(option=>jsxRuntimeExports.jsxs("button",{onClick:()=>handleThemeChange(option.value),className:`relative flex flex-col items-center gap-3 p-5 rounded-xl border-2 transition-all duration-300 hover:border-primary/50 hover:bg-muted/50 group
                  ${settings.theme===option.value?"border-primary bg-primary/5 shadow-sm":"border-muted-foreground/20"}`,children:[jsxRuntimeExports.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-xl transition-all duration-300
                  ${settings.theme===option.value?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground group-hover:bg-primary/10 group-hover:text-primary"}`,children:jsxRuntimeExports.jsx(SafeIcon,{name:option.icon,className:"h-6 w-6"})}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:`font-medium ${settings.theme===option.value?"text-primary":"text-foreground"}`,children:option.label}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:option.description})]}),settings.theme===option.value&&jsxRuntimeExports.jsx("div",{className:"absolute top-3 right-3 flex h-5 w-5 items-center justify-center rounded-full bg-primary text-primary-foreground",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Check",className:"h-3 w-3"})})]},option.value))})})]}),jsxRuntimeExports.jsxs(Card,{className:"border shadow-sm",children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-purple-500/20 to-purple-500/10",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Brush",className:"h-5 w-5 text-purple-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:"Warna Aksen"}),jsxRuntimeExports.jsx(CardDescription,{children:"Pilih warna utama untuk tombol dan elemen interaktif"})]})]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-3",children:accentColors.map(color=>jsxRuntimeExports.jsxs("button",{onClick:()=>handleChange("accentColor",color.value),className:`flex items-center gap-3 px-4 py-2.5 rounded-lg border-2 transition-all duration-200
                  ${settings.accentColor===color.value?"border-primary bg-primary/5":"border-transparent bg-muted/50 hover:bg-muted"}`,children:[jsxRuntimeExports.jsx("div",{className:`w-5 h-5 rounded-full ${color.color}`}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:color.label}),settings.accentColor===color.value&&jsxRuntimeExports.jsx(SafeIcon,{name:"Check",className:"h-4 w-4 text-primary"})]},color.value))})})]}),jsxRuntimeExports.jsxs(Card,{className:"border shadow-sm",children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-cyan-500/20 to-cyan-500/10",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Globe",className:"h-5 w-5 text-cyan-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:"Regional"}),jsxRuntimeExports.jsx(CardDescription,{children:"Pengaturan bahasa dan format tanggal"})]})]})}),jsxRuntimeExports.jsx(CardContent,{className:"space-y-4",children:jsxRuntimeExports.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"language",className:"text-sm font-medium",children:"Bahasa"}),jsxRuntimeExports.jsxs(Select,{value:settings.language,onValueChange:v=>handleChange("language",v),children:[jsxRuntimeExports.jsx(SelectTrigger,{id:"language",className:"h-10",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"id",children:"ðŸ‡®ðŸ‡© Bahasa Indonesia"}),jsxRuntimeExports.jsx(SelectItem,{value:"en",children:"ðŸ‡ºðŸ‡¸ English"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"dateFormat",className:"text-sm font-medium",children:"Format Tanggal"}),jsxRuntimeExports.jsxs(Select,{value:settings.dateFormat,onValueChange:v=>handleChange("dateFormat",v),children:[jsxRuntimeExports.jsx(SelectTrigger,{id:"dateFormat",className:"h-10",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"DD/MM/YYYY",children:"DD/MM/YYYY (31/12/2024)"}),jsxRuntimeExports.jsx(SelectItem,{value:"MM/DD/YYYY",children:"MM/DD/YYYY (12/31/2024)"}),jsxRuntimeExports.jsx(SelectItem,{value:"YYYY-MM-DD",children:"YYYY-MM-DD (2024-12-31)"})]})]})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:()=>setSettings(initialSettings$1),className:"gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"RotateCcw",className:"h-4 w-4"}),"Reset"]}),jsxRuntimeExports.jsx(Button,{onClick:handleSave,disabled:isSaving,className:"gap-2 bg-primary hover:bg-primary/90 min-w-[140px]",children:isSaving?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"h-4 w-4 animate-spin"}),"Menyimpan..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Save",className:"h-4 w-4"}),"Simpan Tampilan"]})})]})]})}const initialSettings={criticalStockLimit:10,invoicePrefix:"INV-",ppnPercentage:11,priceRounding:"100",emailNotifications:!0,stockAlerts:!0,autoGenerateCode:!0,orderCodePrefix:"PO-"};function ApplicationSettings(){const[settings,setSettings]=reactExports.useState(initialSettings),[isSaving,setIsSaving]=reactExports.useState(!1),[isLoading,setIsLoading]=reactExports.useState(!0);reactExports.useEffect(()=>{(async()=>{try{const profile=await companyProfileApi.get();setSettings(prev=>({...prev,ppnPercentage:Number(profile.ppn_rate)||12,criticalStockLimit:profile.critical_stock_limit||10,invoicePrefix:profile.invoice_prefix||"INV-",orderCodePrefix:profile.order_code_prefix||"ORD-"}))}catch(error){console.error("Failed to load settings:",error)}finally{setIsLoading(!1)}})()},[]);const handleChange=(field,value)=>{setSettings(prev=>({...prev,[field]:value}))},handleSave=async()=>{setIsSaving(!0);try{await companyProfileApi.update({ppn_rate:settings.ppnPercentage,critical_stock_limit:settings.criticalStockLimit,invoice_prefix:settings.invoicePrefix,order_code_prefix:settings.orderCodePrefix}),clearAppSettingsCache(),toast.success("Pengaturan aplikasi berhasil disimpan")}catch(error){console.error("Failed to save settings:",error),toast.error("Gagal menyimpan pengaturan")}finally{setIsSaving(!1)}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"border shadow-sm",children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-orange-500/20 to-orange-500/10",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Package",className:"h-5 w-5 text-orange-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:"Pengaturan Stok"}),jsxRuntimeExports.jsx(CardDescription,{children:"Konfigurasi batas stok dan notifikasi"})]})]})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-5",children:[jsxRuntimeExports.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"criticalStockLimit",className:"text-sm font-medium",children:"Batas Stok Kritis (Tabung)"}),jsxRuntimeExports.jsx(Input,{id:"criticalStockLimit",type:"number",min:"1",max:"1000",value:settings.criticalStockLimit,onChange:e=>handleChange("criticalStockLimit",parseInt(e.target.value)||0),className:"h-10"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Notifikasi akan muncul jika stok di bawah angka ini"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-muted/30 border",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-sm",children:"Peringatan Stok Menipis"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Tampilkan notifikasi saat stok di bawah batas kritis"})]}),jsxRuntimeExports.jsx(Switch,{checked:settings.stockAlerts,onCheckedChange:checked=>handleChange("stockAlerts",checked)})]})]})]}),jsxRuntimeExports.jsxs(Card,{className:"border shadow-sm",children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-green-500/20 to-green-500/10",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Receipt",className:"h-5 w-5 text-green-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:"Invoice & Harga"}),jsxRuntimeExports.jsx(CardDescription,{children:"Pengaturan format invoice dan perhitungan harga"})]})]})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-5",children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"invoicePrefix",className:"text-sm font-medium",children:"Prefix Invoice"}),jsxRuntimeExports.jsx(Input,{id:"invoicePrefix",value:settings.invoicePrefix,onChange:e=>handleChange("invoicePrefix",e.target.value),placeholder:"INV-",className:"h-10"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground",children:["Contoh hasil: ",settings.invoicePrefix,"2024-0001"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"orderCodePrefix",className:"text-sm font-medium",children:"Prefix Kode Pesanan"}),jsxRuntimeExports.jsx(Input,{id:"orderCodePrefix",value:settings.orderCodePrefix,onChange:e=>handleChange("orderCodePrefix",e.target.value),placeholder:"PO-",className:"h-10"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground",children:["Contoh hasil: ",settings.orderCodePrefix,"2024-0001"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"ppnPercentage",className:"text-sm font-medium",children:"Persentase PPN (%)"}),jsxRuntimeExports.jsx(Input,{id:"ppnPercentage",type:"number",min:"0",max:"100",value:settings.ppnPercentage,onChange:e=>handleChange("ppnPercentage",parseFloat(e.target.value)||0),className:"h-10"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Tarif PPN yang berlaku untuk penjualan"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"priceRounding",className:"text-sm font-medium",children:"Pembulatan Harga"}),jsxRuntimeExports.jsxs(Select,{value:settings.priceRounding,onValueChange:v=>handleChange("priceRounding",v),children:[jsxRuntimeExports.jsx(SelectTrigger,{id:"priceRounding",className:"h-10",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"1",children:"Tidak ada pembulatan"}),jsxRuntimeExports.jsx(SelectItem,{value:"100",children:"Ke Rp 100 terdekat"}),jsxRuntimeExports.jsx(SelectItem,{value:"1000",children:"Ke Rp 1.000 terdekat"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-muted/30 border",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-sm",children:"Auto-Generate Kode Pesanan"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Buat kode pesanan secara otomatis saat membuat order baru"})]}),jsxRuntimeExports.jsx(Switch,{checked:settings.autoGenerateCode,onCheckedChange:checked=>handleChange("autoGenerateCode",checked)})]})]})]}),jsxRuntimeExports.jsxs(Card,{className:"border shadow-sm",children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-blue-500/20 to-blue-500/10",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Bell",className:"h-5 w-5 text-blue-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:"Notifikasi"}),jsxRuntimeExports.jsx(CardDescription,{children:"Pengaturan pemberitahuan sistem"})]})]})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-muted/30 border",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-sm",children:"Notifikasi Email"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Kirim email notifikasi untuk pesanan baru dan pembayaran"})]}),jsxRuntimeExports.jsx(Switch,{checked:settings.emailNotifications,onCheckedChange:checked=>handleChange("emailNotifications",checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-primary/5 border border-primary/20",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Info",className:"h-5 w-5 text-primary mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-foreground",children:"Konfigurasi Email"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Untuk mengaktifkan notifikasi email, pastikan email perusahaan sudah dikonfigurasi di tab Profil Perusahaan."})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:()=>setSettings(initialSettings),className:"gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"RotateCcw",className:"h-4 w-4"}),"Reset"]}),jsxRuntimeExports.jsx(Button,{onClick:handleSave,disabled:isSaving,className:"gap-2 bg-primary hover:bg-primary/90 min-w-[140px]",children:isSaving?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"h-4 w-4 animate-spin"}),"Menyimpan..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Save",className:"h-4 w-4"}),"Simpan Pengaturan"]})})]})]})}const PROFILE_CACHE_KEY="sim4lon_user_profile";function getUserRole(){if(typeof window>"u")return"OPERATOR";try{const cached=sessionStorage.getItem(PROFILE_CACHE_KEY);if(cached)return JSON.parse(cached).role||"OPERATOR"}catch{}return"OPERATOR"}function SettingsPage(){const[userRole,setUserRole]=reactExports.useState("ADMIN"),allTabs=[{id:"profile",label:"Profil Perusahaan",icon:"Building2",adminOnly:!0},{id:"appearance",label:"Tampilan",icon:"Palette"},{id:"application",label:"Aplikasi",icon:"Settings2",adminOnly:!0}],visibleTabs=userRole==="ADMIN"?allTabs:allTabs.filter(tab=>!tab.adminOnly),[activeTab,setActiveTab]=reactExports.useState(visibleTabs[0]?.id||"appearance");return reactExports.useEffect(()=>{const role=getUserRole();setUserRole(role);const tabs=role==="ADMIN"?allTabs:allTabs.filter(t=>!t.adminOnly);tabs.find(t=>t.id===activeTab)||setActiveTab(tabs[0]?.id||"appearance")},[]),jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-6 p-4 sm:p-6 lg:p-8 bg-gradient-to-br from-background via-background to-secondary/5",children:[jsxRuntimeExports.jsx(PageHeader,{title:"Pengaturan",subtitle:userRole==="ADMIN"?"Kelola konfigurasi dan preferensi aplikasi SIM4LON":"Atur tampilan dan preferensi Anda"}),jsxRuntimeExports.jsx(Card,{className:"border-0 shadow-lg animate-fadeInUp overflow-hidden",style:{animationDelay:"0.1s"},children:jsxRuntimeExports.jsxs(Tabs,{value:activeTab,onValueChange:setActiveTab,className:"w-full",children:[jsxRuntimeExports.jsx("div",{className:"border-b bg-gradient-to-r from-muted/50 to-muted/30",children:jsxRuntimeExports.jsx(TabsList,{className:"w-full justify-start gap-0 bg-transparent border-0 h-auto p-0 rounded-none",children:visibleTabs.map(tab=>jsxRuntimeExports.jsxs(TabsTrigger,{value:tab.id,className:`relative flex items-center gap-2 px-6 py-4 text-sm font-medium rounded-none border-0 transition-all duration-300 
                    data-[state=active]:bg-background data-[state=active]:shadow-sm
                    data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:text-foreground data-[state=inactive]:hover:bg-background/50`,children:[jsxRuntimeExports.jsx(SafeIcon,{name:tab.icon,className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:tab.label}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary scale-x-0 transition-transform duration-300 data-[state=active]:scale-x-100","data-state":activeTab===tab.id?"active":"inactive"})]},tab.id))})}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[visibleTabs.some(t=>t.id==="profile")&&jsxRuntimeExports.jsx(TabsContent,{value:"profile",className:"mt-0 animate-fadeIn",children:jsxRuntimeExports.jsx(CompanyProfileSettings,{})}),jsxRuntimeExports.jsx(TabsContent,{value:"appearance",className:"mt-0 animate-fadeIn",children:jsxRuntimeExports.jsx(AppearanceSettings,{})}),visibleTabs.some(t=>t.id==="application")&&jsxRuntimeExports.jsx(TabsContent,{value:"application",className:"mt-0 animate-fadeIn",children:jsxRuntimeExports.jsx(ApplicationSettings,{})})]})]})})]})}export{SettingsPage as default};
