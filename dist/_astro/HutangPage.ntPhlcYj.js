import{j as jsxRuntimeExports}from"./jsx-runtime.mvtouYz0.js";import{r as reactExports}from"./index.DcciWILN.js";import{C as Card,a as CardContent,b as CardHeader,c as CardTitle}from"./card.D0gylVsf.js";import{S as SafeIcon,B as Button}from"./SafeIcon.CAGsavDo.js";import{B as Badge}from"./badge.DZiJ6zSB.js";import{consumerOrdersApi}from"./api.Dr7hS9Y8.js";import{t as toast}from"./index.fAd_ikgp.js";import"./index.PIAPtHoh.js";import"./index.ubNQCTBn.js";function HutangPage(){const[orders,setOrders]=reactExports.useState([]),[totalHutang,setTotalHutang]=reactExports.useState(0),[isLoading,setIsLoading]=reactExports.useState(!0),fetchOrders=async()=>{try{setIsLoading(!0);const response=await consumerOrdersApi.getAll(1,100,{paymentStatus:"HUTANG"});setOrders(response.data);const total=response.data.reduce((sum,order)=>sum+order.total_amount,0);setTotalHutang(total)}catch(error){console.error("Failed to fetch orders:",error),toast.error("Gagal memuat data hutang")}finally{setIsLoading(!1)}};reactExports.useEffect(()=>{fetchOrders()},[]);const handleMarkAsPaid=async order=>{try{await consumerOrdersApi.update(order.id,{payment_status:"LUNAS"}),toast.success("Berhasil dilunasi!"),fetchOrders()}catch(error){toast.error(error.message||"Gagal melunasi")}},formatCurrency=value=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(value),formatDate=dateString=>new Date(dateString).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"});return isLoading?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"h-8 w-8 animate-spin text-blue-500"})}):jsxRuntimeExports.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-900 min-h-screen",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6 flex items-center gap-3 animate-fadeInDown",children:[jsxRuntimeExports.jsx("div",{className:"h-12 w-1.5 rounded-full bg-gradient-to-b from-orange-500 via-orange-400 to-amber-500 animate-lineGrow"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Hutang"}),jsxRuntimeExports.jsxs("p",{className:"text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Receipt",className:"h-4 w-4 animate-pulse"}),"Daftar piutang yang belum lunas"]})]})]}),jsxRuntimeExports.jsx("div",{className:"animate-slideInBlur stagger-1 mb-6",style:{opacity:0},children:jsxRuntimeExports.jsxs(Card,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white border-0 shadow-lg shadow-orange-500/20 hover:shadow-xl hover:shadow-orange-500/30 transition-all duration-300 hover:-translate-y-1 hover:scale-[1.01] relative overflow-hidden group",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/15 rounded-full -translate-y-1/2 translate-x-1/2 animate-floatOrb"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2 animate-floatOrb-delayed"}),jsxRuntimeExports.jsx(CardContent,{className:"p-6 relative",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-orange-100 text-sm mb-1",children:"Total Hutang"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-bold",children:formatCurrency(totalHutang)}),jsxRuntimeExports.jsxs("p",{className:"text-orange-100 text-sm mt-2",children:[orders.length," transaksi belum lunas"]})]}),jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center transition-transform duration-300 group-hover:scale-110 group-hover:rotate-12",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Receipt",className:"h-8 w-8"})})]})})]})}),jsxRuntimeExports.jsxs(Card,{className:"shadow-lg",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{children:"Daftar Hutang"})}),jsxRuntimeExports.jsx(CardContent,{children:orders.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12 text-slate-500",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"CheckCircle",className:"h-16 w-16 mx-auto mb-4 text-green-500"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium",children:"Tidak ada hutang!"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Semua transaksi sudah lunas"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:orders.map(order=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800 rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 dark:bg-orange-900 flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"User",className:"h-6 w-6 text-orange-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:order.consumers?.name||order.consumer_name||"Walk-in"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-500",children:[order.lpg_type," × ",order.qty," • ",formatDate(order.sale_date)]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("p",{className:"font-bold text-lg text-orange-600",children:formatCurrency(order.total_amount)}),jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200",children:"Hutang"})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>handleMarkAsPaid(order),className:"bg-green-600 hover:bg-green-700",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Check",className:"mr-1 h-4 w-4"}),"Lunasi"]})]})]},order.id))})})]})]})}export{HutangPage as default};
