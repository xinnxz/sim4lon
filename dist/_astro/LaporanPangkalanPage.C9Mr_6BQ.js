import{j as jsxRuntimeExports}from"./jsx-runtime.mvtouYz0.js";import{r as reactExports}from"./index.DcciWILN.js";import{C as Card,b as CardHeader,c as CardTitle,a as CardContent,d as CardDescription}from"./card.D0gylVsf.js";import{S as SafeIcon,B as Button}from"./SafeIcon.CAGsavDo.js";import{B as Badge}from"./badge.DZiJ6zSB.js";import{consumerOrdersApi,lpgPricesApi,expensesApi,authApi}from"./api.Dr7hS9Y8.js";import{u as utils,w as writeFileSync,E,a as autoTable}from"./jspdf.plugin.autotable.tHrVzh7j.js";import{t as toast}from"./index.fAd_ikgp.js";import{D as DropdownMenu,a as DropdownMenuTrigger,b as DropdownMenuContent,c as DropdownMenuItem}from"./dropdown-menu.CyUKnKxT.js";import{R as ResponsiveContainer,T as Tooltip,B as Bar}from"./generateCategoricalChart.Jvaki1lA.js";import{B as BarChart}from"./BarChart.C5wt_Obv.js";import{C as CartesianGrid,X as XAxis,Y as YAxis}from"./YAxis.DHdzTV6E.js";import{A as AreaChart,a as Area}from"./AreaChart.D112rpOF.js";import"./index.PIAPtHoh.js";import"./index.ubNQCTBn.js";import"./index.BpQ989z7.js";import"./index.YpXgcoRz.js";import"./index.Dovp0-D8.js";import"./index.BStXkqMp.js";import"./index.Drh0kMGk.js";import"./index.DZiLsHox.js";import"./index.BFpcrWlj.js";import"./index.9MihlNbL.js";import"./index.CdmyERTi.js";import"./index.DQDOfy24.js";import"./chevron-right.oaN48PMp.js";import"./check.TUgVKQyo.js";const CustomTooltip=({active,payload,label})=>active&&payload&&payload.length?jsxRuntimeExports.jsxs("div",{className:"bg-slate-900/95 backdrop-blur-sm px-4 py-3 rounded-xl shadow-2xl border border-slate-700",children:[jsxRuntimeExports.jsx("p",{className:"text-white font-semibold text-sm mb-2",children:label}),payload.map((item,index)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:item.color}}),jsxRuntimeExports.jsxs("span",{className:"text-slate-300",children:[item.name,":"]}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(item.value)})]},index))]}):null;function LaporanPangkalanPage(){const[profile,setProfile]=reactExports.useState(null),[chartData,setChartData]=reactExports.useState([]),[recentSales,setRecentSales]=reactExports.useState([]),[isLoading,setIsLoading]=reactExports.useState(!0),[error,setError]=reactExports.useState(null),[selectedPeriod,setSelectedPeriod]=reactExports.useState("hariini"),[customStartDate,setCustomStartDate]=reactExports.useState(""),[customEndDate,setCustomEndDate]=reactExports.useState(""),[showCustom,setShowCustom]=reactExports.useState(!1),[allSales,setAllSales]=reactExports.useState([]),[prices,setPrices]=reactExports.useState([]),[allExpenses,setAllExpenses]=reactExports.useState([]),[filteredExpenses,setFilteredExpenses]=reactExports.useState([]);reactExports.useEffect(()=>{(async()=>{try{setIsLoading(!0),setError(null);const now=new Date,monthStart=`${now.getFullYear()}-${String(now.getMonth()+1).padStart(2,"0")}-01`,monthEnd=new Date(now.getFullYear(),now.getMonth()+1,0).toISOString().split("T")[0],[chartDataResult,allSalesResult,pricesData,expensesData]=await Promise.all([consumerOrdersApi.getChartData(),consumerOrdersApi.getRecent(200),lpgPricesApi.getAll(),expensesApi.getAll(monthStart,monthEnd)]);setChartData(chartDataResult||[]),setAllSales(allSalesResult||[]),setPrices(pricesData||[]),setAllExpenses(expensesData||[]);const profileData=await authApi.getProfile();setProfile(profileData)}catch(err){console.error("❌ [Laporan] Error:",err),setError(`Gagal memuat data: ${err?.message||"Unknown error"}`)}finally{setIsLoading(!1)}})()},[]),reactExports.useEffect(()=>{if(allSales.length===0)return;const now=new Date;let startDate,endDate=new Date(now.getFullYear(),now.getMonth(),now.getDate(),23,59,59,999);switch(selectedPeriod){case"hariini":startDate=new Date(now.getFullYear(),now.getMonth(),now.getDate(),0,0,0);break;case"7hari":startDate=new Date(now.getFullYear(),now.getMonth(),now.getDate()-6,0,0,0);break;case"mingguini":{const dayOfWeek=now.getDay(),daysToSubtract=dayOfWeek===0?6:dayOfWeek-1;startDate=new Date(now.getFullYear(),now.getMonth(),now.getDate()-daysToSubtract,0,0,0);break}case"bulanini":startDate=new Date(now.getFullYear(),now.getMonth(),1,0,0,0);break;case"custom":customStartDate&&customEndDate?(startDate=new Date(customStartDate),endDate=new Date(customEndDate+"T23:59:59")):startDate=new Date(now.getFullYear(),now.getMonth(),now.getDate(),0,0,0);break;default:startDate=new Date(now.getFullYear(),now.getMonth(),now.getDate(),0,0,0)}const startTime=startDate.getTime(),endTime=endDate.getTime(),filtered=allSales.filter(sale=>{const saleTime=new Date(sale.sale_date).getTime();return saleTime>=startTime&&saleTime<=endTime}),filteredExp=allExpenses.filter(exp=>{const expTime=new Date(exp.expense_date).getTime();return expTime>=startTime&&expTime<=endTime});setRecentSales(filtered),setFilteredExpenses(filteredExp)},[selectedPeriod,customStartDate,customEndDate,allSales,allExpenses]);const handleApplyCustomDate=()=>{setSelectedPeriod("custom")},formatCurrency=value=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(value),formatCurrencyShort=value=>value>=1e6?`${(value/1e6).toFixed(1)}jt`:value>=1e3?`${(value/1e3).toFixed(0)}rb`:value.toString(),formatDate=dateStr=>new Date(dateStr).toLocaleDateString("id-ID",{day:"numeric",month:"short"}),getCostPrice=lpgType=>{const priceData=prices.find(p=>p.lpg_type===lpgType);return priceData?Number(priceData.cost_price):{gr220:17e3,kg3:16e3,kg5:52e3,kg12:142e3,kg50:59e4}[lpgType]||16e3},filteredTotals=reactExports.useMemo(()=>recentSales.reduce((acc,sale)=>{const costPrice=getCostPrice(sale.lpg_type),modal=sale.qty*costPrice,penjualan=Number(sale.total_amount),marginKotor2=penjualan-modal;return{qty:acc.qty+sale.qty,penjualan:acc.penjualan+penjualan,modal:acc.modal+modal,marginKotor:acc.marginKotor+marginKotor2,laba:acc.laba+marginKotor2}},{qty:0,penjualan:0,modal:0,marginKotor:0,laba:0}),[recentSales,prices]),dailySummaryArray=reactExports.useMemo(()=>{const summary=recentSales.reduce((acc,sale)=>{const dateKey=new Date(sale.sale_date).toISOString().split("T")[0];acc[dateKey]||(acc[dateKey]={date:dateKey,qty:0,penjualan:0,modal:0,pengeluaran:0,marginKotor:0,laba:0});const costPrice=getCostPrice(sale.lpg_type),modal=sale.qty*costPrice,penjualan=Number(sale.total_amount),margin=penjualan-modal;return acc[dateKey].qty+=sale.qty,acc[dateKey].penjualan+=penjualan,acc[dateKey].modal+=modal,acc[dateKey].marginKotor+=margin,acc},{});return filteredExpenses.forEach(exp=>{const dateKey=new Date(exp.expense_date).toISOString().split("T")[0];summary[dateKey]||(summary[dateKey]={date:dateKey,qty:0,penjualan:0,modal:0,pengeluaran:0,marginKotor:0,laba:0}),summary[dateKey].pengeluaran+=Number(exp.amount)}),Object.values(summary).forEach(day=>{day.laba=day.marginKotor-day.pengeluaran}),Object.values(summary).sort((a,b)=>new Date(b.date).getTime()-new Date(a.date).getTime())},[recentSales,prices,filteredExpenses]),totalPengeluaran=reactExports.useMemo(()=>filteredExpenses.reduce((sum,exp)=>sum+Number(exp.amount),0),[filteredExpenses]),totals={qty:filteredTotals.qty,penjualan:filteredTotals.penjualan,modal:filteredTotals.modal,pengeluaran:totalPengeluaran,laba:filteredTotals.laba-totalPengeluaran},marginKotor=filteredTotals.marginKotor,marginPercentage=totals.penjualan>0?(marginKotor/totals.penjualan*100).toFixed(1):"0",getPeriodLabel=()=>{switch(selectedPeriod){case"hariini":return"Hari Ini";case"7hari":return"7 Hari";case"mingguini":return"Minggu Ini";case"bulanini":return"Bulan Ini";case"custom":return`${customStartDate} - ${customEndDate}`;default:return"Hari Ini"}},enhancedChartData=reactExports.useMemo(()=>chartData.map(day=>({name:formatDate(day.date),fullDate:day.date,penjualan:day.penjualan,modal:day.modal,margin:day.penjualan-day.modal,pengeluaran:day.pengeluaran,laba:day.laba})),[chartData]),handleExportExcel=reactExports.useCallback(()=>{if(allSales.length===0){toast.error("Tidak ada data untuk di-export");return}try{toast.loading("Generating Excel...",{id:"excel-export"});const wb=utils.book_new(),now=new Date,pangkalanName=profile?.pangkalans?.name||profile?.name||"PANGKALAN",monthName=now.toLocaleDateString("id-ID",{month:"long",year:"numeric"}).toUpperCase(),formatDateExcel=dateStr=>{const date=new Date(dateStr),day=date.getDate().toString().padStart(2,"0"),month=(date.getMonth()+1).toString().padStart(2,"0"),year=date.getFullYear();return`${day}/${month}/${year}`},monthStart=new Date(now.getFullYear(),now.getMonth(),1,0,0,0),monthEnd=new Date(now.getFullYear(),now.getMonth()+1,0,23,59,59),monthlySales=allSales.filter(sale=>{const saleTime=new Date(sale.sale_date).getTime();return saleTime>=monthStart.getTime()&&saleTime<=monthEnd.getTime()}),wsData=[];wsData.push([`DATA PENJUALAN ${pangkalanName.toUpperCase()} BULAN ${monthName}`]),wsData.push([]),wsData.push(["NO","TANGGAL","NAMA PELANGGAN","QTY","HARGA BELI","HARGA JUAL","MARGIN SATUAN","TOTAL BELI","TOTAL JUAL","MARGIN KOTOR","PENGELUARAN","LABA BERSIH","TIPE LPG"]);let rowNo=1,grandTotalQty=0,grandTotalModal=0,grandTotalPenjualan=0,grandTotalMargin=0;const salesByDate=monthlySales.reduce((acc,sale)=>{const dateKey=formatDateExcel(sale.sale_date);return acc[dateKey]||(acc[dateKey]=[]),acc[dateKey].push(sale),acc},{});Object.entries(salesByDate).sort(([a],[b])=>{const[dayA,monthA,yearA]=a.split("/").map(Number),[dayB,monthB,yearB]=b.split("/").map(Number);return new Date(yearA,monthA-1,dayA).getTime()-new Date(yearB,monthB-1,dayB).getTime()}).forEach(([dateLabel,dateSales])=>{dateSales.forEach(sale=>{const costPrice=getCostPrice(sale.lpg_type),hargaJual=Number(sale.price_per_unit),marginSatuan=hargaJual-costPrice,totalModal=sale.qty*costPrice,totalPenjualan=Number(sale.total_amount),marginKotor2=totalPenjualan-totalModal,pengeluaran=0,labaBersih=marginKotor2-pengeluaran;grandTotalQty+=sale.qty,grandTotalModal+=totalModal,grandTotalPenjualan+=totalPenjualan,grandTotalMargin+=marginKotor2,wsData.push([rowNo++,dateLabel,sale.consumer_name||sale.consumers?.name||"Walk-in",sale.qty,costPrice,hargaJual,marginSatuan,totalModal,totalPenjualan,marginKotor2,pengeluaran,labaBersih,sale.lpg_type.toUpperCase()])})}),wsData.push([]),wsData.push(["TOTAL","","",grandTotalQty,"","","",grandTotalModal,grandTotalPenjualan,grandTotalMargin,0,grandTotalMargin,""]);const ws=utils.aoa_to_sheet(wsData);ws["!cols"]=[{wch:5},{wch:15},{wch:20},{wch:6},{wch:16},{wch:16},{wch:16},{wch:18},{wch:18},{wch:16},{wch:14},{wch:16},{wch:10}],ws["!merges"]=[{s:{r:0,c:0},e:{r:0,c:12}}],utils.book_append_sheet(wb,ws,"Laporan Penjualan");const fileName=`Laporan_${pangkalanName.replace(/\s/g,"_")}_${monthName.replace(/\s/g,"_")}.xlsx`;writeFileSync(wb,fileName),toast.success("Excel berhasil di-download!",{id:"excel-export"})}catch(error2){console.error("Excel export error:",error2),toast.error("Gagal export Excel",{id:"excel-export"})}},[allSales,prices,profile]),handleExportPDF=reactExports.useCallback(()=>{if(allSales.length===0){toast.error("Tidak ada data untuk di-export");return}try{toast.loading("Generating PDF...",{id:"pdf-export"});const doc=new E({orientation:"landscape"}),pageWidth=doc.internal.pageSize.getWidth(),margin=14,now=new Date,formatRp=value=>`Rp ${value.toLocaleString("id-ID")}`,formatDatePremium=dateStr=>new Date(dateStr).toLocaleDateString("id-ID",{day:"numeric",month:"long"}),monthStart=new Date(now.getFullYear(),now.getMonth(),1,0,0,0),monthEnd=new Date(now.getFullYear(),now.getMonth()+1,0,23,59,59),monthlySales=allSales.filter(sale=>{const saleTime=new Date(sale.sale_date).getTime();return saleTime>=monthStart.getTime()&&saleTime<=monthEnd.getTime()}),monthName=now.toLocaleDateString("id-ID",{month:"long",year:"numeric"}).toUpperCase(),pangkalanName=profile?.pangkalans?.name||profile?.name||"PANGKALAN";let totalQty=0,totalModal=0,totalPenjualan=0,totalLaba=0;monthlySales.forEach(sale=>{const costPrice=getCostPrice(sale.lpg_type),modal=sale.qty*costPrice,penjualan=Number(sale.total_amount);totalQty+=sale.qty,totalModal+=modal,totalPenjualan+=penjualan,totalLaba+=penjualan-modal}),doc.setFont("helvetica","italic"),doc.setFontSize(9),doc.setTextColor(150),doc.text("Sim4lon by Luthfi",pageWidth-margin,10,{align:"right"}),doc.setFont("helvetica","bold"),doc.setFontSize(14),doc.setTextColor(30,64,175),doc.text(`LAPORAN PENJUALAN ${pangkalanName.toUpperCase()}`,pageWidth/2,15,{align:"center"}),doc.setFontSize(10),doc.setTextColor(100),doc.text(`Bulan: ${monthName}`,pageWidth/2,22,{align:"center"}),doc.setDrawColor(200),doc.setFillColor(248,250,252),doc.roundedRect(margin,28,pageWidth-2*margin,20,3,3,"F"),doc.setFontSize(9),doc.setTextColor(60);const summaryY=38;doc.text(`Total Transaksi: ${monthlySales.length}`,margin+5,summaryY),doc.text(`Total Qty: ${totalQty} unit`,margin+60,summaryY),doc.text(`Total Penjualan: ${formatRp(totalPenjualan)}`,margin+110,summaryY),doc.text(`Total Modal: ${formatRp(totalModal)}`,margin+175,summaryY),doc.setTextColor(22,163,74),doc.text(`Laba: ${formatRp(totalLaba)}`,margin+235,summaryY);const headers=["NO","TANGGAL","NAMA PELANGGAN","QTY","HARGA BELI","HARGA JUAL","MARGIN SATUAN","TOTAL BELI","TOTAL JUAL","MARGIN KOTOR","PENGELUARAN","LABA BERSIH","TIPE"],tableData=[];let rowNo=1;monthlySales.forEach(sale=>{const costPrice=getCostPrice(sale.lpg_type),hargaJual=Number(sale.price_per_unit),marginSatuan=hargaJual-costPrice,totalBeli=sale.qty*costPrice,totalJual=Number(sale.total_amount),marginKotor2=totalJual-totalBeli,pengeluaran=0,labaBersih=marginKotor2-pengeluaran;tableData.push([rowNo++,formatDatePremium(sale.sale_date),sale.consumer_name||sale.consumers?.name||"Walk-in",sale.qty,formatRp(costPrice),formatRp(hargaJual),formatRp(marginSatuan),formatRp(totalBeli),formatRp(totalJual),formatRp(marginKotor2),formatRp(pengeluaran),formatRp(labaBersih),sale.lpg_type.toUpperCase()])}),autoTable(doc,{startY:52,head:[headers],body:tableData,theme:"grid",margin:{left:5,right:5},styles:{fontSize:7,cellPadding:1,lineColor:[200,200,200],lineWidth:.1,overflow:"linebreak"},headStyles:{fillColor:[30,64,175],textColor:255,fontStyle:"bold",fontSize:8,halign:"center",cellPadding:4},columnStyles:{0:{halign:"center",cellWidth:14},1:{cellWidth:24},2:{cellWidth:"auto"},3:{halign:"center",cellWidth:14},4:{halign:"right",cellWidth:20},5:{halign:"right",cellWidth:20},6:{halign:"right",cellWidth:20},7:{halign:"right",cellWidth:26},8:{halign:"right",cellWidth:26},9:{halign:"right",cellWidth:24},10:{halign:"right",cellWidth:24},11:{halign:"right",cellWidth:24},12:{halign:"center",cellWidth:14}},alternateRowStyles:{fillColor:[248,250,252]},didParseCell:data=>{if(data.column.index===11&&data.section==="body"){const rawValue=String(data.cell.raw).replace(/[^\d]/g,"");parseInt(rawValue)>0&&(data.cell.styles.textColor=[22,163,74],data.cell.styles.fontStyle="bold")}}});const pageCount=doc.getNumberOfPages();for(let i=1;i<=pageCount;i++)doc.setPage(i),doc.setFontSize(8),doc.setTextColor(150),doc.text(`Halaman ${i} dari ${pageCount} | Dicetak: ${new Date().toLocaleString("id-ID")}`,pageWidth/2,doc.internal.pageSize.getHeight()-10,{align:"center"});doc.save(`Laporan_${pangkalanName.replace(/\s/g,"_")}_${monthName.replace(/\s/g,"_")}.pdf`),toast.success("PDF berhasil di-download!",{id:"pdf-export"})}catch(error2){console.error("PDF export error:",error2),toast.error("Gagal export PDF",{id:"pdf-export"})}},[allSales,prices,profile]);return isLoading?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-[500px]",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mx-auto"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"BarChart3",className:"h-6 w-6 text-blue-600"})})]}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 mt-4 font-medium",children:"Memuat data laporan..."})]})}):error?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-[500px]",children:jsxRuntimeExports.jsxs("div",{className:"text-center max-w-md",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx(SafeIcon,{name:"AlertTriangle",className:"h-8 w-8 text-red-500"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Gagal Memuat Data"}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 mb-4",children:error}),jsxRuntimeExports.jsxs(Button,{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"RefreshCw",className:"h-4 w-4 mr-2"}),"Coba Lagi"]})]})}):jsxRuntimeExports.jsxs("div",{className:"space-y-8 pb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 animate-fadeInDown",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"h-12 w-1.5 rounded-full bg-gradient-to-b from-blue-500 via-indigo-500 to-purple-500 animate-lineGrow"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Laporan Penjualan"}),jsxRuntimeExports.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mt-1 flex items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Calculator",className:"h-4 w-4 animate-pulse"}),"Perhitungan: Qty × (Harga Jual - Modal)"]})]})]}),jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"default",className:"rounded-xl shadow-sm hover:shadow-md transition-all",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Download",className:"h-4 w-4 mr-2"}),"Export",jsxRuntimeExports.jsx(SafeIcon,{name:"ChevronDown",className:"h-3 w-3 ml-1"})]})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{align:"end",className:"w-48",children:[jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:handleExportExcel,className:"cursor-pointer",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"FileSpreadsheet",className:"h-4 w-4 mr-2 text-green-600"}),"Export Excel"]}),jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:handleExportPDF,className:"cursor-pointer",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"FileText",className:"h-4 w-4 mr-2 text-red-600"}),"Export PDF"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center bg-slate-100 rounded-xl p-1 gap-1",children:[[{value:"hariini",label:"Hari Ini",icon:"Calendar"},{value:"7hari",label:"7 Hari",icon:"CalendarClock"},{value:"mingguini",label:"Minggu Ini",icon:"CalendarDays"},{value:"bulanini",label:"Bulan Ini",icon:"CalendarRange"}].map(period=>jsxRuntimeExports.jsxs("button",{onClick:()=>{setSelectedPeriod(period.value),setShowCustom(!1)},className:`flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-all ${selectedPeriod===period.value&&!showCustom?"bg-white shadow-sm text-blue-600":"text-slate-600 hover:text-slate-900"}`,children:[jsxRuntimeExports.jsx(SafeIcon,{name:period.icon,className:"h-4 w-4"}),period.label]},period.value)),jsxRuntimeExports.jsxs("button",{onClick:()=>setShowCustom(!showCustom),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-all ${showCustom?"bg-white shadow-sm text-blue-600":"text-slate-600 hover:text-slate-900"}`,children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Settings2",className:"h-4 w-4"}),"Custom"]})]}),showCustom&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 animate-in slide-in-from-left-2 duration-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-white border border-slate-200 rounded-xl px-3 py-1.5 shadow-sm",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"CalendarDays",className:"h-4 w-4 text-slate-400"}),jsxRuntimeExports.jsx("input",{type:"date",value:customStartDate,onChange:e=>setCustomStartDate(e.target.value),className:"bg-transparent border-none text-sm focus:outline-none w-32"}),jsxRuntimeExports.jsx("span",{className:"text-slate-400",children:"-"}),jsxRuntimeExports.jsx("input",{type:"date",value:customEndDate,onChange:e=>setCustomEndDate(e.target.value),className:"bg-transparent border-none text-sm focus:outline-none w-32"})]}),jsxRuntimeExports.jsxs(Button,{size:"sm",className:"rounded-lg bg-blue-600 hover:bg-blue-700",onClick:handleApplyCustomDate,children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Search",className:"h-4 w-4 mr-1"}),"Terapkan"]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"relative overflow-hidden bg-gradient-to-r from-slate-50 to-blue-50 rounded-2xl border border-slate-200 p-4 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Calculator",className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Perhitungan:"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"bg-white",children:"Modal = Qty × Harga Beli"}),jsxRuntimeExports.jsx("span",{className:"text-slate-400",children:"→"}),jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"bg-white",children:"Penjualan = Qty × Harga Jual"}),jsxRuntimeExports.jsx("span",{className:"text-slate-400",children:"→"}),jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Laba = Penjualan - Modal"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Ringkasan"}),jsxRuntimeExports.jsxs(Badge,{className:"bg-blue-100 text-blue-700 hover:bg-blue-100",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Calendar",className:"h-3 w-3 mr-1"}),getPeriodLabel()]})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-500",children:[recentSales.length," transaksi"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-5",children:[jsxRuntimeExports.jsx("div",{className:"animate-slideInBlur stagger-1",style:{opacity:0},children:jsxRuntimeExports.jsxs(Card,{className:"relative overflow-hidden bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/20 hover:shadow-xl hover:shadow-blue-500/30 transition-all duration-300 hover:-translate-y-1 hover:scale-[1.02] group h-full",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/15 rounded-full -translate-y-1/2 translate-x-1/2 animate-floatOrb"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2 animate-floatOrb-delayed"}),jsxRuntimeExports.jsx(CardHeader,{className:"pb-2 relative",children:jsxRuntimeExports.jsxs(CardTitle,{className:"text-sm font-medium opacity-90 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"p-1.5 rounded-lg bg-white/20 transition-transform duration-300 group-hover:scale-110 group-hover:rotate-12",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Banknote",className:"h-4 w-4"})}),"Total Penjualan"]})}),jsxRuntimeExports.jsxs(CardContent,{className:"relative",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl lg:text-3xl font-bold tracking-tight",children:formatCurrency(totals.penjualan)}),jsxRuntimeExports.jsxs("p",{className:"text-blue-100 text-sm mt-2 flex items-center gap-1",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Flame",className:"h-3.5 w-3.5"}),totals.qty," tabung terjual"]})]})]})}),jsxRuntimeExports.jsx("div",{className:"animate-slideInBlur stagger-2",style:{opacity:0},children:jsxRuntimeExports.jsxs(Card,{className:"relative overflow-hidden bg-gradient-to-br from-slate-600 to-slate-700 text-white shadow-lg shadow-slate-500/20 hover:shadow-xl hover:shadow-slate-500/30 transition-all duration-300 hover:-translate-y-1 hover:scale-[1.02] group h-full",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/15 rounded-full -translate-y-1/2 translate-x-1/2 animate-floatOrb"}),jsxRuntimeExports.jsx(CardHeader,{className:"pb-2 relative",children:jsxRuntimeExports.jsxs(CardTitle,{className:"text-sm font-medium opacity-90 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"p-1.5 rounded-lg bg-white/20 transition-transform duration-300 group-hover:scale-110 group-hover:rotate-12",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Wallet",className:"h-4 w-4"})}),"Total Beli"]})}),jsxRuntimeExports.jsxs(CardContent,{className:"relative",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl lg:text-3xl font-bold tracking-tight",children:formatCurrency(totals.modal)}),jsxRuntimeExports.jsx("p",{className:"text-slate-300 text-sm mt-2",children:"Biaya pembelian LPG"})]})]})}),jsxRuntimeExports.jsx("div",{className:"animate-slideInBlur stagger-3",style:{opacity:0},children:jsxRuntimeExports.jsxs(Card,{className:"relative overflow-hidden bg-gradient-to-br from-cyan-500 to-teal-600 text-white shadow-lg shadow-cyan-500/20 hover:shadow-xl hover:shadow-cyan-500/30 transition-all duration-300 hover:-translate-y-1 hover:scale-[1.02] group h-full",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/15 rounded-full -translate-y-1/2 translate-x-1/2 animate-floatOrb"}),jsxRuntimeExports.jsx(CardHeader,{className:"pb-2 relative",children:jsxRuntimeExports.jsxs(CardTitle,{className:"text-sm font-medium opacity-90 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"p-1.5 rounded-lg bg-white/20 transition-transform duration-300 group-hover:scale-110 group-hover:rotate-12",children:jsxRuntimeExports.jsx(SafeIcon,{name:"ArrowUpRight",className:"h-4 w-4"})}),"Margin Kotor"]})}),jsxRuntimeExports.jsxs(CardContent,{className:"relative",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl lg:text-3xl font-bold tracking-tight",children:formatCurrency(marginKotor)}),jsxRuntimeExports.jsx("p",{className:"text-cyan-100 text-sm mt-2",children:"Sebelum pengeluaran"})]})]})}),jsxRuntimeExports.jsx("div",{className:"animate-slideInBlur stagger-4",style:{opacity:0},children:jsxRuntimeExports.jsxs(Card,{className:"relative overflow-hidden bg-gradient-to-br from-orange-500 to-red-500 text-white shadow-lg shadow-orange-500/20 hover:shadow-xl hover:shadow-orange-500/30 transition-all duration-300 hover:-translate-y-1 hover:scale-[1.02] group h-full",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/15 rounded-full -translate-y-1/2 translate-x-1/2 animate-floatOrb"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2 animate-floatOrb-delayed"}),jsxRuntimeExports.jsx(CardHeader,{className:"pb-2 relative",children:jsxRuntimeExports.jsxs(CardTitle,{className:"text-sm font-medium opacity-90 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"p-1.5 rounded-lg bg-white/20 transition-transform duration-300 group-hover:scale-110 group-hover:rotate-12",children:jsxRuntimeExports.jsx(SafeIcon,{name:"MinusCircle",className:"h-4 w-4"})}),"Pengeluaran"]})}),jsxRuntimeExports.jsxs(CardContent,{className:"relative",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl lg:text-3xl font-bold tracking-tight",children:formatCurrency(totals.pengeluaran)}),jsxRuntimeExports.jsx("p",{className:"text-orange-100 text-sm mt-2",children:"Biaya operasional"})]})]})}),jsxRuntimeExports.jsx("div",{className:"animate-slideInBlur stagger-5",style:{opacity:0},children:jsxRuntimeExports.jsxs(Card,{className:"relative overflow-hidden bg-gradient-to-br from-green-500 to-emerald-600 text-white shadow-lg shadow-green-500/20 hover:shadow-xl hover:shadow-green-500/30 transition-all duration-300 hover:-translate-y-1 hover:scale-[1.02] group h-full",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/15 rounded-full -translate-y-1/2 translate-x-1/2 animate-floatOrb"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2 animate-floatOrb-delayed"}),jsxRuntimeExports.jsx(CardHeader,{className:"pb-2 relative",children:jsxRuntimeExports.jsxs(CardTitle,{className:"text-sm font-medium opacity-90 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"p-1.5 rounded-lg bg-white/20 transition-transform duration-300 group-hover:scale-110 group-hover:rotate-12",children:jsxRuntimeExports.jsx(SafeIcon,{name:"BadgeDollarSign",className:"h-4 w-4"})}),"Laba Bersih"]})}),jsxRuntimeExports.jsxs(CardContent,{className:"relative",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl lg:text-3xl font-bold tracking-tight",children:formatCurrency(totals.laba)}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 mt-2",children:jsxRuntimeExports.jsxs(Badge,{className:"bg-white/20 text-white hover:bg-white/30 text-xs",children:[marginPercentage,"% margin"]})})]})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[jsxRuntimeExports.jsxs(Card,{className:"bg-white shadow-lg rounded-2xl border-0 overflow-hidden",children:[jsxRuntimeExports.jsx(CardHeader,{className:"border-b border-slate-100 bg-slate-50/50",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"BarChart3",className:"h-4 w-4 text-blue-600"})}),"Penjualan vs Pembelian"]}),jsxRuntimeExports.jsx(CardDescription,{className:"mt-1",children:"Perbandingan harian selama 7 hari"})]})})}),jsxRuntimeExports.jsxs(CardContent,{className:"pt-6",children:[jsxRuntimeExports.jsx("div",{className:"h-[280px]",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:enhancedChartData,barGap:4,barCategoryGap:"25%",children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#E2E8F0",vertical:!1}),jsxRuntimeExports.jsx(XAxis,{dataKey:"name",stroke:"#64748B",fontSize:12,tickLine:!1,axisLine:!1}),jsxRuntimeExports.jsx(YAxis,{stroke:"#64748B",fontSize:12,tickFormatter:formatCurrencyShort,tickLine:!1,axisLine:!1}),jsxRuntimeExports.jsx(Tooltip,{content:jsxRuntimeExports.jsx(CustomTooltip,{})}),jsxRuntimeExports.jsx(Bar,{dataKey:"penjualan",name:"Penjualan",fill:"#3B82F6",radius:[6,6,0,0]}),jsxRuntimeExports.jsx(Bar,{dataKey:"modal",name:"Modal",fill:"#CBD5E1",radius:[6,6,0,0]})]})})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-8 mt-4 pt-4 border-t border-slate-100",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-slate-600",children:"Penjualan"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-300"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-slate-600",children:"Pembelian"})]})]})]})]}),jsxRuntimeExports.jsxs(Card,{className:"bg-white shadow-lg rounded-2xl border-0 overflow-hidden",children:[jsxRuntimeExports.jsx(CardHeader,{className:"border-b border-slate-100 bg-slate-50/50",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"TrendingUp",className:"h-4 w-4 text-green-600"})}),"Trend Laba Bersih"]}),jsxRuntimeExports.jsx(CardDescription,{className:"mt-1",children:"Perkembangan profit harian"})]})})}),jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsx("div",{className:"h-[280px]",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(AreaChart,{data:enhancedChartData,children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"labaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"5%",stopColor:"#22C55E",stopOpacity:.3}),jsxRuntimeExports.jsx("stop",{offset:"95%",stopColor:"#22C55E",stopOpacity:0})]})}),jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#E2E8F0",vertical:!1}),jsxRuntimeExports.jsx(XAxis,{dataKey:"name",stroke:"#64748B",fontSize:12,tickLine:!1,axisLine:!1}),jsxRuntimeExports.jsx(YAxis,{stroke:"#64748B",fontSize:12,tickFormatter:formatCurrencyShort,tickLine:!1,axisLine:!1}),jsxRuntimeExports.jsx(Tooltip,{content:jsxRuntimeExports.jsx(CustomTooltip,{})}),jsxRuntimeExports.jsx(Area,{type:"monotone",dataKey:"laba",name:"Laba Bersih",stroke:"#22C55E",strokeWidth:3,fill:"url(#labaGradient)",dot:{r:5,fill:"#22C55E",strokeWidth:3,stroke:"#fff"},activeDot:{r:7,stroke:"#22C55E",strokeWidth:3,fill:"#fff"}})]})})})})]})]}),jsxRuntimeExports.jsxs(Card,{className:"bg-white shadow-lg rounded-2xl border-0 overflow-hidden",children:[jsxRuntimeExports.jsx(CardHeader,{className:"border-b border-slate-100 bg-slate-50/50",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-100 flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Calendar",className:"h-4 w-4 text-purple-600"})}),"Ringkasan Per Tanggal"]}),jsxRuntimeExports.jsx(CardDescription,{className:"mt-1",children:"Perhitungan laba harian"})]})})}),jsxRuntimeExports.jsx(CardContent,{className:"p-0",children:jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-sm",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200",children:[jsxRuntimeExports.jsx("th",{className:"text-left py-4 px-6 font-semibold text-slate-700",children:"Tanggal"}),jsxRuntimeExports.jsx("th",{className:"text-right py-4 px-6 font-semibold text-slate-700",children:"Qty"}),jsxRuntimeExports.jsx("th",{className:"text-right py-4 px-6 font-semibold text-slate-700",children:"Pembelian"}),jsxRuntimeExports.jsx("th",{className:"text-right py-4 px-6 font-semibold text-slate-700",children:"Penjualan"}),jsxRuntimeExports.jsx("th",{className:"text-right py-4 px-6 font-semibold text-cyan-600",children:"Margin Kotor"}),jsxRuntimeExports.jsx("th",{className:"text-right py-4 px-6 font-semibold text-orange-600",children:"Pengeluaran"}),jsxRuntimeExports.jsx("th",{className:"text-right py-4 px-6 font-semibold text-green-600",children:"Laba Bersih"})]})}),jsxRuntimeExports.jsx("tbody",{children:dailySummaryArray.length===0?jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsxs("td",{colSpan:7,className:"text-center py-12",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Inbox",className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Belum ada data untuk periode ini"})]})}):dailySummaryArray.map((day,index)=>{const margin=day.penjualan-day.modal;return jsxRuntimeExports.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50/50 transition-colors",children:[jsxRuntimeExports.jsx("td",{className:"py-4 px-6 text-slate-900 font-medium",children:formatDate(day.date)}),jsxRuntimeExports.jsx("td",{className:"text-right py-4 px-6 text-slate-700",children:day.qty}),jsxRuntimeExports.jsx("td",{className:"text-right py-4 px-6 text-slate-700",children:formatCurrency(day.modal)}),jsxRuntimeExports.jsx("td",{className:"text-right py-4 px-6 text-slate-900 font-medium",children:formatCurrency(day.penjualan)}),jsxRuntimeExports.jsx("td",{className:"text-right py-4 px-6 text-cyan-600 font-medium",children:formatCurrency(margin)}),jsxRuntimeExports.jsx("td",{className:"text-right py-4 px-6 text-orange-600",children:formatCurrency(day.pengeluaran)}),jsxRuntimeExports.jsx("td",{className:"text-right py-4 px-6",children:jsxRuntimeExports.jsx("span",{className:`font-bold ${day.laba>=0?"text-green-600":"text-red-600"}`,children:formatCurrency(day.laba)})})]},index)})}),jsxRuntimeExports.jsx("tfoot",{children:jsxRuntimeExports.jsxs("tr",{className:"bg-gradient-to-r from-slate-100 to-slate-50 font-semibold",children:[jsxRuntimeExports.jsx("td",{className:"py-4 px-6 text-slate-900",children:"TOTAL"}),jsxRuntimeExports.jsx("td",{className:"text-right py-4 px-6 text-slate-900",children:totals.qty}),jsxRuntimeExports.jsx("td",{className:"text-right py-4 px-6 text-slate-900",children:formatCurrency(totals.modal)}),jsxRuntimeExports.jsx("td",{className:"text-right py-4 px-6 text-blue-600 font-bold",children:formatCurrency(totals.penjualan)}),jsxRuntimeExports.jsx("td",{className:"text-right py-4 px-6 text-cyan-600 font-bold",children:formatCurrency(marginKotor)}),jsxRuntimeExports.jsx("td",{className:"text-right py-4 px-6 text-orange-600 font-bold",children:formatCurrency(totals.pengeluaran)}),jsxRuntimeExports.jsx("td",{className:"text-right py-4 px-6 text-green-600 font-bold text-lg",children:formatCurrency(totals.laba)})]})})]})})})]}),jsxRuntimeExports.jsxs(Card,{className:"bg-white shadow-lg rounded-2xl border-0 overflow-hidden",children:[jsxRuntimeExports.jsx(CardHeader,{className:"border-b border-slate-100 bg-slate-50/50",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg bg-amber-100 flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Receipt",className:"h-4 w-4 text-amber-600"})}),"Detail Transaksi"]}),jsxRuntimeExports.jsx(CardDescription,{className:"mt-1",children:"Rincian penjualan per pelanggan"})]}),jsxRuntimeExports.jsxs(Badge,{variant:"secondary",className:"text-xs",children:[recentSales.length," transaksi"]})]})}),jsxRuntimeExports.jsx(CardContent,{className:"p-0",children:jsxRuntimeExports.jsx("div",{className:"overflow-x-auto max-h-[450px]",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-sm",children:[jsxRuntimeExports.jsx("thead",{className:"sticky top-0 bg-white shadow-sm z-10",children:jsxRuntimeExports.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200",children:[jsxRuntimeExports.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"Tanggal"}),jsxRuntimeExports.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"Pelanggan"}),jsxRuntimeExports.jsx("th",{className:"text-center py-3 px-4 font-semibold text-slate-700",children:"Qty"}),jsxRuntimeExports.jsx("th",{className:"text-right py-3 px-4 font-semibold text-slate-700",children:"Harga Beli"}),jsxRuntimeExports.jsx("th",{className:"text-right py-3 px-4 font-semibold text-slate-700",children:"Harga Jual"}),jsxRuntimeExports.jsx("th",{className:"text-right py-3 px-4 font-semibold text-blue-600",children:"Margin/Unit"}),jsxRuntimeExports.jsx("th",{className:"text-right py-3 px-4 font-semibold text-slate-700",children:"Total Beli"}),jsxRuntimeExports.jsx("th",{className:"text-right py-3 px-4 font-semibold text-slate-700",children:"Total Jual"}),jsxRuntimeExports.jsx("th",{className:"text-right py-3 px-4 font-semibold text-green-600",children:"Laba"}),jsxRuntimeExports.jsx("th",{className:"text-center py-3 px-4 font-semibold text-slate-700",children:"Tipe"})]})}),jsxRuntimeExports.jsx("tbody",{children:recentSales.length===0?jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsxs("td",{colSpan:10,className:"text-center py-12",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Inbox",className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Belum ada transaksi"})]})}):recentSales.map((sale,index)=>{const costPrice=getCostPrice(sale.lpg_type),hargaJual=Number(sale.price_per_unit),marginPerUnit=hargaJual-costPrice,totalBeli=sale.qty*costPrice,totalJual=Number(sale.total_amount),laba=totalJual-totalBeli;return jsxRuntimeExports.jsxs("tr",{className:`border-b border-slate-100 hover:bg-blue-50/30 transition-colors ${index%2===0?"bg-white":"bg-slate-50/30"}`,children:[jsxRuntimeExports.jsx("td",{className:"py-3 px-4 text-slate-600",children:new Date(sale.sale_date).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}),jsxRuntimeExports.jsx("td",{className:"py-3 px-4",children:jsxRuntimeExports.jsx("span",{className:"font-medium text-slate-900 uppercase text-xs",children:sale.consumers?.name||sale.consumer_name||"Walk-in"})}),jsxRuntimeExports.jsx("td",{className:"text-center py-3 px-4 text-slate-700 font-medium",children:sale.qty}),jsxRuntimeExports.jsx("td",{className:"text-right py-3 px-4 text-slate-600",children:formatCurrency(costPrice)}),jsxRuntimeExports.jsx("td",{className:"text-right py-3 px-4 text-slate-700",children:formatCurrency(hargaJual)}),jsxRuntimeExports.jsx("td",{className:"text-right py-3 px-4",children:jsxRuntimeExports.jsx("span",{className:"font-medium text-blue-600",children:formatCurrency(marginPerUnit)})}),jsxRuntimeExports.jsx("td",{className:"text-right py-3 px-4 text-slate-600",children:formatCurrency(totalBeli)}),jsxRuntimeExports.jsx("td",{className:"text-right py-3 px-4 text-slate-900 font-medium",children:formatCurrency(totalJual)}),jsxRuntimeExports.jsx("td",{className:"text-right py-3 px-4",children:jsxRuntimeExports.jsx("span",{className:"font-bold text-green-600",children:formatCurrency(laba)})}),jsxRuntimeExports.jsx("td",{className:"text-center py-3 px-4",children:jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-700",children:sale.lpg_type.toUpperCase()})})]},sale.id)})})]})})})]})]})}export{LaporanPangkalanPage as default};
