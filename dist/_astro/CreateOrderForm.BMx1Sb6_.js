import{j as jsxRuntimeExports}from"./jsx-runtime.mvtouYz0.js";import{r as reactExports}from"./index.DcciWILN.js";import{S as SafeIcon,B as Button}from"./SafeIcon.CAGsavDo.js";import{C as Card,a as CardContent}from"./card.D0gylVsf.js";import{I as Input}from"./input.C9ryBhC0.js";import{L as Label}from"./label.BFF1cpbq.js";import{B as Badge}from"./badge.DZiJ6zSB.js";import{T as Textarea}from"./textarea.CmILhP_C.js";import{S as Select,a as SelectTrigger,b as SelectValue,c as SelectContent,d as SelectItem}from"./select.Dd50uIHU.js";import{S as Separator}from"./separator.bhOikD5L.js";import{t as toast}from"./index.fAd_ikgp.js";import{ordersApi,lpgProductsApi,pangkalanApi}from"./api.Dr7hS9Y8.js";import{f as formatCurrency}from"./currency.DQ9ceiwM.js";import{u as useAppSettings}from"./useAppSettings.DmDEw9Dm.js";import"./index.PIAPtHoh.js";import"./index.ubNQCTBn.js";import"./index.DGt6JTY0.js";import"./index.BpQ989z7.js";import"./index.BStXkqMp.js";import"./index.Drh0kMGk.js";import"./index.DZiLsHox.js";import"./index.Dovp0-D8.js";import"./index.YpXgcoRz.js";import"./index.BFpcrWlj.js";import"./index.9MihlNbL.js";import"./index.BhA3i5Wo.js";import"./index.BaF2FVWY.js";import"./chevron-up.BBBXIirx.js";import"./check.TUgVKQyo.js";const sizeKgToLpgType=sizeKg=>{const size=typeof sizeKg=="string"?parseFloat(sizeKg):sizeKg;if(console.log("[sizeKgToLpgType] Input:",sizeKg,"→ Parsed:",size),isNaN(size))return console.warn("[sizeKgToLpgType] Invalid size, defaulting to kg3"),"kg3";const isApprox=(a,b)=>Math.abs(a-b)<.1;let result;return size<=.3?result="gr220":isApprox(size,3)?result="kg3":isApprox(size,5.5)||isApprox(size,5)?result="kg5":isApprox(size,12)?result="kg12":isApprox(size,50)?result="kg50":result=`kg${Math.floor(size)}`,console.log("[sizeKgToLpgType] Result:",result),result};function CreateOrderForm(){const{settings:appSettings}=useAppSettings(),[pangkalanList,setPangkalanList]=reactExports.useState([]),[lpgProducts,setLpgProducts]=reactExports.useState([]),[isLoadingData,setIsLoadingData]=reactExports.useState(!0),[formData,setFormData]=reactExports.useState({pangkalanId:"",note:"",items:[]}),[isSubmitting,setIsSubmitting]=reactExports.useState(!1),[isEditMode,setIsEditMode]=reactExports.useState(!1),[editOrderId,setEditOrderId]=reactExports.useState(null),[editOrderStatus,setEditOrderStatus]=reactExports.useState(null),holdTimeoutRef=reactExports.useRef(null),holdIntervalRef=reactExports.useRef(null),holdCountRef=reactExports.useRef(0),holdItemIdRef=reactExports.useRef(null),startHold=reactExports.useCallback((itemId,action)=>{holdCountRef.current=0,holdItemIdRef.current=itemId,holdTimeoutRef.current=setTimeout(()=>{const tick=()=>{holdCountRef.current++;let step=1;holdCountRef.current>30?step=10:holdCountRef.current>10&&(step=5);const currentItemId=holdItemIdRef.current;if(!currentItemId)return;setFormData(prev=>({...prev,items:prev.items.map(item=>{if(item.id!==currentItemId)return item;const newQty=action==="increment"?item.quantity+step:Math.max(0,item.quantity-step);return{...item,quantity:newQty}})}));let delay=100;holdCountRef.current>20?delay=75:holdCountRef.current>5&&(delay=80),holdIntervalRef.current=setTimeout(tick,delay)};tick()},450)},[]),stopHold=reactExports.useCallback(()=>{holdCountRef.current=0,holdItemIdRef.current=null,holdTimeoutRef.current&&(clearTimeout(holdTimeoutRef.current),holdTimeoutRef.current=null),holdIntervalRef.current&&(clearTimeout(holdIntervalRef.current),holdIntervalRef.current=null)},[]);reactExports.useEffect(()=>()=>stopHold(),[stopHold]),reactExports.useEffect(()=>{if((async()=>{try{setIsLoadingData(!0);const[pangkalanRes,productsRes]=await Promise.all([pangkalanApi.getAll(1,100,void 0,!0),lpgProductsApi.getWithStock()]);setPangkalanList(pangkalanRes.data),setLpgProducts(productsRes)}catch(error){console.error("Failed to fetch data:",error),toast.error("Gagal memuat data pangkalan dan produk")}finally{setIsLoadingData(!1)}})(),typeof window<"u"){const orderId=new URLSearchParams(window.location.search).get("id");orderId&&(setIsEditMode(!0),setEditOrderId(orderId),loadOrderForEdit(orderId))}},[]);const loadOrderForEdit=async orderId=>{try{const order=await ordersApi.getById(orderId);setEditOrderStatus(order.current_status);const products=lpgProducts.length>0?lpgProducts:await lpgProductsApi.getAll();setFormData({pangkalanId:order.pangkalan_id,note:order.note||"",items:order.order_items.map((item,index)=>{const sizeMatch=item.lpg_type.match(/\d+/),size=sizeMatch?parseFloat(sizeMatch[0]):0,matchedProduct=products.find(p=>parseFloat(String(p.size_kg))===size||p.name.toLowerCase().includes(item.label?.toLowerCase()||""));return{id:String(index+1),productId:matchedProduct?.id||"",lpgType:item.lpg_type,label:item.label||matchedProduct?.name||item.lpg_type,price:item.price_per_unit,quantity:item.qty,isTaxable:item.is_taxable??!1}})})}catch(error){console.error("Failed to load order:",error),toast.error("Gagal memuat data pesanan")}},handlePangkalanChange=value=>{setFormData(prev=>({...prev,pangkalanId:value}))},handleProductChange=(itemId,productId)=>{const product=lpgProducts.find(p=>p.id===productId);if(!product)return;const defaultPrice=product.selling_price||product.prices?.find(p=>p.is_default)?.price||product.prices?.[0]?.price||0;setFormData(prev=>({...prev,items:prev.items.map(item=>item.id===itemId?{...item,productId,lpgType:sizeKgToLpgType(Number(product.size_kg)),label:product.name,price:Number(defaultPrice),isTaxable:product.category==="NON_SUBSIDI"}:item)}))},handleQuantityChange=(itemId,quantity)=>{quantity<0&&(quantity=0),setFormData(prev=>({...prev,items:prev.items.map(item=>item.id===itemId?{...item,quantity}:item)}))},handleQuantityBlur=itemId=>{const item=formData.items.find(i=>i.id===itemId);if(!item)return;let newQuantity=item.quantity;const product=lpgProducts.find(p=>p.id===item.productId),maxStock=product?.stock?.current||0;newQuantity<1&&(newQuantity=1),maxStock>0&&newQuantity>maxStock&&(toast.warning(`Maksimal stok ${product?.name}: ${maxStock} unit`),newQuantity=maxStock),newQuantity!==item.quantity&&setFormData(prev=>({...prev,items:prev.items.map(i=>i.id===itemId?{...i,quantity:newQuantity}:i)}))},handleAddItem=()=>{if(lpgProducts.length===0)return;const selectedProductIds=formData.items.map(item=>item.productId),availableProducts=lpgProducts.filter(p=>!selectedProductIds.includes(p.id));if(availableProducts.length===0){toast.warning("Semua jenis LPG sudah dipilih");return}const sortedProducts=[...availableProducts].sort((a,b)=>{if(a.category!==b.category)return a.category==="SUBSIDI"?-1:1;const aSize=parseFloat(String(a.size_kg))||0,bSize=parseFloat(String(b.size_kg))||0;if(a.category==="SUBSIDI"){if(Math.abs(aSize-3)<.5)return-1;if(Math.abs(bSize-3)<.5)return 1}return aSize-bSize}),newId=String(Math.max(...formData.items.map(i=>parseInt(i.id)),0)+1),defaultProduct=sortedProducts[0],defaultPrice=defaultProduct.selling_price||defaultProduct.prices?.find(p=>p.is_default)?.price||defaultProduct.prices?.[0]?.price||0,isTaxable=defaultProduct.category==="NON_SUBSIDI";setFormData(prev=>({...prev,items:[...prev.items,{id:newId,productId:defaultProduct.id,lpgType:sizeKgToLpgType(Number(defaultProduct.size_kg)),label:defaultProduct.name,price:defaultPrice,quantity:1,isTaxable}]}))},handleRemoveItem=itemId=>{if(formData.items.length<=1){toast.error("Minimal harus ada satu item LPG");return}setFormData(prev=>({...prev,items:prev.items.filter(item=>item.id!==itemId)}))},calculateSubtotal=()=>formData.items.reduce((sum,item)=>sum+item.price*item.quantity,0),calculateTax=()=>{const ppnDecimal=appSettings.ppnRate/100;return formData.items.reduce((sum,item)=>item.isTaxable?sum+Math.round(item.price*item.quantity*ppnDecimal):sum,0)},calculateTotal=()=>calculateSubtotal()+calculateTax(),handleSubmit=async e=>{if(e.preventDefault(),!formData.pangkalanId){toast.error("Silakan pilih pangkalan");return}if(formData.items.length===0){toast.error("Silakan tambahkan minimal satu item LPG");return}setIsSubmitting(!0);try{const orderDto={pangkalan_id:formData.pangkalanId,note:formData.note||void 0,items:formData.items.map(item=>({lpg_type:item.lpgType,lpg_product_id:item.productId,label:item.label,price_per_unit:Number(item.price),qty:Math.floor(Number(item.quantity)),is_taxable:item.isTaxable}))};console.log("=== DEBUG ORDER SUBMISSION ==="),console.log("isEditMode:",isEditMode),console.log("editOrderId:",editOrderId),console.log("orderDto:",JSON.stringify(orderDto,null,2));let result;isEditMode&&editOrderId?(result=await ordersApi.update(editOrderId,orderDto),toast.success("Pesanan berhasil diperbarui!")):(result=await ordersApi.create(orderDto),toast.success("Pesanan berhasil dibuat!")),window.location.href=`/detail-pesanan?id=${result.id}`}catch(error){console.error("Failed to submit order:",error),toast.error(error.message||(isEditMode?"Gagal memperbarui pesanan":"Gagal membuat pesanan"))}finally{setIsSubmitting(!1)}},handleCancel=()=>{isEditMode&&editOrderId?window.location.href=`/detail-pesanan?id=${editOrderId}`:window.location.href="/daftar-pesanan"},selectedPangkalan=pangkalanList.find(p=>p.id===formData.pangkalanId),isFormDisabled=editOrderStatus==="SELESAI"||editOrderStatus==="BATAL";return isLoadingData?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"h-8 w-8 animate-spin mx-auto text-primary"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-muted-foreground",children:"Memuat data..."})]})}):jsxRuntimeExports.jsxs("div",{className:"grid gap-6 lg:grid-cols-3 dashboard-gradient-bg min-h-screen p-6",children:[jsxRuntimeExports.jsx("div",{className:"lg:col-span-2",children:jsxRuntimeExports.jsxs("div",{className:"chart-card-premium rounded-2xl overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b border-border/50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"h-10 w-1.5 rounded-full bg-gradient-to-b from-primary via-primary/70 to-accent"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gradient-primary",children:isEditMode?"Edit Pesanan":"Buat Pesanan Baru"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:isEditMode?"Perbarui informasi pesanan":"Lengkapi informasi pesanan LPG baru"})]})]}),isEditMode&&editOrderStatus&&jsxRuntimeExports.jsxs("div",{className:"mt-4 flex items-center gap-3 pt-4 border-t border-border/50",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-muted-foreground",children:"Status:"}),jsxRuntimeExports.jsx(Badge,{variant:"secondary",children:editOrderStatus})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[isFormDisabled&&jsxRuntimeExports.jsx("div",{className:"mb-6 p-4 bg-destructive/10 border border-destructive/20 rounded-lg",children:jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-destructive",children:"Pesanan dengan status selesai atau dibatalkan tidak dapat diubah"})}),jsxRuntimeExports.jsxs("form",{onSubmit:handleSubmit,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"pangkalan",className:"text-base font-semibold",children:["Pilih Pangkalan ",jsxRuntimeExports.jsx("span",{className:"text-destructive",children:"*"})]}),jsxRuntimeExports.jsxs(Select,{value:formData.pangkalanId,onValueChange:handlePangkalanChange,disabled:isFormDisabled,children:[jsxRuntimeExports.jsx(SelectTrigger,{id:"pangkalan",className:"h-10",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Pilih pangkalan..."})}),jsxRuntimeExports.jsx(SelectContent,{children:pangkalanList.map(pangkalan=>jsxRuntimeExports.jsx(SelectItem,{value:pangkalan.id,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:pangkalan.name}),jsxRuntimeExports.jsx("span",{className:"text-xs text-muted-foreground",children:pangkalan.address})]})},pangkalan.id))})]})]}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(Label,{className:"text-base font-semibold",children:["Item LPG ",jsxRuntimeExports.jsx("span",{className:"text-destructive",children:"*"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Pilih jenis dan jumlah LPG yang ingin dipesan"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:formData.items.map((item,index)=>jsxRuntimeExports.jsx(Card,{className:"border border-border",children:jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["Item ",index+1]}),formData.items.length>1&&!isFormDisabled&&jsxRuntimeExports.jsx(Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>handleRemoveItem(item.id),className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Trash2",className:"h-4 w-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{className:"text-sm",children:"Jenis LPG"}),jsxRuntimeExports.jsxs(Select,{value:item.productId,onValueChange:value=>handleProductChange(item.id,value),disabled:isFormDisabled,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"h-9",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Pilih produk..."})}),jsxRuntimeExports.jsx(SelectContent,{children:lpgProducts.filter(product=>!formData.items.some(otherItem=>otherItem.id!==item.id&&otherItem.productId===product.id)).map(product=>{const price=product.selling_price||product.prices?.find(p=>p.is_default)?.price||product.prices?.[0]?.price||0,stock=product.stock?.current||0,isOutOfStock=stock<=0;return jsxRuntimeExports.jsx(SelectItem,{value:product.id,disabled:isOutOfStock,className:isOutOfStock?"opacity-50":"",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between w-full gap-2",children:[jsxRuntimeExports.jsxs("span",{children:[product.name," - ",formatCurrency(price)]}),jsxRuntimeExports.jsxs("span",{className:`text-xs ${isOutOfStock?"text-red-500":"text-muted-foreground"}`,children:["(Stok: ",stock,")"]})]})},product.id)})})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{className:"text-sm",children:"Jumlah"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",size:"icon",className:"h-9 w-9 shrink-0 hover:bg-destructive/10 hover:border-destructive/50 active:scale-95 transition-all select-none",onClick:()=>handleQuantityChange(item.id,Math.max(0,item.quantity-1)),onMouseDown:()=>startHold(item.id,"decrement"),onMouseUp:stopHold,onMouseLeave:stopHold,onTouchStart:()=>startHold(item.id,"decrement"),onTouchEnd:stopHold,disabled:isFormDisabled||item.quantity<=0,children:jsxRuntimeExports.jsx(SafeIcon,{name:"Minus",className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Input,{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:item.quantity||"",onChange:e=>{const val=e.target.value.replace(/\D/g,"");handleQuantityChange(item.id,parseInt(val)||0)},onBlur:()=>handleQuantityBlur(item.id),onWheel:e=>e.currentTarget.blur(),placeholder:"0",className:"h-9 text-center font-medium",disabled:isFormDisabled}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",size:"icon",className:"h-9 w-9 shrink-0 hover:bg-primary/10 hover:border-primary/50 active:scale-95 transition-all select-none",onClick:()=>handleQuantityChange(item.id,item.quantity+1),onMouseDown:()=>startHold(item.id,"increment"),onMouseUp:stopHold,onMouseLeave:stopHold,onTouchStart:()=>startHold(item.id,"increment"),onTouchEnd:stopHold,disabled:isFormDisabled,children:jsxRuntimeExports.jsx(SafeIcon,{name:"Plus",className:"h-4 w-4"})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary rounded-lg",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-muted-foreground",children:"Harga per unit:"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-foreground",children:formatCurrency(item.price)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary/5 rounded-lg border border-primary/20",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-foreground",children:"Subtotal:"}),jsxRuntimeExports.jsx("span",{className:"font-bold text-primary",children:formatCurrency(item.price*item.quantity)})]})]})})},item.id))}),!isFormDisabled&&jsxRuntimeExports.jsxs(Button,{type:"button",variant:"outline",onClick:handleAddItem,className:"w-full border-dashed",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Plus",className:"mr-2 h-4 w-4"}),"Tambah Item LPG"]})]}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"note",className:"text-base font-semibold",children:"Catatan (Opsional)"}),jsxRuntimeExports.jsx(Textarea,{id:"note",placeholder:"Tambahkan catatan untuk pesanan ini...",value:formData.note,onChange:e=>setFormData(prev=>({...prev,note:e.target.value})),className:"min-h-[100px]",disabled:isFormDisabled})]}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[jsxRuntimeExports.jsxs(Button,{type:"button",variant:"outline",onClick:handleCancel,disabled:isSubmitting,children:[jsxRuntimeExports.jsx(SafeIcon,{name:"X",className:"mr-2 h-4 w-4"}),"Batal"]}),jsxRuntimeExports.jsx(Button,{type:"submit",disabled:isSubmitting||!formData.pangkalanId||formData.items.length===0||isFormDisabled,className:"bg-primary hover:bg-primary/90",children:isSubmitting?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"mr-2 h-4 w-4 animate-spin"}),isEditMode?"Memperbarui...":"Menyimpan..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:isEditMode?"Edit":"Save",className:"mr-2 h-4 w-4"}),isEditMode?"Perbarui Pesanan":"Simpan Pesanan"]})})]})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"lg:col-span-1",children:jsxRuntimeExports.jsxs("div",{className:"sticky top-6 glass-card rounded-2xl overflow-hidden",style:{boxShadow:"0 8px 32px -8px rgba(22, 163, 74, 0.15)"},children:[jsxRuntimeExports.jsxs("div",{className:"p-5 border-b border-border/50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"Ringkasan Pesanan"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:isEditMode?"Verifikasi perubahan pesanan":"Verifikasi detail sebelum menyimpan"})]}),jsxRuntimeExports.jsxs("div",{className:"p-5 space-y-4",children:[selectedPangkalan?jsxRuntimeExports.jsx("div",{className:"space-y-2 p-3 bg-secondary rounded-lg border border-border",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Store",className:"h-4 w-4 mt-0.5 text-primary shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-foreground truncate",children:selectedPangkalan.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground truncate",children:selectedPangkalan.address})]})]})}):jsxRuntimeExports.jsx("div",{className:"p-3 bg-muted rounded-lg border border-dashed border-border",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Pilih pangkalan untuk melihat detail"})}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Item Pesanan"}),formData.items.length>0?jsxRuntimeExports.jsx("div",{className:"space-y-2",children:formData.items.map(item=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"bg-primary/10 text-primary border-primary/30",children:item.lpgType}),jsxRuntimeExports.jsxs("span",{className:"text-muted-foreground",children:["× ",item.quantity]})]}),jsxRuntimeExports.jsx("span",{className:"font-medium text-foreground",children:formatCurrency(item.price*item.quantity)})]},item.id))}):jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Belum ada item"})]}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-muted-foreground",children:"Total Item:"}),jsxRuntimeExports.jsxs("span",{className:"font-medium",children:[formData.items.reduce((sum,item)=>sum+item.quantity,0)," tabung"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-muted-foreground",children:"Jenis LPG:"}),jsxRuntimeExports.jsxs("span",{className:"font-medium",children:[new Set(formData.items.map(i=>i.lpgType)).size," jenis"]})]})]}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 p-4 bg-gradient-to-r from-primary/5 to-primary/10 rounded-lg border border-primary/20",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-muted-foreground",children:"Subtotal:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:formatCurrency(calculateSubtotal())})]}),calculateTax()>0&&jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:["PPN 12%",jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-[10px] px-1 py-0 bg-orange-50 text-orange-600 border-orange-200",children:"Non-Subsidi"})]}),jsxRuntimeExports.jsxs("span",{className:"font-medium text-orange-600",children:["+ ",formatCurrency(calculateTax())]})]}),jsxRuntimeExports.jsx(Separator,{className:"my-2"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-baseline",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-foreground",children:"Total Pembayaran:"}),jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-primary",children:formatCurrency(calculateTotal())})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:calculateTax()>0?"Sudah termasuk PPN untuk produk Non-Subsidi":"Produk Subsidi tidak dikenakan PPN"})]}),!isEditMode&&jsxRuntimeExports.jsx("div",{className:"p-3  from-blue-50 to-blue-100/50 rounded-lg border border-blue-200",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Info",className:"h-4 w-4 text-blue-600 shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-blue-700",children:["Pesanan akan dibuat dengan status ",jsxRuntimeExports.jsx("strong",{children:"Menunggu Pembayaran"})]})]})})]})]})})]})}export{CreateOrderForm as default};
