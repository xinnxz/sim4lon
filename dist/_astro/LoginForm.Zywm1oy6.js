import{j as jsxRuntimeExports}from"./jsx-runtime.mvtouYz0.js";import{r as reactExports}from"./index.DcciWILN.js";import{S as SafeIcon,B as Button}from"./SafeIcon.CAGsavDo.js";import{I as Input}from"./input.C9ryBhC0.js";import{L as Label}from"./label.BFF1cpbq.js";import{C as Card,b as CardHeader,c as CardTitle,d as CardDescription,a as CardContent}from"./card.D0gylVsf.js";import{A as Alert,a as AlertDescription}from"./alert.C-aQE-Lx.js";import{t as toast}from"./index.fAd_ikgp.js";import{isAuthenticated,authApi,removeToken}from"./api.Dr7hS9Y8.js";import{c as clearCachedProfile}from"./AuthGuard.DKm2IuCP.js";import"./index.PIAPtHoh.js";import"./index.ubNQCTBn.js";function LoginForm(){const[email,setEmail]=reactExports.useState(""),[password,setPassword]=reactExports.useState(""),[isLoading,setIsLoading]=reactExports.useState(!1),[error,setError]=reactExports.useState(""),[showPassword,setShowPassword]=reactExports.useState(!1),[focusedField,setFocusedField]=reactExports.useState(null);reactExports.useEffect(()=>{(async()=>{if(isAuthenticated())try{const user=await authApi.getProfile(),redirectUrl={ADMIN:"/dashboard-admin",OPERATOR:"/dashboard-admin",PANGKALAN:"/pangkalan/dashboard"}[user.role]||"/dashboard-admin";window.location.href=redirectUrl}catch{removeToken()}})()},[]);const handleSubmit=async e=>{if(e.preventDefault(),setError(""),!email.trim()){setError("Email tidak boleh kosong");return}if(!password){setError("Password tidak boleh kosong");return}setIsLoading(!0);try{const response=await authApi.login({email,password});clearCachedProfile(),toast.success("Login berhasil! Mengalihkan ke dashboard...");const redirectUrl={ADMIN:"/dashboard-admin",OPERATOR:"/dashboard-admin",PANGKALAN:"/pangkalan/dashboard"}[response.user.role]||"/dashboard-admin";window.location.href=redirectUrl}catch(err){setError(err.message||"Email atau password salah"),setIsLoading(!1)}};return jsxRuntimeExports.jsxs(Card,{className:"border-0 shadow-xl animate-scaleIn bg-slate-50/100 backdrop-blur-sm mx-4 sm:mx-0 w-full max-w-md",children:[jsxRuntimeExports.jsxs(CardHeader,{className:"space-y-2 text-center px-4 sm:px-6",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-2 sm:mb-4 mt-4 sm:mt-8",children:jsxRuntimeExports.jsx("img",{src:"/logo-pertamina-2.png",alt:"Pertamina",className:"h-12 sm:h-16 object-contain transition-all duration-300"})}),jsxRuntimeExports.jsx(CardTitle,{className:"text-xl sm:text-2xl font-bold",children:"SIM4LON"}),jsxRuntimeExports.jsx(CardDescription,{className:"text-sm sm:text-base",children:"Sistem Informasi Distribusi LPG"})]}),jsxRuntimeExports.jsx(CardContent,{className:"px-4 sm:px-6",children:jsxRuntimeExports.jsxs("form",{onSubmit:handleSubmit,className:"space-y-4",children:[error&&jsxRuntimeExports.jsxs(Alert,{variant:"destructive",className:"animate-slideInRight",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"AlertCircle",className:"h-4 w-4"}),jsxRuntimeExports.jsx(AlertDescription,{children:error})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 animate-fadeInUp",style:{animationDelay:"0.1s"},children:[jsxRuntimeExports.jsx(Label,{htmlFor:"email",className:"text-sm font-medium transition-colors",style:{color:focusedField==="email"?"hsl(152, 100%, 30%)":void 0},children:"Email"}),jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Mail",className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none transition-colors group-focus-within:text-emerald-600"}),jsxRuntimeExports.jsx(Input,{id:"email",type:"email",placeholder:"Masukkan email Anda",value:email,onChange:e=>setEmail(e.target.value),onFocus:()=>setFocusedField("email"),onBlur:()=>setFocusedField(null),disabled:isLoading,className:"pl-10 h-11 sm:h-10 text-base sm:text-sm transition-all duration-200 focus:ring-2 focus:ring-emerald-600/30 focus:border-emerald-600",autoComplete:"email"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 animate-fadeInUp",style:{animationDelay:"0.2s"},children:[jsxRuntimeExports.jsx(Label,{htmlFor:"password",className:"text-sm font-medium transition-colors",style:{color:focusedField==="password"?"hsl(152, 100%, 30%)":void 0},children:"Password"}),jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Lock",className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none transition-colors group-focus-within:text-emerald-600"}),jsxRuntimeExports.jsx(Input,{id:"password",type:showPassword?"text":"password",placeholder:"Masukkan password Anda",value:password,onChange:e=>setPassword(e.target.value),onFocus:()=>setFocusedField("password"),onBlur:()=>setFocusedField(null),disabled:isLoading,className:"pl-10 pr-12 h-11 sm:h-10 text-base sm:text-sm transition-all duration-200 focus:ring-2 focus:ring-emerald-600/30 focus:border-emerald-600",autoComplete:"current-password"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>setShowPassword(!showPassword),disabled:isLoading,className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 text-muted-foreground hover:text-foreground transition-all duration-200 disabled:opacity-50 hover:scale-110 touch-manipulation","aria-label":showPassword?"Sembunyikan password":"Tampilkan password",children:jsxRuntimeExports.jsx(SafeIcon,{name:showPassword?"EyeOff":"Eye",className:"h-4 w-4"})})]})]}),jsxRuntimeExports.jsx("div",{className:"animate-fadeInUp",style:{animationDelay:"0.4s"},children:jsxRuntimeExports.jsx(Button,{type:"submit",disabled:isLoading,className:"w-full h-12 sm:h-10 text-base sm:text-sm text-white font-medium button-interactive transition-all duration-300 hover:shadow-lg disabled:opacity-70 touch-manipulation",style:{background:"linear-gradient(to right, hsl(152, 100%, 40%), hsl(152, 100%, 35%))",boxShadow:isLoading?void 0:"0 4px 14px 0 hsla(152, 100%, 30%, 0.25)"},children:isLoading?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"mr-2 h-4 w-4 animate-spin"}),"Sedang Masuk..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"LogIn",className:"mr-2 h-4 w-4 transition-transform group-active:translate-x-1"}),"Masuk"]})})}),jsxRuntimeExports.jsxs("div",{className:"mt-6 p-3 sm:p-3 bg-secondary/50 rounded-lg border border-border animate-fadeInUp space-y-1",style:{animationDelay:"0.5s"},children:[jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Demo:"})," admin@agen.com / admin123"]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Demo:"})," operator@demo.com / operator123"]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Demo:"})," pkl001@demo.com / pangkalan123"]})]})]})})]})}export{LoginForm as default};
