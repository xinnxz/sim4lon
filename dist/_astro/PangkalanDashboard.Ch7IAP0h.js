import{j as jsxRuntimeExports}from"./jsx-runtime.mvtouYz0.js";import{r as reactExports}from"./index.DcciWILN.js";import{C as Card,b as CardHeader,c as CardTitle,a as CardContent,d as CardDescription}from"./card.D0gylVsf.js";import{S as SafeIcon,B as Button}from"./SafeIcon.CAGsavDo.js";import{authApi,consumerOrdersApi,pangkalanStockApi,expensesApi,lpgPricesApi}from"./api.Dr7hS9Y8.js";import{R as ResponsiveContainer,T as Tooltip,C as Cell}from"./generateCategoricalChart.Jvaki1lA.js";import{A as AreaChart,a as Area}from"./AreaChart.D112rpOF.js";import{C as CartesianGrid,X as XAxis,Y as YAxis}from"./YAxis.DHdzTV6E.js";import{P as PieChart,a as Pie}from"./PieChart.Dm24sdDM.js";const lpgTypeConfig={gr220:{name:"Bright Gas 220gr",color:"#FFA500"},"220gr":{name:"Bright Gas 220gr",color:"#FFA500"},"3kg":{name:"3 kg",color:"#22C55E"},"5kg":{name:"5.5 kg",color:"#ff82c5ff"},"12kg":{name:"12 kg",color:"#3B82F6"},"50kg":{name:"50 kg",color:"#ef0e0eff"},kg3:{name:"3 kg",color:"#22C55E"},kg5:{name:"5.5 kg",color:"#ff82c5ff"},kg12:{name:"12 kg",color:"#3B82F6"},kg50:{name:"50 kg",color:"#ef0e0eff"}},CustomTooltip=({active,payload,label})=>active&&payload&&payload.length?jsxRuntimeExports.jsxs("div",{className:"bg-slate-900/95 backdrop-blur-sm px-4 py-3 rounded-xl shadow-2xl border border-slate-700",children:[jsxRuntimeExports.jsx("p",{className:"text-white font-semibold text-sm mb-2",children:label}),payload.map((item,index)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:item.color}}),jsxRuntimeExports.jsxs("span",{className:"text-slate-300",children:[item.name,":"]}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(item.value)})]},index))]}):null,PieTooltip=({active,payload})=>{if(active&&payload&&payload.length){const data=payload[0],total=payload[0]?.payload?.total||0,percentage=total>0?(data.value/total*100).toFixed(1):"0",qty=data.value;let status={text:"Aman",color:"text-green-600",bg:"bg-green-100"};return qty<=10?status={text:"Kritis!",color:"text-red-600",bg:"bg-red-100"}:qty<=30&&(status={text:"Menipis",color:"text-orange-600",bg:"bg-orange-100"}),jsxRuntimeExports.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-2xl border border-slate-200 min-w-[160px]",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:data.payload.color}}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-slate-900",children:data.payload.name})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center",children:jsxRuntimeExports.jsxs("span",{className:"text-lg font-bold text-slate-800",children:[data.value," tabung"]})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-slate-500 text-sm",children:"Proporsi:"}),jsxRuntimeExports.jsxs("span",{className:"font-semibold text-slate-700",children:[percentage,"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center pt-1 border-t border-slate-100 mt-2",children:[jsxRuntimeExports.jsx("span",{className:"text-slate-500 text-sm",children:"Status:"}),jsxRuntimeExports.jsx("span",{className:`text-sm font-semibold px-2 py-0.5 rounded-full ${status.bg} ${status.color}`,children:status.text})]})]})]})}return null},EXPENSE_CATEGORIES={OPERASIONAL:{label:"Operasional",color:"#64748B"},TRANSPORT:{label:"Transport",color:"#F97316"},SEWA:{label:"Sewa",color:"#A855F7"},LISTRIK:{label:"Listrik/Air",color:"#EAB308"},GAJI:{label:"Gaji",color:"#3B82F6"},LAINNYA:{label:"Lainnya",color:"#6B7280"}};function PangkalanDashboard(){const[profile,setProfile]=reactExports.useState(null),[stats,setStats]=reactExports.useState(null),[recentSales,setRecentSales]=reactExports.useState([]),[chartData,setChartData]=reactExports.useState([]),[stockData,setStockData]=reactExports.useState([]),[totalStock,setTotalStock]=reactExports.useState(0),[expenseSummary,setExpenseSummary]=reactExports.useState({total:0,byCategory:[]}),[isLoading,setIsLoading]=reactExports.useState(!0),[error,setError]=reactExports.useState(null);reactExports.useEffect(()=>{const footer=document.getElementById("app-footer");return footer&&(footer.style.display=isLoading?"none":""),()=>{footer&&(footer.style.display="")}},[isLoading]),reactExports.useEffect(()=>{(async()=>{try{setIsLoading(!0),setError(null);const profileData=await authApi.getProfile();setProfile(profileData);const now=new Date,startDate=`${now.getFullYear()}-${String(now.getMonth()+1).padStart(2,"0")}-01`,endDate=new Date(now.getFullYear(),now.getMonth()+1,0).toISOString().split("T")[0],[statsData,recentData,chartDataFromApi,stockResponse,expenseData,pricesData]=await Promise.all([consumerOrdersApi.getStats(!0),consumerOrdersApi.getRecent(5),consumerOrdersApi.getChartData(),pangkalanStockApi.getStockLevels(),expensesApi.getAll(startDate,endDate),lpgPricesApi.getAll()]);if(setStats(statsData),setRecentSales(recentData),chartDataFromApi&&chartDataFromApi.length>0&&setChartData(chartDataFromApi),stockResponse&&stockResponse.stocks){const normalizeType=type=>{if(type.startsWith("kg"))return type;const match=type.match(/^(\d+\.?\d*)kg$/);return match?`kg${match[1]}`:type.match(/g?r?220g?r?/i)?"gr220":type},activeLpgTypes=pricesData.filter(p=>p.is_active).map(p=>normalizeType(p.lpg_type)),activeStocks=stockResponse.stocks.filter(stock=>activeLpgTypes.includes(normalizeType(stock.lpg_type))),total=activeStocks.reduce((sum,s)=>sum+s.qty,0),pieData=activeStocks.map(stock=>({name:lpgTypeConfig[stock.lpg_type]?.name||stock.lpg_type,value:stock.qty,color:lpgTypeConfig[stock.lpg_type]?.color||"#94A3B8",total}));setStockData(pieData),setTotalStock(total)}if(expenseData&&expenseData.length>0){const total=expenseData.reduce((sum,e)=>sum+Number(e.amount),0),byCategory={};expenseData.forEach(e=>{byCategory[e.category]=(byCategory[e.category]||0)+Number(e.amount)});const pieData=Object.entries(byCategory).map(([cat,amount])=>({name:EXPENSE_CATEGORIES[cat]?.label||cat,value:amount,color:EXPENSE_CATEGORIES[cat]?.color||"#6B7280"}));setExpenseSummary({total,byCategory:pieData})}}catch(err){console.error("Failed to fetch dashboard data:",err),setError(err?.message||"Failed to load data")}finally{setIsLoading(!1)}})()},[]);const formatCurrency=value=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(value),formatCurrencyShort=value=>value>=1e6?`${(value/1e6).toFixed(1)}jt`:value>=1e3?`${(value/1e3).toFixed(0)}rb`:value.toString(),formatDate=dateStr=>new Date(dateStr).toLocaleDateString("id-ID",{day:"numeric",month:"short"}),formatTime=dateStr=>new Date(dateStr).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),enhancedChartData=chartData.map(day=>({...day,name:formatDate(day.date)}));return isLoading?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-[500px]",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mx-auto"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"LayoutDashboard",className:"h-6 w-6 text-blue-600"})})]}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 mt-4 font-medium",children:"Memuat dashboard..."})]})}):error?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-[500px]",children:jsxRuntimeExports.jsxs("div",{className:"text-center max-w-md",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx(SafeIcon,{name:"AlertTriangle",className:"h-8 w-8 text-red-500"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Gagal Memuat Data"}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 mb-4",children:error}),jsxRuntimeExports.jsxs(Button,{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"RefreshCw",className:"h-4 w-4 mr-2"}),"Coba Lagi"]})]})}):jsxRuntimeExports.jsxs("div",{className:"space-y-8 pb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 animate-fadeInDown",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"h-12 w-1.5 rounded-full bg-gradient-to-b from-blue-500 via-blue-400 to-emerald-500 animate-lineGrow"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Dashboard"}),jsxRuntimeExports.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mt-1 flex items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Sparkles",className:"h-4 w-4 text-amber-500 animate-pulse"}),"Selamat datang, ",profile?.name?.split(" ")[0]||"Pak"]})]})]}),jsxRuntimeExports.jsxs(Button,{className:"group bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl shadow-lg shadow-blue-500/25 hover:shadow-xl hover:shadow-blue-500/30 transition-all active:scale-95",onClick:()=>window.location.href="/pangkalan/penjualan/catat",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Plus",className:"h-4 w-4 mr-2 transition-transform duration-300 group-hover:rotate-90"}),"Catat Penjualan"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-4",children:[jsxRuntimeExports.jsx("div",{className:"animate-slideInBlur stagger-1",style:{opacity:0},children:jsxRuntimeExports.jsxs(Card,{className:"relative overflow-hidden bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/20 hover:shadow-xl hover:shadow-blue-500/30 transition-all duration-300 hover:-translate-y-1 hover:scale-[1.02] group",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/15 rounded-full -translate-y-1/2 translate-x-1/2 animate-floatOrb"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2 animate-floatOrb-delayed"}),jsxRuntimeExports.jsx(CardHeader,{className:"pb-2 relative",children:jsxRuntimeExports.jsxs(CardTitle,{className:"text-sm font-medium opacity-90 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"p-1.5 rounded-lg bg-white/20 transition-transform duration-300 group-hover:scale-110 group-hover:rotate-12",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Banknote",className:"h-4 w-4"})}),"Penjualan Hari Ini"]})}),jsxRuntimeExports.jsxs(CardContent,{className:"relative",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl lg:text-3xl font-bold tracking-tight",children:formatCurrency(stats?.total_revenue||0)}),jsxRuntimeExports.jsxs("p",{className:"text-blue-100 text-sm mt-2 flex items-center gap-1",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Flame",className:"h-3.5 w-3.5"}),stats?.total_qty||0," tabung terjual"]})]})]})}),jsxRuntimeExports.jsx("div",{className:"animate-slideInBlur stagger-2",style:{opacity:0},children:jsxRuntimeExports.jsxs(Card,{className:"relative overflow-hidden bg-gradient-to-br from-green-500 to-emerald-600 text-white shadow-lg shadow-green-500/20 hover:shadow-xl hover:shadow-green-500/30 transition-all duration-300 hover:-translate-y-1 hover:scale-[1.02] group",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/15 rounded-full -translate-y-1/2 translate-x-1/2 animate-floatOrb"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2 animate-floatOrb-delayed"}),jsxRuntimeExports.jsx(CardHeader,{className:"pb-2 relative",children:jsxRuntimeExports.jsxs(CardTitle,{className:"text-sm font-medium opacity-90 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"p-1.5 rounded-lg bg-white/20 transition-transform duration-300 group-hover:scale-110 group-hover:rotate-12",children:jsxRuntimeExports.jsx(SafeIcon,{name:"BadgeDollarSign",className:"h-4 w-4"})}),"Laba Bersih (Profit)"]})}),jsxRuntimeExports.jsxs(CardContent,{className:"relative",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl lg:text-3xl font-bold tracking-tight",children:formatCurrency(stats?.laba_bersih||0)}),jsxRuntimeExports.jsx("p",{className:"text-green-100 text-sm mt-2",children:"Hari ini"})]})]})}),jsxRuntimeExports.jsx("div",{className:"animate-slideInBlur stagger-3",style:{opacity:0},children:jsxRuntimeExports.jsxs(Card,{className:"relative overflow-hidden bg-white dark:bg-slate-900 shadow-lg border-0 hover:shadow-xl transition-all duration-300 hover:-translate-y-1 hover:scale-[1.02] group",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-purple-100 dark:bg-purple-900/30 rounded-full -translate-y-1/2 translate-x-1/2 animate-floatOrb"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 bg-purple-50 dark:bg-purple-900/20 rounded-full translate-y-1/2 -translate-x-1/2 animate-floatOrb-delayed"}),jsxRuntimeExports.jsx(CardHeader,{className:"pb-2 relative",children:jsxRuntimeExports.jsxs(CardTitle,{className:"text-sm font-medium text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center transition-transform duration-300 group-hover:scale-110 group-hover:rotate-12",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Receipt",className:"h-4 w-4 text-purple-600 dark:text-purple-400"})}),"Total Transaksi"]})}),jsxRuntimeExports.jsxs(CardContent,{className:"relative",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white",children:stats?.total_orders||0}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-2",children:"Transaksi hari ini"})]})]})}),jsxRuntimeExports.jsx("div",{className:"animate-slideInBlur stagger-4",style:{opacity:0},children:jsxRuntimeExports.jsxs(Card,{className:"relative overflow-hidden bg-white dark:bg-slate-900 shadow-lg border-0 hover:shadow-xl transition-all duration-300 hover:-translate-y-1 hover:scale-[1.02] group",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-amber-100 dark:bg-amber-900/30 rounded-full -translate-y-1/2 translate-x-1/2 animate-floatOrb"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 bg-amber-50 dark:bg-amber-900/20 rounded-full translate-y-1/2 -translate-x-1/2 animate-floatOrb-delayed"}),jsxRuntimeExports.jsx(CardHeader,{className:"pb-2 relative",children:jsxRuntimeExports.jsxs(CardTitle,{className:"text-sm font-medium text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg bg-amber-100 dark:bg-amber-900/50 flex items-center justify-center transition-transform duration-300 group-hover:scale-110 group-hover:rotate-12",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Package",className:"h-4 w-4 text-amber-600 dark:text-amber-400"})}),"Total Stok"]})}),jsxRuntimeExports.jsxs(CardContent,{className:"relative",children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white",children:[totalStock," ",jsxRuntimeExports.jsx("span",{className:"text-lg font-normal text-slate-500 dark:text-slate-400",children:"tabung"})]}),jsxRuntimeExports.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-2",children:[stockData.length," tipe LPG"]})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[jsxRuntimeExports.jsxs(Card,{className:"lg:col-span-2 bg-white shadow-lg rounded-2xl border-0 overflow-hidden",children:[jsxRuntimeExports.jsx(CardHeader,{className:"border-b border-slate-100 bg-slate-50/50",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"TrendingUp",className:"h-4 w-4 text-blue-600"})}),"Trend Penjualan, Modal, Pengeluaran & Laba"]}),jsxRuntimeExports.jsx(CardDescription,{className:"mt-1",children:"7 hari terakhir • Laba Bersih = (Penjualan - Modal) - Pengeluaran"})]})})}),jsxRuntimeExports.jsxs(CardContent,{className:"pt-6",children:[jsxRuntimeExports.jsx("div",{className:"h-[280px]",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(AreaChart,{data:enhancedChartData,children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("linearGradient",{id:"penjualanGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.3}),jsxRuntimeExports.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]}),jsxRuntimeExports.jsxs("linearGradient",{id:"labaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"5%",stopColor:"#22C55E",stopOpacity:.3}),jsxRuntimeExports.jsx("stop",{offset:"95%",stopColor:"#22C55E",stopOpacity:0})]})]}),jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#E2E8F0",vertical:!1}),jsxRuntimeExports.jsx(XAxis,{dataKey:"name",stroke:"#64748B",fontSize:12,tickLine:!1,axisLine:!1}),jsxRuntimeExports.jsx(YAxis,{stroke:"#64748B",fontSize:12,tickFormatter:formatCurrencyShort,tickLine:!1,axisLine:!1}),jsxRuntimeExports.jsx(Tooltip,{content:jsxRuntimeExports.jsx(CustomTooltip,{})}),jsxRuntimeExports.jsx(Area,{type:"monotone",dataKey:"penjualan",name:"Penjualan",stroke:"#3B82F6",strokeWidth:2,fill:"url(#penjualanGradient)",dot:{r:4,fill:"#3B82F6",strokeWidth:2,stroke:"#fff"}}),jsxRuntimeExports.jsx(Area,{type:"monotone",dataKey:"modal",name:"Modal",stroke:"#F97316",strokeWidth:2,fill:"transparent",dot:{r:3,fill:"#F97316",strokeWidth:2,stroke:"#fff"}}),jsxRuntimeExports.jsx(Area,{type:"monotone",dataKey:"pengeluaran",name:"Pengeluaran",stroke:"#EF4444",strokeWidth:2,strokeDasharray:"5 5",fill:"transparent",dot:{r:3,fill:"#EF4444",strokeWidth:2,stroke:"#fff"}}),jsxRuntimeExports.jsx(Area,{type:"monotone",dataKey:"laba",name:"Laba Bersih",stroke:"#22C55E",strokeWidth:3,fill:"url(#labaGradient)",dot:{r:5,fill:"#22C55E",strokeWidth:3,stroke:"#fff"}})]})})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center gap-6 mt-4 pt-4 border-t border-slate-100",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-slate-600",children:"Penjualan"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-slate-600",children:"Modal"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-0.5 bg-red-500",style:{borderTop:"2px dashed #EF4444"}}),jsxRuntimeExports.jsx("span",{className:"text-sm text-slate-600",children:"Pengeluaran"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-slate-600",children:"Laba Bersih"})]})]})]})]}),jsxRuntimeExports.jsxs(Card,{className:"bg-white shadow-lg rounded-2xl border-0 overflow-hidden",children:[jsxRuntimeExports.jsxs(CardHeader,{className:"border-b border-slate-100 bg-slate-50/50",children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-100 flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"PieChart",className:"h-4 w-4 text-emerald-600"})}),"Stok per Tipe"]}),jsxRuntimeExports.jsxs(CardDescription,{children:["Total: ",totalStock," tabung"]})]}),jsxRuntimeExports.jsxs(CardContent,{className:"pt-6",children:[jsxRuntimeExports.jsx("div",{className:"h-[200px]",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(PieChart,{children:[jsxRuntimeExports.jsx(Pie,{data:stockData,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,dataKey:"value",strokeWidth:3,stroke:"#fff",children:stockData.map((entry,index)=>jsxRuntimeExports.jsx(Cell,{fill:entry.color},`cell-${index}`))}),jsxRuntimeExports.jsx(Tooltip,{content:jsxRuntimeExports.jsx(PieTooltip,{})})]})})}),jsxRuntimeExports.jsx("div",{className:"space-y-2 mt-4",children:stockData.map((item,index)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-slate-50 hover:bg-slate-100 transition-colors",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:item.color}}),jsxRuntimeExports.jsx("span",{className:"font-medium text-slate-700",children:item.name})]}),jsxRuntimeExports.jsx("span",{className:"font-bold text-slate-900",children:item.value})]},index))})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[jsxRuntimeExports.jsxs(Card,{className:"bg-white shadow-lg rounded-2xl border-0 overflow-hidden",children:[jsxRuntimeExports.jsx(CardHeader,{className:"border-b border-slate-100 bg-slate-50/50",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-100 flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Wallet",className:"h-4 w-4 text-red-600"})}),"Pengeluaran Bulan Ini"]}),jsxRuntimeExports.jsxs(CardDescription,{className:"mt-1",children:["Total: ",formatCurrency(expenseSummary.total)]})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",asChild:!0,children:jsxRuntimeExports.jsx("a",{href:"/pangkalan/pengeluaran",children:"Kelola →"})})]})}),jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:expenseSummary.byCategory.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Wallet",className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Belum ada pengeluaran bulan ini"})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6",children:[jsxRuntimeExports.jsx("div",{className:"h-[150px] w-[150px] flex-shrink-0",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(PieChart,{children:[jsxRuntimeExports.jsx(Pie,{data:expenseSummary.byCategory,cx:"50%",cy:"50%",innerRadius:40,outerRadius:65,dataKey:"value",strokeWidth:2,stroke:"#fff",children:expenseSummary.byCategory.map((entry,index)=>jsxRuntimeExports.jsx(Cell,{fill:entry.color},`expense-cell-${index}`))}),jsxRuntimeExports.jsx(Tooltip,{content:jsxRuntimeExports.jsx(PieTooltip,{})})]})})}),jsxRuntimeExports.jsx("div",{className:"flex-1 space-y-2",children:expenseSummary.byCategory.slice(0,4).map((item,index)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:item.color}}),jsxRuntimeExports.jsx("span",{className:"text-sm text-slate-700",children:item.name})]}),jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-slate-900",children:formatCurrency(item.value)})]},index))})]})})]}),jsxRuntimeExports.jsxs(Card,{className:"bg-white shadow-lg rounded-2xl border-0 overflow-hidden",children:[jsxRuntimeExports.jsx(CardHeader,{className:"border-b border-slate-100 bg-slate-50/50",children:jsxRuntimeExports.jsxs(CardTitle,{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-100 flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"TrendingUp",className:"h-4 w-4 text-purple-600"})}),"Ringkasan Bulan Ini"]})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-3 pt-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-blue-50 border border-blue-100",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"ArrowUpRight",className:"h-5 w-5 text-blue-600"})}),jsxRuntimeExports.jsx("span",{className:"text-slate-700",children:"Total Penjualan"})]}),jsxRuntimeExports.jsx("span",{className:"text-xl font-bold text-blue-600",children:formatCurrency(stats?.total_revenue||0)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-red-50 border border-red-100",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"ArrowDownRight",className:"h-5 w-5 text-red-600"})}),jsxRuntimeExports.jsx("span",{className:"text-slate-700",children:"Total Pengeluaran"})]}),jsxRuntimeExports.jsxs("span",{className:"text-xl font-bold text-red-600",children:["-",formatCurrency(expenseSummary.total)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Banknote",className:"h-5 w-5 text-green-600"})}),jsxRuntimeExports.jsx("span",{className:"font-medium text-green-700",children:"Laba Bersih"})]}),jsxRuntimeExports.jsx("span",{className:"text-xl font-bold text-green-600",children:formatCurrency(stats?.laba_bersih||0)})]})]})]})]}),jsxRuntimeExports.jsxs(Card,{className:"bg-white shadow-lg rounded-2xl border-0 overflow-hidden",children:[jsxRuntimeExports.jsx(CardHeader,{className:"border-b border-slate-100 bg-slate-50/50",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg bg-amber-100 flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Clock",className:"h-4 w-4 text-amber-600"})}),"Penjualan Terakhir"]}),jsxRuntimeExports.jsx(CardDescription,{className:"mt-1",children:"5 transaksi terbaru hari ini"})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",asChild:!0,children:jsxRuntimeExports.jsx("a",{href:"/pangkalan/penjualan",children:"Lihat Semua →"})})]})}),jsxRuntimeExports.jsx(CardContent,{className:"p-0",children:recentSales.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Inbox",className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Belum ada penjualan hari ini"}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>window.location.href="/pangkalan/penjualan/catat",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Plus",className:"h-4 w-4 mr-2"}),"Catat Penjualan Pertama"]})]}):jsxRuntimeExports.jsx("div",{className:"divide-y divide-slate-100",children:recentSales.map((sale,index)=>jsxRuntimeExports.jsxs("div",{className:`flex items-center justify-between p-4 hover:bg-slate-50/50 transition-colors ${index%2===0?"bg-white":"bg-slate-50/30"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-100 to-blue-50 flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Flame",className:"h-5 w-5 text-blue-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-semibold text-slate-900",children:sale.consumers?.name||sale.consumer_name||"Walk-in Customer"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-500",children:[sale.qty," × ",lpgTypeConfig[sale.lpg_type]?.name||sale.lpg_type]})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("p",{className:"font-bold text-slate-900",children:formatCurrency(sale.total_amount)}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-400",children:formatTime(sale.sale_date)})]})]},sale.id))})})]})]})}export{PangkalanDashboard as default};
