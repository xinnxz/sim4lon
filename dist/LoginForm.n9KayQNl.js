import{j as jsxRuntimeExports}from"./jsx-runtime.mvtouYz0.js";import{r as reactExports}from"./index.DcciWILN.js";import{S as SafeIcon,B as Button}from"./SafeIcon.C08LGL0m.js";import{I as Input}from"./input.B0jSBU-X.js";import{L as Label}from"./label.CykMmJMJ.js";import{C as Card,a as CardHeader,b as CardTitle,c as CardDescription,d as CardContent}from"./card.SxAweRZB.js";import{A as Alert,a as AlertDescription}from"./alert.By6U2YgB.js";import{t as toast}from"./index.fAd_ikgp.js";import{isAuthenticated,authApi,removeToken}from"./api.B5PpFILw.js";import{c as clearCachedProfile}from"./AuthGuard.BAZOsFzI.js";import"./index.PIAPtHoh.js";import"./index.ubNQCTBn.js";function LoginForm(){const[email,setEmail]=reactExports.useState(""),[password,setPassword]=reactExports.useState(""),[isLoading,setIsLoading]=reactExports.useState(!1),[error,setError]=reactExports.useState(""),[showPassword,setShowPassword]=reactExports.useState(!1),[focusedField,setFocusedField]=reactExports.useState(null);reactExports.useEffect(()=>{(async()=>{if(isAuthenticated())try{const redirectUrl=(await authApi.getProfile()).role==="ADMIN"?"/dashboard-admin":"/dashboard-operator";window.location.href=redirectUrl}catch{removeToken()}})()},[]);const handleSubmit=async e=>{if(e.preventDefault(),setError(""),!email.trim()){setError("Email tidak boleh kosong");return}if(!password){setError("Password tidak boleh kosong");return}setIsLoading(!0);try{const response=await authApi.login({email,password});clearCachedProfile(),toast.success("Login berhasil! Mengalihkan ke dashboard...");const redirectUrl=response.user.role==="ADMIN"?"/dashboard-admin":"/dashboard-operator";window.location.href=redirectUrl}catch(err){setError(err.message||"Email atau password salah"),setIsLoading(!1)}};return jsxRuntimeExports.jsxs(Card,{className:"border-0 shadow-lg animate-scaleIn",children:[jsxRuntimeExports.jsxs(CardHeader,{className:"space-y-2 text-center",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-4",children:jsxRuntimeExports.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-lg bg-gradient-to-br from-primary to-primary/80",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Flame",className:"h-8 w-8 text-primary-foreground"})})}),jsxRuntimeExports.jsx(CardTitle,{className:"text-2xl font-bold",children:"SIM4LON"}),jsxRuntimeExports.jsx(CardDescription,{className:"text-base",children:"Sistem Informasi Distribusi LPG"})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("form",{onSubmit:handleSubmit,className:"space-y-4",children:[error&&jsxRuntimeExports.jsxs(Alert,{variant:"destructive",className:"animate-slideInRight",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"AlertCircle",className:"h-4 w-4"}),jsxRuntimeExports.jsx(AlertDescription,{children:error})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 animate-fadeInUp",style:{animationDelay:"0.1s"},children:[jsxRuntimeExports.jsx(Label,{htmlFor:"email",className:"text-sm font-medium transition-colors",style:{color:focusedField==="email"?"hsl(var(--primary))":void 0},children:"Email"}),jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Mail",className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none transition-colors group-focus-within:text-primary"}),jsxRuntimeExports.jsx(Input,{id:"email",type:"email",placeholder:"Masukkan email Anda",value:email,onChange:e=>setEmail(e.target.value),onFocus:()=>setFocusedField("email"),onBlur:()=>setFocusedField(null),disabled:isLoading,className:"pl-10 h-10 transition-all duration-200 focus:ring-2 focus:ring-primary/30 focus:border-primary",autoComplete:"email"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 animate-fadeInUp",style:{animationDelay:"0.2s"},children:[jsxRuntimeExports.jsx(Label,{htmlFor:"password",className:"text-sm font-medium transition-colors",style:{color:focusedField==="password"?"hsl(var(--primary))":void 0},children:"Password"}),jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Lock",className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none transition-colors group-focus-within:text-primary"}),jsxRuntimeExports.jsx(Input,{id:"password",type:showPassword?"text":"password",placeholder:"Masukkan password Anda",value:password,onChange:e=>setPassword(e.target.value),onFocus:()=>setFocusedField("password"),onBlur:()=>setFocusedField(null),disabled:isLoading,className:"pl-10 pr-10 h-10 transition-all duration-200 focus:ring-2 focus:ring-primary/30 focus:border-primary",autoComplete:"current-password"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>setShowPassword(!showPassword),disabled:isLoading,className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-all duration-200 disabled:opacity-50 hover:scale-110","aria-label":showPassword?"Sembunyikan password":"Tampilkan password",children:jsxRuntimeExports.jsx(SafeIcon,{name:showPassword?"EyeOff":"Eye",className:"h-4 w-4"})})]})]}),jsxRuntimeExports.jsx("div",{className:"animate-fadeInUp",style:{animationDelay:"0.4s"},children:jsxRuntimeExports.jsx(Button,{type:"submit",disabled:isLoading,className:"w-full h-10 bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary text-primary-foreground font-medium button-interactive transition-all duration-300 hover:shadow-lg hover:shadow-primary/25 disabled:opacity-70",children:isLoading?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"mr-2 h-4 w-4 animate-spin"}),"Sedang Masuk..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"LogIn",className:"mr-2 h-4 w-4 transition-transform group-active:translate-x-1"}),"Masuk"]})})}),jsxRuntimeExports.jsx("div",{className:"mt-6 p-3 bg-secondary/50 rounded-lg border border-border animate-fadeInUp",style:{animationDelay:"0.5s"},children:jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Demo:"})," admin@sim4lon.co.id / admin123"]})})]})})]})}export{LoginForm as default};
