import{j as jsxRuntimeExports}from"./jsx-runtime.mvtouYz0.js";import{r as reactExports}from"./index.DcciWILN.js";import{C as Card,d as CardContent,a as CardHeader,b as CardTitle,c as CardDescription}from"./card.SxAweRZB.js";import{B as Badge}from"./badge.BFgaaq5n.js";import{S as Separator}from"./separator.D_t_gK4i.js";import{A as Avatar,a as AvatarImage,b as AvatarFallback}from"./avatar.DQITNWzQ.js";import{S as SafeIcon,B as Button}from"./SafeIcon.C08LGL0m.js";import{authApi}from"./api.B5PpFILw.js";import"./index.PIAPtHoh.js";import"./index.ubNQCTBn.js";import"./index.BB0xO63c.js";const API_BASE_URL="http://localhost:3000",getAvatarUrl=url=>{if(url)return url.startsWith("http")?url:`${API_BASE_URL}/api${url}`};function ProfileCard(){const[profile,setProfile]=reactExports.useState(null),[isLoading,setIsLoading]=reactExports.useState(!0),[error,setError]=reactExports.useState(null);reactExports.useEffect(()=>{(async()=>{try{setIsLoading(!0);const data=await authApi.getProfile();setProfile(data),setError(null)}catch(err){console.error("Failed to fetch profile:",err),setError("Gagal memuat profil")}finally{setIsLoading(!1)}})()},[]);const formatDate=dateString=>new Date(dateString).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});if(isLoading)return jsxRuntimeExports.jsx(Card,{className:"border shadow-card",children:jsxRuntimeExports.jsx(CardContent,{className:"p-8 flex items-center justify-center",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"h-8 w-8 animate-spin text-muted-foreground"})})});if(error||!profile)return jsxRuntimeExports.jsx(Card,{className:"border shadow-card",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-8 text-center",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"AlertCircle",className:"h-12 w-12 mx-auto mb-4 text-destructive"}),jsxRuntimeExports.jsx("p",{className:"text-destructive",children:error||"Profil tidak ditemukan"}),jsxRuntimeExports.jsx(Button,{variant:"outline",className:"mt-4",onClick:()=>window.location.reload(),children:"Coba Lagi"})]})});const initials=profile.name.split(" ").map(n=>n[0]).join("").toUpperCase().slice(0,2);return jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsxs(Card,{className:"border shadow-card",children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Informasi Profil"}),jsxRuntimeExports.jsx(CardDescription,{children:"Detail akun Anda"})]}),jsxRuntimeExports.jsxs(Badge,{variant:"outline",className:`${profile.is_active?"bg-green-50 text-primary border-primary/30":"bg-gray-50"}`,children:[jsxRuntimeExports.jsx("span",{className:`h-2 w-2 rounded-full mr-2 ${profile.is_active?"bg-primary":"bg-gray-400"}`}),profile.is_active?"Aktif":"Tidak Aktif"]})]})}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs(CardContent,{className:"pt-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 mb-8",children:[jsxRuntimeExports.jsxs(Avatar,{className:"h-24 w-24 shrink-0",children:[jsxRuntimeExports.jsx(AvatarImage,{src:getAvatarUrl(profile.avatar_url),alt:profile.name}),jsxRuntimeExports.jsx(AvatarFallback,{className:"bg-primary text-primary-foreground text-lg font-bold",children:initials})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-foreground",children:profile.name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-primary font-medium mt-1",children:profile.role==="ADMIN"?"Administrator":"Operator"})]})]}),jsxRuntimeExports.jsx(Separator,{className:"my-6"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-foreground",children:"Informasi Kontak"}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Mail",className:"h-5 w-5 text-primary mt-0.5 shrink-0"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-foreground break-all",children:profile.email})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Phone",className:"h-5 w-5 text-primary mt-0.5 shrink-0"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Telepon"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-foreground",children:profile.phone||"-"})]})]})]})]}),jsxRuntimeExports.jsx(Separator,{className:"my-6"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-foreground",children:"Detail Akun"}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"bg-secondary/50 rounded-lg p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"ID User"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-mono font-medium text-foreground",children:profile.code||"USR-001"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-secondary/50 rounded-lg p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Tanggal Bergabung"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-foreground",children:formatDate(profile.created_at)})]})]})]})]})]})})}export{ProfileCard as default};
