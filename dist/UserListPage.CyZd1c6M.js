import{j as jsxRuntimeExports}from"./jsx-runtime.mvtouYz0.js";import{r as reactExports}from"./index.DcciWILN.js";import{S as SafeIcon,B as Button}from"./SafeIcon.C08LGL0m.js";import{I as Input}from"./input.B0jSBU-X.js";import{C as Card,a as CardHeader,b as CardTitle,c as CardDescription,d as CardContent}from"./card.SxAweRZB.js";import{T as Tilt3DCard}from"./Tilt3DCard.PsjhSQ2O.js";import{T as Table,a as TableHeader,b as TableRow,c as TableHead,d as TableBody,e as TableCell}from"./table.Dsw4hYLC.js";import{D as DropdownMenu,a as DropdownMenuTrigger,b as DropdownMenuContent,e as DropdownMenuItem}from"./dropdown-menu.COVwx0ux.js";import{S as Select,a as SelectTrigger,b as SelectValue,c as SelectContent,d as SelectItem}from"./select.CdiqpKGf.js";import{B as Badge}from"./badge.BFgaaq5n.js";import{C as ConfirmationModal}from"./ConfirmationModal.BnFiX7YW.js";import{usersApi}from"./api.B5PpFILw.js";import{t as toast}from"./index.fAd_ikgp.js";import{D as Dialog,a as DialogContent,b as DialogHeader,c as DialogTitle,d as DialogDescription}from"./dialog.Deg6T-G2.js";import AddUserForm from"./AddUserForm.BqSL5GoP.js";import{L as Label}from"./label.CykMmJMJ.js";import"./use3DTilt.Dcq4iilr.js";import"./index.CmV6gt94.js";import"./index.PIAPtHoh.js";import"./index.ubNQCTBn.js";import"./index.CLV08RI1.js";import"./index.BB0xO63c.js";import"./index.CZLqkOjo.js";import"./index.Drh0kMGk.js";import"./Combination.wteLWZ5f.js";import"./index.D7stNVgX.js";import"./index.Bcho8R2B.js";import"./index.Ci_bviUJ.js";import"./index.DNfkKfAg.js";import"./chevron-right.go_z-t67.js";import"./check.bOXrmBHo.js";import"./index.DGt6JTY0.js";import"./index.BhA3i5Wo.js";import"./index.DQFEM45L.js";import"./chevron-up.CkJSkLmv.js";import"./index.DYERl0li.js";import"./x.3YBaUzhJ.js";import"./alert.By6U2YgB.js";function AddUserModal({open,onOpenChange,onSuccess}){return jsxRuntimeExports.jsx(Dialog,{open,onOpenChange,children:jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Tambah Pengguna Baru"}),jsxRuntimeExports.jsx(DialogDescription,{children:"Daftarkan pengguna baru ke dalam sistem SIM4LON"})]}),jsxRuntimeExports.jsx("div",{className:"py-4",children:jsxRuntimeExports.jsx(AddUserForm,{onClose:()=>{onOpenChange(!1),onSuccess?.()}})})]})})}const roleOptions=[{value:"ADMIN",label:"Administrator"},{value:"OPERATOR",label:"Operator Lapangan"}];function EditUserForm({onClose,userId}){const[formData,setFormData]=reactExports.useState({nama:"",telepon:"",email:"",role:"OPERATOR",status:"aktif"}),[isLoading,setIsLoading]=reactExports.useState(!1),[isFetching,setIsFetching]=reactExports.useState(!0),[showConfirm,setShowConfirm]=reactExports.useState(!1),[showResetPassword,setShowResetPassword]=reactExports.useState(!1),[errors,setErrors]=reactExports.useState({}),[generatedPassword,setGeneratedPassword]=reactExports.useState(""),[copiedPassword,setCopiedPassword]=reactExports.useState(!1);reactExports.useEffect(()=>{(async()=>{if(!userId){setIsFetching(!1);return}try{const user=await usersApi.getById(userId);setFormData({nama:user.name,telepon:user.phone||"",email:user.email,role:user.role,status:user.is_active?"aktif":"nonaktif"})}catch(error){console.error("Failed to fetch user:",error),toast.error("Gagal memuat data pengguna")}finally{setIsFetching(!1)}})()},[userId]);const validateForm=()=>{const newErrors={};return formData.nama.trim()||(newErrors.nama="Nama pengguna harus diisi"),formData.telepon.trim()?/^(\+62|0)[0-9]{9,12}$/.test(formData.telepon.replace(/\s/g,""))||(newErrors.telepon="Format nomor telepon tidak valid"):newErrors.telepon="Nomor telepon harus diisi",formData.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(formData.email)||(newErrors.email="Format email tidak valid"):newErrors.email="Email harus diisi",formData.role||(newErrors.role="Peran pengguna harus dipilih"),formData.status||(newErrors.status="Status pengguna harus dipilih"),setErrors(newErrors),Object.keys(newErrors).length===0},handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value})),errors[name]&&setErrors(prev=>({...prev,[name]:""}))},handleSelectChange=(name,value)=>{setFormData(prev=>({...prev,[name]:value})),errors[name]&&setErrors(prev=>({...prev,[name]:""}))},handleSubmit=async()=>{if(!validateForm()){toast.error("Mohon periksa kembali form Anda");return}if(!userId){toast.error("ID pengguna tidak ditemukan");return}setIsLoading(!0);try{await usersApi.update(userId,{name:formData.nama,phone:formData.telepon,role:formData.role,is_active:formData.status==="aktif"}),toast.success("Data pengguna berhasil diperbarui"),setTimeout(()=>{onClose?onClose():window.location.href="/daftar-pengguna"},500)}catch(error){const message=error?.message||"Gagal memperbarui data pengguna";toast.error(message),setIsLoading(!1)}},handleCancel=()=>{onClose?onClose():window.location.href="/daftar-pengguna"},[isResettingPassword,setIsResettingPassword]=reactExports.useState(!1),generateRandomPassword=async()=>{if(!userId){toast.error("ID pengguna tidak ditemukan");return}setIsResettingPassword(!0);try{const response=await usersApi.resetPassword(userId);setGeneratedPassword(response.newPassword),setCopiedPassword(!1),toast.success("Password berhasil direset dan disimpan ke database")}catch(error){console.error("Failed to reset password:",error),toast.error("Gagal mereset password")}finally{setIsResettingPassword(!1)}},copyPasswordToClipboard=()=>{navigator.clipboard.writeText(generatedPassword),setCopiedPassword(!0),setTimeout(()=>setCopiedPassword(!1),2e3)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Card,{className:"border shadow-card",children:[jsxRuntimeExports.jsxs(CardHeader,{className:"border-b bg-gradient-to-r from-primary/5 to-accent/5",children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"UserEdit",className:"h-5 w-5 text-primary"}),"Edit Data Pengguna"]}),jsxRuntimeExports.jsxs(CardDescription,{children:["ID Pengguna: ",jsxRuntimeExports.jsx("span",{className:"font-mono font-semibold text-foreground",children:userId||"-"})]})]}),jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"nama",className:"text-sm font-semibold",children:["Nama Pengguna ",jsxRuntimeExports.jsx("span",{className:"text-destructive",children:"*"})]}),jsxRuntimeExports.jsx(Input,{id:"nama",name:"nama",placeholder:"Masukkan nama pengguna",value:formData.nama,onChange:handleInputChange,className:`h-10 ${errors.nama?"border-destructive focus-visible:ring-destructive":""}`,disabled:isLoading}),errors.nama&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"AlertCircle",className:"h-4 w-4"}),errors.nama]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"telepon",className:"text-sm font-semibold",children:["Nomor Telepon ",jsxRuntimeExports.jsx("span",{className:"text-destructive",children:"*"})]}),jsxRuntimeExports.jsx(Input,{id:"telepon",name:"telepon",placeholder:"Contoh: 081234567890",value:formData.telepon,onChange:handleInputChange,className:`h-10 ${errors.telepon?"border-destructive focus-visible:ring-destructive":""}`,disabled:isLoading}),errors.telepon&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"AlertCircle",className:"h-4 w-4"}),errors.telepon]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"email",className:"text-sm font-semibold flex items-center gap-2",children:["Email",jsxRuntimeExports.jsx("span",{className:"text-xs font-normal bg-gray-200 text-gray-600 px-2 py-0.5 rounded",children:"Read-only"})]}),jsxRuntimeExports.jsx(Input,{id:"email",name:"email",type:"email",value:formData.email,readOnly:!0,disabled:!0,className:"h-10 bg-gray-100 text-gray-600 cursor-not-allowed border-gray-200"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"role",className:"text-sm font-semibold",children:["Peran Pengguna ",jsxRuntimeExports.jsx("span",{className:"text-destructive",children:"*"})]}),jsxRuntimeExports.jsxs(Select,{value:formData.role,onValueChange:value=>handleSelectChange("role",value),disabled:isLoading,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:`h-10 ${errors.role?"border-destructive focus-visible:ring-destructive":""}`,children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Pilih peran pengguna"})}),jsxRuntimeExports.jsx(SelectContent,{children:roleOptions.map(option=>jsxRuntimeExports.jsx(SelectItem,{value:option.value,children:option.label},option.value))})]}),errors.role&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"AlertCircle",className:"h-4 w-4"}),errors.role]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Key",className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx("p",{className:"font-semibold text-foreground",children:"Reset Password Pengguna"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground text-xs",children:"Generate password baru untuk pengguna yang lupa kata sandi"})]})]}),jsxRuntimeExports.jsxs(Button,{type:"button",variant:"outline",onClick:()=>setShowResetPassword(!0),disabled:isLoading,className:"shrink-0 text-blue-600 border-blue-200 hover:bg-blue-50",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"RotateCw",className:"mr-2 h-4 w-4"}),"Reset Password"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-4 flex gap-3",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Info",className:"h-5 w-5 text-primary shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-foreground",children:[jsxRuntimeExports.jsx("p",{className:"font-semibold mb-1",children:"Catatan Penting"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Perubahan peran pengguna akan langsung berlaku. Pastikan pengguna memiliki akses yang sesuai dengan tanggung jawab mereka."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:handleCancel,disabled:isLoading,className:"flex-1",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"X",className:"mr-2 h-4 w-4"}),"Batal"]}),jsxRuntimeExports.jsx(Button,{onClick:()=>setShowConfirm(!0),disabled:isLoading,className:"flex-1 bg-primary hover:bg-primary/90",children:isLoading?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"mr-2 h-4 w-4 animate-spin"}),"Menyimpan..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Save",className:"mr-2 h-4 w-4"}),"Simpan Perubahan"]})})]})]})})]}),jsxRuntimeExports.jsx(ConfirmationModal,{open:showConfirm,onOpenChange:setShowConfirm,title:"Konfirmasi Perubahan",description:`Apakah Anda yakin ingin menyimpan perubahan data pengguna ${formData.nama}?`,confirmText:"Ya, Simpan",cancelText:"Batal",icon:"CheckCircle",iconColor:"text-primary",isLoading,isDangerous:!1,onConfirm:handleSubmit}),showResetPassword&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-2xl max-w-lg w-full overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-5",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"bg-white/20 rounded-lg p-2",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Shield",className:"h-6 w-6 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"Reset Password"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-100",children:formData.nama})]})]})}),jsxRuntimeExports.jsx("div",{className:"p-6",children:generatedPassword?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[jsxRuntimeExports.jsx("div",{className:"bg-green-500 rounded-full p-1",children:jsxRuntimeExports.jsx(SafeIcon,{name:"Check",className:"h-4 w-4 text-white"})}),jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-green-800",children:"Password berhasil direset!"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Password Baru"}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 p-4 bg-gray-50 border-2 border-gray-200 rounded-lg font-mono text-lg tracking-wider",children:[jsxRuntimeExports.jsx("span",{className:"flex-1 select-all break-all",children:generatedPassword}),jsxRuntimeExports.jsxs(Button,{type:"button",size:"sm",onClick:copyPasswordToClipboard,className:copiedPassword?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-900 hover:bg-gray-800 text-white",children:[jsxRuntimeExports.jsx(SafeIcon,{name:copiedPassword?"Check":"Copy",className:"h-4 w-4 mr-1"}),copiedPassword?"Copied!":"Copy"]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-3 bg-amber-50 rounded-lg border border-amber-200",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"AlertTriangle",className:"h-5 w-5 text-amber-600 mt-0.5 shrink-0"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-amber-800",children:[jsxRuntimeExports.jsx("strong",{children:"Penting:"})," Salin password ini sekarang. Setelah modal ditutup, password tidak akan ditampilkan lagi."]})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-100",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Info",className:"h-5 w-5 text-blue-600 mt-0.5 shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-900 mb-1",children:"Password akan direset"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Sistem akan generate password baru dan menyimpannya ke database. Password lama tidak dapat dipulihkan."})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Langkah selanjutnya:"}),jsxRuntimeExports.jsxs("div",{className:"grid gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[jsxRuntimeExports.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 text-gray-500 text-xs font-medium",children:"1"}),'Klik "Generate Password"']}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[jsxRuntimeExports.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 text-gray-500 text-xs font-medium",children:"2"}),"Copy password yang muncul"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[jsxRuntimeExports.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 text-gray-500 text-xs font-medium",children:"3"}),"Berikan ke pengguna melalui channel aman"]})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"border-t border-gray-100 px-6 py-4 bg-gray-50 flex gap-3 justify-end",children:generatedPassword?jsxRuntimeExports.jsxs(Button,{type:"button",className:"bg-green-600 hover:bg-green-700 text-white px-8",onClick:()=>{setShowResetPassword(!1),setGeneratedPassword("")},children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Check",className:"mr-2 h-4 w-4"}),"Selesai"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"ghost",onClick:()=>setShowResetPassword(!1),disabled:isResettingPassword,children:"Batal"}),jsxRuntimeExports.jsx(Button,{type:"button",className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:generateRandomPassword,disabled:isResettingPassword,children:isResettingPassword?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Key",className:"mr-2 h-4 w-4"}),"Generate Password"]})})]})})]})})]})}function EditUserModal({open,onOpenChange,userId,onSuccess}){return jsxRuntimeExports.jsx(Dialog,{open,onOpenChange,children:jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Edit Pengguna"}),jsxRuntimeExports.jsx(DialogDescription,{children:"Perbarui informasi pengguna sistem"})]}),jsxRuntimeExports.jsx("div",{className:"py-4",children:jsxRuntimeExports.jsx(EditUserForm,{onClose:()=>{onOpenChange(!1),onSuccess?.()},userId})})]})})}const roleLabels={ADMIN:"Administrator",OPERATOR:"Operator Lapangan"},roleBadgeColors={ADMIN:"bg-purple-500/20 text-purple-600",OPERATOR:"bg-blue-500/20 text-blue-600"};function UserListPage(){const[userList,setUserList]=reactExports.useState([]),[isLoading,setIsLoading]=reactExports.useState(!0),[totalItems,setTotalItems]=reactExports.useState(0),[currentPage,setCurrentPage]=reactExports.useState(1),[totalPages,setTotalPages]=reactExports.useState(1),[searchTerm,setSearchTerm]=reactExports.useState(""),[roleFilter,setRoleFilter]=reactExports.useState("all"),[showAddModal,setShowAddModal]=reactExports.useState(!1),[showEditModal,setShowEditModal]=reactExports.useState(!1),[editingUserId,setEditingUserId]=reactExports.useState(""),[selectedUser,setSelectedUser]=reactExports.useState(null),[showDeleteModal,setShowDeleteModal]=reactExports.useState(!1),[showStatusModal,setShowStatusModal]=reactExports.useState(!1),fetchUsers=async()=>{try{setIsLoading(!0);const response=await usersApi.getAll(currentPage,10,searchTerm||void 0);let filteredData=response.data;roleFilter!=="all"&&(filteredData=response.data.filter(u=>u.role===roleFilter)),setUserList(filteredData),setTotalItems(response.meta.total),setTotalPages(response.meta.totalPages)}catch(error){console.error("Failed to fetch users:",error),toast.error("Gagal memuat data pengguna")}finally{setIsLoading(!1)}};reactExports.useEffect(()=>{fetchUsers()},[currentPage,roleFilter]),reactExports.useEffect(()=>{const timer=setTimeout(()=>{setCurrentPage(1),fetchUsers()},500);return()=>clearTimeout(timer)},[searchTerm]);const handleStatusToggleClick=user=>{setSelectedUser(user),setShowStatusModal(!0)},handleConfirmStatusToggle=async()=>{if(selectedUser)try{const newStatus=!selectedUser.is_active;await usersApi.update(selectedUser.id,{is_active:newStatus}),toast.success(`Pengguna berhasil ${newStatus?"diaktifkan":"dinonaktifkan"}`),fetchUsers()}catch(error){console.error("Failed to update status:",error),toast.error("Gagal mengubah status pengguna")}finally{setShowStatusModal(!1),setSelectedUser(null)}},handleDeleteClick=user=>{setSelectedUser(user),setShowDeleteModal(!0)},handleConfirmDelete=async()=>{if(selectedUser)try{await usersApi.delete(selectedUser.id),toast.success("Pengguna berhasil dihapus"),fetchUsers()}catch(error){console.error("Failed to delete user:",error),toast.error("Gagal menghapus pengguna")}finally{setShowDeleteModal(!1),setSelectedUser(null)}},handleEditClick=user=>{setEditingUserId(user.id),setShowEditModal(!0)},handleSuccess=()=>{setShowAddModal(!1),setShowEditModal(!1),setEditingUserId(""),fetchUsers()},adminCount=userList.filter(u=>u.role==="ADMIN").length,operatorCount=userList.filter(u=>u.role==="OPERATOR").length;return jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-6 p-4 sm:p-6 lg:p-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Daftar Pengguna"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Kelola semua pengguna sistem SIM4LON"})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>setShowAddModal(!0),className:"bg-primary hover:bg-primary/90 w-full sm:w-auto",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Plus",className:"h-4 w-4 mr-2"}),"Tambah Pengguna"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[jsxRuntimeExports.jsx(Tilt3DCard,{className:"animate-fadeInUp",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-2",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Pengguna"})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold",children:totalItems})})]})}),jsxRuntimeExports.jsx(Tilt3DCard,{className:"animate-fadeInUp",style:{animationDelay:"0.1s"},children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-2",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Administrator"})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-purple-600",children:adminCount})})]})}),jsxRuntimeExports.jsx(Tilt3DCard,{className:"animate-fadeInUp",style:{animationDelay:"0.2s"},children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-2",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Operator"})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-blue-600",children:operatorCount})})]})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-3",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:"Cari Pengguna"})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(Input,{placeholder:"Cari berdasarkan nama, email, atau telepon...",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})}),jsxRuntimeExports.jsxs(Select,{value:roleFilter,onValueChange:setRoleFilter,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-full sm:w-48",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"all",children:"Semua Peran"}),jsxRuntimeExports.jsx(SelectItem,{value:"ADMIN",children:"Administrator"}),jsxRuntimeExports.jsx(SelectItem,{value:"OPERATOR",children:"Operator Lapangan"})]})]})]})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Daftar Pengguna"}),jsxRuntimeExports.jsxs(CardDescription,{children:["Menampilkan ",userList.length," dari ",totalItems," pengguna"]})]}),jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:isLoading?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-8",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Loader2",className:"h-8 w-8 animate-spin text-primary"}),jsxRuntimeExports.jsx("span",{className:"ml-2",children:"Memuat data..."})]}):jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHeader,{children:jsxRuntimeExports.jsxs(TableRow,{className:"bg-muted/50",children:[jsxRuntimeExports.jsx(TableHead,{className:"font-semibold w-24",children:"Kode"}),jsxRuntimeExports.jsx(TableHead,{className:"font-semibold",children:"Nama"}),jsxRuntimeExports.jsx(TableHead,{className:"font-semibold",children:"Email"}),jsxRuntimeExports.jsx(TableHead,{className:"font-semibold",children:"Telepon"}),jsxRuntimeExports.jsx(TableHead,{className:"font-semibold",children:"Peran"}),jsxRuntimeExports.jsx(TableHead,{className:"font-semibold",children:"Status"}),jsxRuntimeExports.jsx(TableHead,{className:"text-right font-semibold",children:"Aksi"})]})}),jsxRuntimeExports.jsx(TableBody,{children:userList.length>0?userList.map(user=>jsxRuntimeExports.jsxs(TableRow,{className:"hover:bg-muted/50",children:[jsxRuntimeExports.jsx(TableCell,{className:"font-mono text-sm text-primary",children:user.code||"-"}),jsxRuntimeExports.jsx(TableCell,{className:"font-medium",children:user.name}),jsxRuntimeExports.jsx(TableCell,{children:user.email}),jsxRuntimeExports.jsx(TableCell,{children:user.phone||"-"}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Badge,{className:roleBadgeColors[user.role],children:roleLabels[user.role]})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Badge,{variant:user.is_active?"default":"secondary",children:user.is_active?"Aktif":"Nonaktif"})}),jsxRuntimeExports.jsx(TableCell,{className:"text-right",children:jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",children:jsxRuntimeExports.jsx(SafeIcon,{name:"MoreVertical",className:"h-4 w-4"})})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{align:"end",children:[jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:()=>handleEditClick(user),children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Edit",className:"mr-2 h-4 w-4"}),"Edit"]}),user.is_active?jsxRuntimeExports.jsxs(DropdownMenuItem,{className:"text-orange-600",onClick:()=>handleStatusToggleClick(user),children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Ban",className:"mr-2 h-4 w-4"}),"Nonaktifkan"]}):jsxRuntimeExports.jsxs(DropdownMenuItem,{className:"text-green-600",onClick:()=>handleStatusToggleClick(user),children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Check",className:"mr-2 h-4 w-4"}),"Aktifkan"]}),jsxRuntimeExports.jsxs(DropdownMenuItem,{className:"text-destructive",onClick:()=>handleDeleteClick(user),children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Trash2",className:"mr-2 h-4 w-4"}),"Hapus"]})]})]})})]},user.id)):jsxRuntimeExports.jsx(TableRow,{children:jsxRuntimeExports.jsx(TableCell,{colSpan:6,className:"text-center py-8",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2",children:[jsxRuntimeExports.jsx(SafeIcon,{name:"Users",className:"h-8 w-8 text-muted-foreground"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Tidak ada pengguna ditemukan"})]})})})})]})}),totalPages>1&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-muted-foreground",children:["Halaman ",currentPage," dari ",totalPages]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",disabled:currentPage===1,onClick:()=>setCurrentPage(p=>p-1),children:[jsxRuntimeExports.jsx(SafeIcon,{name:"ChevronLeft",className:"h-4 w-4"}),"Prev"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",disabled:currentPage===totalPages,onClick:()=>setCurrentPage(p=>p+1),children:["Next",jsxRuntimeExports.jsx(SafeIcon,{name:"ChevronRight",className:"h-4 w-4"})]})]})]})]})]}),jsxRuntimeExports.jsx(AddUserModal,{open:showAddModal,onOpenChange:setShowAddModal,onSuccess:handleSuccess}),jsxRuntimeExports.jsx(EditUserModal,{open:showEditModal,onOpenChange:setShowEditModal,userId:editingUserId,onSuccess:handleSuccess}),selectedUser&&showStatusModal&&jsxRuntimeExports.jsx(ConfirmationModal,{open:showStatusModal,onOpenChange:setShowStatusModal,title:selectedUser.is_active?"Nonaktifkan Pengguna":"Aktifkan Pengguna",description:selectedUser.is_active?`Apakah Anda yakin ingin menonaktifkan "${selectedUser.name}"?`:`Apakah Anda yakin ingin mengaktifkan "${selectedUser.name}"?`,confirmText:selectedUser.is_active?"Nonaktifkan":"Aktifkan",cancelText:"Batal",icon:selectedUser.is_active?"AlertTriangle":"CheckCircle",isDangerous:selectedUser.is_active,onConfirm:handleConfirmStatusToggle}),selectedUser&&showDeleteModal&&jsxRuntimeExports.jsx(ConfirmationModal,{open:showDeleteModal,onOpenChange:setShowDeleteModal,title:"Hapus Pengguna",description:`Apakah Anda yakin ingin menghapus "${selectedUser.name}"? Tindakan ini tidak dapat dibatalkan.`,confirmText:"Hapus",cancelText:"Batal",icon:"Trash2",isDangerous:!0,onConfirm:handleConfirmDelete})]})}export{UserListPage as default};
