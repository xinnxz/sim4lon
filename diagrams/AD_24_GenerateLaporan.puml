@startuml AD_24_GenerateLaporan
!theme plain
skinparam backgroundColor #f0f8ff
skinparam ActivityBackgroundColor #87CEEB
skinparam ActivityBorderColor #1565c0
skinparam PartitionBackgroundColor #e3f2fd
skinparam PartitionBorderColor #1565c0

title **AD-24: Generate Laporan**\nSistem SIM4LON

|User|
start
:Buka halaman Laporan;
:Pilih jenis laporan;

switch (Jenis Laporan?)
case (Penjualan)
    :Pilih periode (tanggal);
    :Pilih pangkalan (opsional);
    
    |Sistem|
    :Query orders dengan filter;
    :Hitung total penjualan;
    :Hitung per status;
    :Tampilkan laporan penjualan;

case (Pembayaran)
    :Pilih periode;
    :Pilih metode (opsional);
    
    |Sistem|
    :Query payment_records;
    :Hitung total per metode;
    :Tampilkan laporan pembayaran;

case (Stok)
    :Pilih periode;
    :Pilih jenis LPG;
    
    |Sistem|
    :Query stock_histories;
    :Hitung total MASUK;
    :Hitung total KELUAR;
    :Tampilkan laporan pergerakan;

endswitch

|User|
:Lihat laporan di layar;

if (Ingin export?) then (ya)
    :Klik "Export";
    
    |Sistem|
    :Generate file Excel;
    :Download file;
    
    |User|
    :File tersimpan;
    stop
else (tidak)
    :Selesai melihat;
    stop
endif

@enduml
